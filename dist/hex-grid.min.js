"use strict";!function(){function e(e){Object.keys(b.transientJobs).forEach(function(t){var i=window.hg[b.transientJobs[t].constructorName].config;i.isRecurring&&b.transientJobs[t].toggleRecurrence(e,!0,i.avgDelay,i.delayDeviationRange)})}function t(e,t,i,n){return new window.hg[b.transientJobs[e].constructorName](t,i,n)}function i(e,i,n,r){function o(){b.transientJobs[i].jobs[n.index].splice(b.transientJobs[i].jobs[n.index].indexOf(l),1)}var l;e=e||t.bind(b,i),l=e(n,r,o),b.transientJobs[i].jobs[n.index].push(l),window.hg.animator.startJob(l)}function n(e,t){b.transientJobs[e].create(t,s(t))}function r(e,t,i,n,r){function o(){var i=Math.random()*s+l;b.transientJobs[e].createRandom(t),c[t.index]=setTimeout(o,i)}var l,a,s,c;c=b.transientJobs[e].timeouts,l=n-.5*r,l=l>0?l:1,a=n+.5*r,s=a-l,c[t.index]&&(clearTimeout(c[t.index]),c[t.index]=null),i&&(c[t.index]=setTimeout(o,n))}function o(e,t){var i,n;i=b.persistentJobs[e],n=new window.hg[i.constructorName](t),i.jobs[t.index].push(n),i.restart(t,i.jobs[t.index].length-1)}function l(e,t,i){function n(e){e.isComplete||window.hg.animator.cancelJob(e),e.init(),window.hg.animator.startJob(e)}"undefined"!=typeof i?n(b.persistentJobs[e].jobs[t.index][i]):b.persistentJobs[e].jobs[t.index].forEach(n)}function a(){v.grids.forEach(f)}function s(e){var t=parseInt(Math.random()*e.originalTiles.length);return e.originalTiles[t]}function c(e){var t=parseInt(Math.random()*e.contentTiles.length);return e.contentTiles[t]}function d(e,t,i){return window.hg.LineJob.createRandomLineJob(e,i)}function u(e,t,i){function n(){r.lineJobs.forEach(function(t){b.transientJobs.line.jobs[e.index].splice(b.transientJobs.line.jobs[e.index].indexOf(t),1)}),i()}var r=new window.hg.LinesRadiateJob(e,t,n);return r.lineJobs.forEach(function(t){b.transientJobs.line.jobs[e.index].push(t)}),r}function g(e){e.isPostOpen||b.transientJobs.openPost.create(e,c(e))}function h(e){e.isPostOpen&&b.transientJobs.closePost.create(e,e.expandedTile)}function p(t,i,n){function r(e){Object.keys(b.persistentJobs).forEach(function(t){b.persistentJobs[t].jobs[e]=[]}),Object.keys(b.transientJobs).forEach(function(t){b.transientJobs[t].jobs[e]=[]})}var o,l,a,s;return l=v.grids.length,r(l),o=new window.hg.Grid(l,t,i,n),v.grids.push(o),window.hg.animator.startJob(o),b.persistentJobs.colorReset.create(o),b.persistentJobs.displacementReset.create(o),b.persistentJobs.colorShift.create(o),b.persistentJobs.colorWave.create(o),b.persistentJobs.displacementWave.create(o),a=o.annotations,window.hg.animator.startJob(a),v.annotations.push(a),s=new window.hg.Input(o),v.inputs.push(s),e(o),o}function f(e){window.hg.animator.cancelAll(),e.resize(),window.hg.animator.cancelAll(),m(e),window.hg.animator.startJob(e),window.hg.animator.startJob(v.annotations[e.index])}function m(e){b.persistentJobs.colorReset.restart(e),b.persistentJobs.displacementReset.restart(e),b.persistentJobs.colorShift.restart(e),b.persistentJobs.colorWave.restart(e),b.persistentJobs.displacementWave.restart(e)}var b={},w={},v={};b.persistentJobs={colorShift:{constructorName:"ColorShiftJob",jobs:[],create:o.bind(b,"colorShift"),restart:l.bind(b,"colorShift")},colorWave:{constructorName:"ColorWaveJob",jobs:[],create:o.bind(b,"colorWave"),restart:l.bind(b,"colorWave")},displacementWave:{constructorName:"DisplacementWaveJob",jobs:[],create:o.bind(b,"displacementWave"),restart:l.bind(b,"displacementWave")},colorReset:{constructorName:"ColorResetJob",jobs:[],create:o.bind(b,"colorReset"),restart:l.bind(b,"colorReset")},displacementReset:{constructorName:"DisplacementResetJob",jobs:[],create:o.bind(b,"displacementReset"),restart:l.bind(b,"displacementReset")}},b.transientJobs={openPost:{constructorName:"OpenPostJob",jobs:[],timeouts:[],create:i.bind(b,null,"openPost"),createRandom:g,toggleRecurrence:r.bind(b,"openPost")},closePost:{constructorName:"ClosePostJob",jobs:[],timeouts:[],create:i.bind(b,null,"closePost"),createRandom:h,toggleRecurrence:r.bind(b,"closePost")},displacementRadiate:{constructorName:"DisplacementRadiateJob",jobs:[],timeouts:[],create:i.bind(b,null,"displacementRadiate"),createRandom:n.bind(b,"displacementRadiate"),toggleRecurrence:r.bind(b,"displacementRadiate")},highlightHover:{constructorName:"HighlightHoverJob",jobs:[],timeouts:[],create:i.bind(b,null,"highlightHover"),createRandom:n.bind(b,"highlightHover"),toggleRecurrence:r.bind(b,"highlightHover")},highlightRadiate:{constructorName:"HighlightRadiateJob",jobs:[],timeouts:[],create:i.bind(b,null,"highlightRadiate"),createRandom:n.bind(b,"highlightRadiate"),toggleRecurrence:r.bind(b,"highlightRadiate")},intraTileRadiate:{constructorName:"IntraTileRadiateJob",jobs:[],timeouts:[],create:i.bind(b,null,"intraTileRadiate"),createRandom:n.bind(b,"intraTileRadiate"),toggleRecurrence:r.bind(b,"intraTileRadiate")},line:{constructorName:"LineJob",jobs:[],timeouts:[],create:i.bind(b,d,"line"),createRandom:n.bind(b,"line"),toggleRecurrence:r.bind(b,"line")},linesRadiate:{constructorName:"LinesRadiateJob",jobs:[],timeouts:[],create:i.bind(b,u,"linesRadiate"),createRandom:n.bind(b,"linesRadiate"),toggleRecurrence:r.bind(b,"linesRadiate")},pan:{constructorName:"PanJob",jobs:[],timeouts:[],create:i.bind(b,null,"pan"),createRandom:n.bind(b,"pan"),toggleRecurrence:r.bind(b,"pan")},spread:{constructorName:"SpreadJob",jobs:[],timeouts:[],create:i.bind(b,null,"spread"),createRandom:n.bind(b,"spread"),toggleRecurrence:r.bind(b,"spread")},tileBorder:{constructorName:"TileBorderJob",jobs:[],timeouts:[],create:i.bind(b,null,"tileBorder"),createRandom:n.bind(b,"tileBorder"),toggleRecurrence:r.bind(b,"tileBorder")}},v.grids=[],v.inputs=[],v.annotations=[],b.config=w,b.createNewHexGrid=p,b.resetGrid=f,b.resetPersistentJobs=m,window.hg=window.hg||{},window.hg.controller=b,window.addEventListener("resize",a,!1),console.log("controller module loaded")}(),function(){function e(e,t,i){e.forEach(function(e){t.forEach(function(t){L.listen(e,t,i)})})}function t(e,t,i,n){var r=document.createElement(e);return t&&t.appendChild(r),i&&(r.id=i),n&&n.forEach(function(e){a(r,e)}),r}function i(e,t){var i,n;return i=e.className.indexOf(t),i>=0&&(0===i||" "===e.className[i-1])&&(n=i+t.length,n===e.className.length||" "===e.className[n])?!0:!1}function n(e,t,n){"undefined"==typeof n?i(e,t)?s(e,t):a(e,t):n?a(e,t):s(e,t)}function r(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return t-=L.getScrollLeft(),i-=L.getScrollTop(),{x:t,y:i}}function o(){var e,t;return"undefined"!=typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{w:e,h:t}}function l(e,t){return t&&t.parentNode===e?(e.removeChild(t),!0):!1}function a(e,t){e.className+=" "+t}function s(e,t){e.className=e.className.split(" ").filter(function(e){return e!==t}).join(" ")}function c(e){e.className=""}function d(e,t,i,n,r){var o,l;return i=i||document.getElementsByTagName("body")[0],o=L.createElement(t,null,n,r),o.style.position="absolute",o.style.visibility="hidden",o.style.whiteSpace="nowrap",i.appendChild(o),o.innerHTML=e,l=o.clientWidth,i.removeChild(o),l}function u(e){var t,i;i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+i.join("&")}function g(e,t){var i,n;return t=encodeURIComponent(t),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+t+"=([^&#]*)","i"),n=i.exec(e),null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))}function h(e,t){e.style.transitionDuration=t+"s",e.style.WebkitTransitionDuration=t+"s",e.style.MozTransitionDuration=t+"s",e.style.msTransitionDuration=t+"s",e.style.OTransitionDuration=t+"s"}function p(e,t){e.style.transitionDelay=t+"s",e.style.WebkitTransitionDelay=t+"s",e.style.MozTransitionDelay=t+"s",e.style.msTransitionDelay=t+"s",e.style.OTransitionDelay=t+"s"}function f(e,t){var i,n,r;for(i=e.querySelectorAll("."+t),n=0,r=i.length;r>n;n++)e.removeChild(i[n])}function m(e,t){var i="cubic-bezier("+t.p1x+","+t.p1y+","+t.p2x+","+t.p2y+")";e.style.transitionTimingFunction=i,e.style.WebkitTransitionTimingFunction=i,e.style.MozTransitionTimingFunction=i,e.style.msTransitionTimingFunction=i,e.style.OTransitionTimingFunction=i}function b(e,t){var i,n,r,o,l,a,s;return r=1-e,o=r*r*r,l=3*e*r*r,a=3*e*e*r,s=e*e*e,i=t[0].x*o+t[1].x*l+t[2].x*a+t[3].x*s,n=t[0].y*o+t[1].y*l+t[2].y*a+t[3].y*s,{x:i,y:n}}function w(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function v(e){var t,i,n,r;for(t=0,n=e.length;n>t;t+=1)i=parseInt(Math.random()*n),r=e[i],e[i]=e[t],e[t]=r;return e}function C(e,t,i,n){var r,o,l,a,s,c,d,u,g,h,p;if(r=!1,n){if(i.length<6)return r;u=i[i.length-4],g=i[i.length-3]}else{if(i.length<4)return r;u=i[i.length-2],g=i[i.length-1]}for(o=0,l=i.length-2;l>o;o+=2)h=i[o],p=i[o+1],h>u?(a=u,s=g,c=h,d=p):(a=h,s=p,c=u,d=g),e>h==u>=e&&(d-s)*(e-a)>(t-s)*(c-a)&&(r=!r),u=h,g=p;return r}function y(e){var t,i;i={};for(t in e)i[t]=e[t];return i}function T(e){var t=e.s*(e.l<.5?e.l:1-e.l);return{h:e.h,s:2*t/(e.l+t),v:e.l+t}}function x(e){var t=(2-e.s)*e.v;return{h:e.h,s:e.s*e.v/(1>t?t:2.00000001-t),l:.5*t}}function A(e,t){for(;e;)if(e.classList.contains(t))return e;return null}var N={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1+--e*e*e},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}},R={linear:function(e){return e},easeInQuad:function(e){return Math.sqrt(e)},easeOutQuad:function(e){return 1-Math.sqrt(1-e)},easeInOutQuad:function(e){return.5>e?Math.sqrt(.5*e):1-.70710678*Math.sqrt(1-e)}},S=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,16)}).bind(window),L={listenToMultipleForMultiple:e,createElement:t,containsClass:i,toggleClass:n,getPageOffset:r,getViewportSize:o,removeChildIfPresent:l,addClass:a,removeClass:s,clearClasses:c,getTextWidth:d,encodeQueryString:u,getQueryStringParameterValue:g,setTransitionDurationSeconds:h,setTransitionDelaySeconds:p,removeChildrenWithClass:f,setTransitionCubicBezierTimingFunction:m,easingFunctions:N,inverseEasingFunctions:R,requestAnimationFrame:S,getXYFromPercentWithBezier:b,applyTransform:w,shuffle:v,isPointInsidePolyline:C,shallowCopy:y,hsvToHsl:x,hslToHsv:T,findClassInSelfOrAncestors:A,svgNamespace:"http://www.w3.org/2000/svg"};window.hg=window.hg||{},window.hg.util=L,console.log("util module loaded")}(),function(){function e(){var i,r;i=Date.now(),r=i-s.previousTime,r=r>c.deltaTimeUpperThreshold?c.deltaTimeUpperThreshold:r,s.isLooping=!0,s.isPaused?s.isLooping=!1:(t(i,r),n(),window.hg.util.requestAnimationFrame(e)),s.previousTime=i}function t(e,t){var n,r;for(n=0,r=s.jobs.length;r>n;n+=1)s.jobs[n].update(e,t),s.jobs[n].isComplete&&(i(s.jobs[n],n),n--,r--)}function i(e,t){var i;if("number"==typeof t)s.jobs.splice(t,1);else for(t=0,i=s.jobs.length;i>t;t+=1)if(s.jobs[t]===e){s.jobs.splice(t,1);break}0===s.jobs.length&&(s.isPaused=!0)}function n(){var e,t;for(e=0,t=s.jobs.length;t>e;e+=1)s.jobs[e].draw()}function r(){s.isPaused=!1,s.isLooping||(s.previousTime=Date.now(),e())}function o(e){e.start(),s.jobs.push(e),r()}function l(e){console.log("Job cancelling: "+e.constructor.name),e.cancel(),i(e)}function a(){for(;s.jobs.length;)l(s.jobs[0])}var s={},c={};c.deltaTimeUpperThreshold=200,s.jobs=[],s.previousTime=Date.now(),s.isLooping=!1,s.isPaused=!0,s.startJob=o,s.cancelJob=l,s.cancelAll=a,s.config=c,window.hg=window.hg||{},window.hg.animator=s,console.log("animator module loaded")}(),function(){function e(){var e,t,i;for(e=this,t=0,i=e.grid.originalTiles.length;i>t;t+=1)e.grid.originalTiles[t].holdsContent&&(e.grid.originalTiles[t].currentColor.h=et.contentTileHue,e.grid.originalTiles[t].currentColor.s=et.contentTileSaturation,e.grid.originalTiles[t].currentColor.l=et.contentTileLightness)}function t(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.grid.allTiles[t].isBorderTile&&(e.grid.allTiles[t].currentColor.h=et.borderTileHue,e.grid.allTiles[t].currentColor.s=et.borderTileSaturation,e.grid.allTiles[t].currentColor.l=et.borderTileLightness)}function i(){var e,t,i;for(e=this,t=0,i=e.grid.originalBorderTiles.length;i>t;t+=1)e.grid.originalBorderTiles[t].isCornerTile&&(e.grid.originalTiles[t].currentColor.h=et.cornerTileHue,e.grid.originalTiles[t].currentColor.s=et.cornerTileSaturation,e.grid.originalTiles[t].currentColor.l=et.cornerTileLightness)}function n(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.grid.allTiles[t].element.setAttribute("opacity","0")}function r(){var e,t;e=this,e.contentAreaGuideLines=[],t=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[0]=t,t.setAttribute("x1",e.grid.contentAreaLeft),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaLeft),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2"),t=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[1]=t,t.setAttribute("x1",e.grid.contentAreaRight),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaRight),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2")}function o(){var e,t,i;for(e=this,e.tileParticleCenters=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileParticleCenters[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileParticleCenters[t]),e.tileParticleCenters[t].setAttribute("r","4"),e.tileParticleCenters[t].setAttribute("fill","gray")}function l(){var e,t,i;for(e=this,e.tileAnchorLines=[],e.tileAnchorCenters=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileAnchorLines[t]=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.tileAnchorLines[t]),e.tileAnchorLines[t].setAttribute("stroke","#666666"),e.tileAnchorLines[t].setAttribute("stroke-width","2"),e.tileAnchorCenters[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileAnchorCenters[t]),e.tileAnchorCenters[t].setAttribute("r","4"),e.tileAnchorCenters[t].setAttribute("fill","#888888")}function a(){var e,t,i;for(e=this,e.tileDisplacementCircles=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileDisplacementCircles[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileDisplacementCircles[t]),e.tileDisplacementCircles[t].setAttribute("r","80"),e.tileDisplacementCircles[t].setAttribute("opacity","0.4"),e.tileDisplacementCircles[t].setAttribute("fill","white")}function s(){var e,t,i;for(e=this,e.tileInnerRadii=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileInnerRadii[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileInnerRadii[t]),e.tileInnerRadii[t].setAttribute("stroke","blue"),e.tileInnerRadii[t].setAttribute("stroke-width","1"),e.tileInnerRadii[t].setAttribute("fill","transparent")}function c(){var e,t,i;for(e=this,e.tileOuterRadii=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileOuterRadii[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileOuterRadii[t]),e.tileOuterRadii[t].setAttribute("stroke","green"),e.tileOuterRadii[t].setAttribute("stroke-width","1"),e.tileOuterRadii[t].setAttribute("fill","transparent")}function d(){var e,t,i,n,r,o,l,a;for(e=this,e.neighborLines=[],t=0,n=e.grid.allTiles.length;n>t;t+=1)for(o=e.grid.allTiles[t],l=o.getNeighborStates(),e.neighborLines[t]=[],i=0,r=l.length;r>i;i+=1)a=l[i],a&&(e.neighborLines[t][i]=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.neighborLines[t][i]),e.neighborLines[t][i].setAttribute("stroke","purple"),e.neighborLines[t][i].setAttribute("stroke-width","1"))}function u(){var e,t,i;for(e=this,e.forceLines=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.forceLines[t]=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.forceLines[t]),e.forceLines[t].setAttribute("stroke","orange"),e.forceLines[t].setAttribute("stroke-width","2")}function g(){var e,t,i;for(e=this,e.velocityLines=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.velocityLines[t]=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.velocityLines[t]),e.velocityLines[t].setAttribute("stroke","red"),e.velocityLines[t].setAttribute("stroke-width","2")}function h(){var e,t,i;for(e=this,e.indexTexts=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.indexTexts[t]=document.createElementNS(window.hg.util.svgNamespace,"text"),e.indexTexts[t].innerHTML=isNaN(e.grid.allTiles[t].originalIndex)?"?":e.grid.allTiles[t].originalIndex,e.grid.svg.appendChild(e.indexTexts[t]),e.indexTexts[t].setAttribute("font-size","16"),e.indexTexts[t].setAttribute("fill","black"),e.indexTexts[t].setAttribute("pointer-events","none")}function p(){var e,t,i,n,r,o,l;for(e=this,t=0,i=e.grid.sectors.length;i>t;t+=1)for(o=e.grid.sectors[t],l=60*t+20,n=0,r=o.tiles.length;r>n;n+=1)o.tiles[n].currentColor.h=l,o.tiles[n].currentColor.s=window.hg.Grid.config.tileSaturation,o.tiles[n].currentColor.l=window.hg.Grid.config.tileLightness}function f(){var e;e=this,e.currentGridCenterDot=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.currentGridCenterDot),e.currentGridCenterDot.setAttribute("r","8"),e.currentGridCenterDot.setAttribute("fill","chartreuse"),e.panCenterDot=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.panCenterDot),e.panCenterDot.setAttribute("r","5"),e.panCenterDot.setAttribute("fill","red"),e.originalGridCenterDot=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.originalGridCenterDot),e.originalGridCenterDot.setAttribute("r","2"),e.originalGridCenterDot.setAttribute("fill","yellow")}function m(){var e,t;for(e=this,e.sectorAnchorLines=[],e.sectorAnchorCenters=[],t=0;t<e.grid.sectors.length;t+=1)e.sectorAnchorLines[t]=document.createElementNS(window.hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.sectorAnchorLines[t]),e.sectorAnchorLines[t].setAttribute("stroke","#999999"),e.sectorAnchorLines[t].setAttribute("stroke-width","2"),e.sectorAnchorCenters[t]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.sectorAnchorCenters[t]),e.sectorAnchorCenters[t].setAttribute("r","5"),e.sectorAnchorCenters[t].setAttribute("fill","#BBBBBB")}function b(){var e,t,i;for(e=this,t=0,i=e.grid.originalTiles.length;i>t;t+=1)e.grid.originalTiles[t].element.setAttribute("opacity","1")}function w(){var e,t,i;for(e=this,t=0,i=e.contentAreaGuideLines.length;i>t;t+=1)e.grid.svg.removeChild(e.contentAreaGuideLines[t]);e.contentAreaGuideLines=[]}function v(){var e,t,i;for(e=this,t=0,i=e.tileParticleCenters.length;i>t;t+=1)e.grid.svg.removeChild(e.tileParticleCenters[t]);e.tileParticleCenters=[]}function C(){var e,t,i;for(e=this,t=0,i=e.tileAnchorLines.length;i>t;t+=1)e.grid.svg.removeChild(e.tileAnchorLines[t]),e.grid.svg.removeChild(e.tileAnchorCenters[t]);e.tileAnchorLines=[],e.tileAnchorCenters=[]}function y(){var e,t,i;for(e=this,t=0,i=e.tileDisplacementCircles.length;i>t;t+=1)e.grid.svg.removeChild(e.tileDisplacementCircles[t]);e.tileDisplacementCircles=[]}function T(){var e,t,i;for(e=this,t=0,i=e.tileInnerRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileInnerRadii[t]);e.tileInnerRadii=[]}function x(){var e,t,i;for(e=this,t=0,i=e.tileOuterRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileOuterRadii[t]);e.tileOuterRadii=[]}function A(){var e,t,i,n,r;for(e=this,t=0,n=e.neighborLines.length;n>t;t+=1)for(i=0,r=e.neighborLines[t].length;r>i;i+=1)e.neighborLines[t][i]&&e.grid.svg.removeChild(e.neighborLines[t][i]);e.neighborLines=[]}function N(){var e,t,i;for(e=this,t=0,i=e.forceLines.length;i>t;t+=1)e.grid.svg.removeChild(e.forceLines[t]);e.forceLines=[]}function R(){var e,t,i;for(e=this,t=0,i=e.velocityLines.length;i>t;t+=1)e.grid.svg.removeChild(e.velocityLines[t]);e.velocityLines=[]}function S(){var e,t,i;for(e=this,t=0,i=e.indexTexts.length;i>t;t+=1)e.grid.svg.removeChild(e.indexTexts[t]);e.indexTexts=[]}function L(){var e,t,i;for(e=this,t=0,i=e.lineAnimationGapDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationGapDots[t]);e.lineAnimationGapDots=[]}function D(){var e,t,i;for(e=this,t=0,i=e.lineAnimationSelfCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationSelfCornerDots[t]);for(t=0,i=e.lineAnimationLowerNeighborCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationLowerNeighborCornerDots[t]);for(t=0,i=e.lineAnimationUpperNeighborCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationUpperNeighborCornerDots[t]);e.lineAnimationSelfCornerDots=[],e.lineAnimationLowerNeighborCornerDots=[],e.lineAnimationUpperNeighborCornerDots=[]}function I(){var e;e=this,e.originalGridCenterDot&&(e.grid.svg.removeChild(e.originalGridCenterDot),e.grid.svg.removeChild(e.currentGridCenterDot),e.grid.svg.removeChild(e.panCenterDot),e.originalGridCenterDot=null,e.currentGridCenterDot=null,e.panCenterDot=null)}function P(){var e,t;for(e=this,t=0;t<e.sectorAnchorLines.length;t+=1)e.grid.svg.removeChild(e.sectorAnchorLines[t]),e.grid.svg.removeChild(e.sectorAnchorCenters[t]);e.sectorAnchorLines=[],e.sectorAnchorCenters=[]}function E(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileParticleCenters[t].setAttribute("cx",e.grid.allTiles[t].particle.px),e.tileParticleCenters[t].setAttribute("cy",e.grid.allTiles[t].particle.py)}function O(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileAnchorLines[t].setAttribute("x1",e.grid.allTiles[t].particle.px),e.tileAnchorLines[t].setAttribute("y1",e.grid.allTiles[t].particle.py),e.tileAnchorLines[t].setAttribute("x2",e.grid.allTiles[t].currentAnchor.x),e.tileAnchorLines[t].setAttribute("y2",e.grid.allTiles[t].currentAnchor.y),e.tileAnchorCenters[t].setAttribute("cx",e.grid.allTiles[t].currentAnchor.x),e.tileAnchorCenters[t].setAttribute("cy",e.grid.allTiles[t].currentAnchor.y)}function J(){var e,t,i,n,r,o,l,a;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)n=e.grid.allTiles[t].particle.px-e.grid.allTiles[t].originalAnchor.x,r=e.grid.allTiles[t].particle.py-e.grid.allTiles[t].originalAnchor.y,o=180*Math.atan2(n,r)/Math.PI,l=Math.sqrt(n*n+r*r),a="hsl("+o+","+l/window.hg.DisplacementWaveJob.config.displacementAmplitude*100+"%,80%)",e.tileDisplacementCircles[t].setAttribute("fill",a),e.tileDisplacementCircles[t].setAttribute("cx",e.grid.allTiles[t].particle.px),e.tileDisplacementCircles[t].setAttribute("cy",e.grid.allTiles[t].particle.py)}function B(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileInnerRadii[t].setAttribute("cx",e.grid.allTiles[t].particle.px),e.tileInnerRadii[t].setAttribute("cy",e.grid.allTiles[t].particle.py),e.tileInnerRadii[t].setAttribute("r",e.grid.allTiles[t].outerRadius*window.hg.Grid.config.sqrtThreeOverTwo)}function H(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.tileOuterRadii[t].setAttribute("cx",e.grid.allTiles[t].particle.px),e.tileOuterRadii[t].setAttribute("cy",e.grid.allTiles[t].particle.py),e.tileOuterRadii[t].setAttribute("r",e.grid.allTiles[t].outerRadius)}function G(){var e,t,i,n,r,o,l,a;for(e=this,t=0,n=e.grid.allTiles.length;n>t;t+=1)for(o=e.grid.allTiles[t],l=o.getNeighborStates(),i=0,r=l.length;r>i;i+=1)a=l[i],a&&(e.neighborLines[t][i].setAttribute("x1",o.particle.px),e.neighborLines[t][i].setAttribute("y1",o.particle.py),e.neighborLines[t][i].setAttribute("x2",a.tile.particle.px),e.neighborLines[t][i].setAttribute("y2",a.tile.particle.py))}function W(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.forceLines[t].setAttribute("x1",e.grid.allTiles[t].particle.px),e.forceLines[t].setAttribute("y1",e.grid.allTiles[t].particle.py),e.forceLines[t].setAttribute("x2",e.grid.allTiles[t].particle.px+e.grid.allTiles[t].particle.fx*et.forceLineLengthMultiplier),e.forceLines[t].setAttribute("y2",e.grid.allTiles[t].particle.py+e.grid.allTiles[t].particle.fy*et.forceLineLengthMultiplier)}function F(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.velocityLines[t].setAttribute("x1",e.grid.allTiles[t].particle.px),e.velocityLines[t].setAttribute("y1",e.grid.allTiles[t].particle.py),e.velocityLines[t].setAttribute("x2",e.grid.allTiles[t].particle.px+e.grid.allTiles[t].particle.vx*et.velocityLineLengthMultiplier),e.velocityLines[t].setAttribute("y2",e.grid.allTiles[t].particle.py+e.grid.allTiles[t].particle.vy*et.velocityLineLengthMultiplier)}function M(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.indexTexts[t].setAttribute("x",e.grid.allTiles[t].particle.px-10),e.indexTexts[t].setAttribute("y",e.grid.allTiles[t].particle.py+6)}function j(){var e,t,i,n,r,o,l;for(e=this,L.call(e),e.lineAnimationGapDots=[],o=0,t=0,i=window.hg.controller.transientJobs.line.jobs[e.grid.index].length;i>t;t+=1)for(l=window.hg.controller.transientJobs.line.jobs[e.grid.index][t],n=0,r=l.gapPoints.length;r>n;n+=1,o+=1)e.lineAnimationGapDots[o]=document.createElementNS(window.hg.util.svgNamespace,"circle"),e.lineAnimationGapDots[o].setAttribute("cx",l.gapPoints[n].x),e.lineAnimationGapDots[o].setAttribute("cy",l.gapPoints[n].y),e.lineAnimationGapDots[o].setAttribute("r","4"),e.lineAnimationGapDots[o].setAttribute("fill","white"),e.grid.svg.appendChild(e.lineAnimationGapDots[o])}function k(){function e(e,t){return{x:e.vertices[2*t],y:e.vertices[2*t+1]}}var t,i,n,r,o,l,a,s;for(t=this,D.call(t),t.lineAnimationSelfCornerDots=[],t.lineAnimationLowerNeighborCornerDots=[],t.lineAnimationUpperNeighborCornerDots=[],i=0,n=window.hg.controller.transientJobs.line.jobs[t.grid.index].length;n>i;i+=1)for(l=window.hg.controller.transientJobs.line.jobs[t.grid.index][i],r=0,o=l.corners.length;o>r;r+=1)a=e(l.tiles[r],l.corners[r]),s=document.createElementNS(window.hg.util.svgNamespace,"circle"),s.setAttribute("cx",a.x),s.setAttribute("cy",a.y),s.setAttribute("r","3"),s.setAttribute("fill","#ffaaaa"),t.grid.svg.appendChild(s),t.lineAnimationSelfCornerDots.push(s),l.lowerNeighbors[r]&&(a=e(l.lowerNeighbors[r].tile,l.lowerNeighborCorners[r]),s=document.createElementNS(window.hg.util.svgNamespace,"circle"),s.setAttribute("cx",a.x),s.setAttribute("cy",a.y),s.setAttribute("r","3"),s.setAttribute("fill","#aaffaa"),t.grid.svg.appendChild(s),t.lineAnimationLowerNeighborCornerDots.push(s)),l.upperNeighbors[r]&&(a=e(l.upperNeighbors[r].tile,l.upperNeighborCorners[r]),s=document.createElementNS(window.hg.util.svgNamespace,"circle"),s.setAttribute("cx",a.x),s.setAttribute("cy",a.y),s.setAttribute("r","3"),s.setAttribute("fill","#aaaaff"),t.grid.svg.appendChild(s),t.lineAnimationUpperNeighborCornerDots.push(s))}function _(){var e,t;e=this,e.originalGridCenterDot&&(e.originalGridCenterDot.setAttribute("cx",e.grid.originalCenter.x),e.originalGridCenterDot.setAttribute("cy",e.grid.originalCenter.y),e.currentGridCenterDot.setAttribute("cx",e.grid.currentCenter.x),e.currentGridCenterDot.setAttribute("cy",e.grid.currentCenter.y),e.panCenterDot.setAttribute("cx",e.grid.panCenter.x),e.panCenterDot.setAttribute("cy",e.grid.panCenter.y),t=window.hg.controller.transientJobs.pan.jobs[e.grid.index][0],t&&(t.baseTile.currentColor.h=0,t.baseTile.currentColor.s=0,t.baseTile.currentColor.l=90))}function X(){var e,t;for(e=this,t=0;t<e.sectorAnchorLines.length;t+=1)e.sectorAnchorLines[t].setAttribute("x1",e.grid.sectors[t].originalAnchor.x),e.sectorAnchorLines[t].setAttribute("y1",e.grid.sectors[t].originalAnchor.y),e.sectorAnchorLines[t].setAttribute("x2",e.grid.sectors[t].currentAnchor.x),e.sectorAnchorLines[t].setAttribute("y2",e.grid.sectors[t].currentAnchor.y),e.sectorAnchorCenters[t].setAttribute("cx",e.grid.sectors[t].currentAnchor.x),e.sectorAnchorCenters[t].setAttribute("cy",e.grid.sectors[t].currentAnchor.y);e.sectorAnchorLines=[],e.sectorAnchorCenters=[]}function U(e,t){var i;i=this,i.annotations[e].enabled=t,t?i.annotations[e].create.call(i):i.annotations[e].destroy.call(i)}function V(){var e,t,i;for(e=this,t=0,i=et.annotationsArray.length;i>t;t+=1)et.annotationsArray[t].enabled&&et.annotationsArray[t].create.call(e)}function Y(){var e,t,i;for(e=this,t=0,i=et.annotationsArray.length;i>t;t+=1)et.annotationsArray[t].destroy.call(e)}function q(){var e;e=this,e.annotations.tileNeighborConnections.enabled&&(A.call(e),d.call(e))}function z(){var e=this;e.isComplete=!1}function Q(){var e,t,i;for(e=this,t=0,i=et.annotationsArray.length;i>t;t+=1)et.annotationsArray[t].enabled&&et.annotationsArray[t].update.call(e)}function K(){}function Z(){var e=this;e.isComplete=!0}function $(e){var t=this;t.grid=e,t.startTime=0,t.isComplete=!1,t.annotations=window.hg.util.shallowCopy(et.annotations),t.contentAreaGuideLines=[],t.tileParticleCenters=[],t.tileAnchorLines=[],t.tileAnchorCenters=[],t.tileDisplacementCircles=[],t.tileInnerRadii=[],t.tileOuterRadii=[],t.neighborLines=[],t.forceLines=[],t.velocityLines=[],t.indexTexts=[],t.lineAnimationGapDots=[],t.lineAnimationSelfCornerDots=[],t.lineAnimationLowerNeighborCornerDots=[],t.lineAnimationUpperNeighborCornerDots=[],t.sectorAnchorLines=[],t.sectorAnchorCenters=[],t.originalGridCenterDot=null,t.currentGridCenterDot=null,t.panCenterDot=null,t.toggleAnnotationEnabled=U,t.createAnnotations=V,t.destroyAnnotations=Y,t.setExpandedAnnotations=q,t.start=z,t.update=Q,t.draw=K,t.cancel=Z}var et={};et.forceLineLengthMultiplier=4e3,et.velocityLineLengthMultiplier=300,et.contentTileHue=187,et.contentTileSaturation=50,et.contentTileLightness=30,et.borderTileHue=267,et.borderTileSaturation=0,et.borderTileLightness=30,et.cornerTileHue=267,et.cornerTileSaturation=50,et.cornerTileLightness=30,et.annotations={sectorColors:{enabled:!0,create:p,destroy:function(){},update:p,priority:0},contentTiles:{enabled:!0,create:e,destroy:function(){},update:e,priority:100},borderTiles:{enabled:!0,create:t,destroy:function(){},update:t,priority:200},cornerTiles:{enabled:!1,create:i,destroy:function(){},update:i,priority:300},transparentTiles:{enabled:!1,create:n,destroy:b,update:function(){},priority:400},tileAnchorCenters:{enabled:!0,create:l,destroy:C,update:O,priority:500},tileParticleCenters:{enabled:!1,create:o,destroy:v,update:E,priority:600},tileDisplacementColors:{enabled:!1,create:a,destroy:y,update:J,priority:700},tileInnerRadii:{enabled:!1,create:s,destroy:T,update:B,priority:800},tileOuterRadii:{enabled:!1,create:c,destroy:x,update:H,priority:900},tileIndices:{enabled:!0,create:h,destroy:S,update:M,priority:1e3},tileForces:{enabled:!0,create:u,destroy:N,update:W,priority:1100},tileVelocities:{enabled:!0,create:g,destroy:R,update:F,priority:1200},tileNeighborConnections:{enabled:!0,create:d,destroy:A,update:G,priority:1300},contentAreaGuidelines:{enabled:!1,create:r,destroy:w,update:function(){},priority:1400},lineAnimationGapPoints:{enabled:!1,create:function(){},destroy:L,update:j,priority:1500},lineAnimationCornerData:{enabled:!1,create:function(){},destroy:D,update:k,priority:1600},panCenterPoints:{enabled:!0,create:f,destroy:I,update:_,priority:1700},sectorAnchorCenters:{enabled:!0,create:m,destroy:P,update:X,priority:1800}},et.annotationsArray=[],et.computeDependentValues=function(){et.annotationsArray=Object.keys(et.annotations).map(function(e){return et.annotations[e]
}),et.annotationsArray.sort(function(e,t){return e.priority-t.priority})},et.computeDependentValues(),$.config=et,window.hg=window.hg||{},window.hg.Annotations=$,console.log("Annotations module loaded")}(),function(){function e(){var e,t,i,n,r,o,l,a,s;for(e=this,t=.5*e.parent.clientWidth,i=e.parent.clientHeight,e.originalCenter.x=t,e.originalCenter.y=.5*i,e.currentCenter.x=e.originalCenter.x,e.currentCenter.y=e.originalCenter.y,e.panCenter.x=e.originalCenter.x,e.panCenter.y=e.originalCenter.y,e.actualContentAreaWidth=e.parent.clientWidth<y.targetContentAreaWidth?e.parent.clientWidth:y.targetContentAreaWidth,e.isVertical?(e.rowDeltaY=1.5*y.tileOuterRadius+y.tileGap*y.sqrtThreeOverTwo,e.tileDeltaX=y.tileShortLengthWithGap,e.oddRowTileCount=2*Math.ceil((t-(y.tileInnerRadius+y.tileGap))/y.tileShortLengthWithGap)+1,e.evenRowTileCount=2*Math.ceil((t-(y.tileShortLengthWithGap+.5*y.tileGap))/y.tileShortLengthWithGap)+2,e.oddRowXOffset=t-y.tileShortLengthWithGap*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(y.firstRowYOffset+2*y.tileOuterRadius+y.tileGap*Math.sqrt(3)))/e.rowDeltaY)+2):(e.rowDeltaY=y.tileInnerRadius+.5*y.tileGap,e.tileDeltaX=3*y.tileOuterRadius+y.tileGap*Math.sqrt(3),e.oddRowTileCount=2*Math.ceil((t-(e.tileDeltaX-y.tileOuterRadius))/e.tileDeltaX)+1,e.evenRowTileCount=2*Math.ceil((t-(e.tileDeltaX+y.tileGap*y.sqrtThreeOverTwo+.5*y.tileOuterRadius))/e.tileDeltaX)+2,e.oddRowXOffset=t-e.tileDeltaX*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(y.firstRowYOffset+3*y.tileInnerRadius+2*y.tileGap))/e.rowDeltaY)+4),e.evenRowXOffset=e.oddRowXOffset+(e.evenRowTileCount>e.oddRowTileCount?-1:1)*e.tileDeltaX*.5,e.contentAreaLeft=t-.5*e.actualContentAreaWidth,e.contentAreaRight=e.contentAreaLeft+e.actualContentAreaWidth,e.isVertical?(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-y.tileInnerRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-y.tileInnerRadius))/e.tileDeltaX)):(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-y.tileOuterRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-y.tileOuterRadius))/e.tileDeltaX)),e.oddRowContentTileCount=e.oddRowTileCount-2*e.oddRowContentStartIndex,e.evenRowContentTileCount=e.evenRowTileCount-2*e.evenRowContentStartIndex,e.oddRowContentEndIndex=e.oddRowContentStartIndex+e.oddRowContentTileCount-1,e.evenRowContentEndIndex=e.evenRowContentStartIndex+e.evenRowContentTileCount-1,e.actualContentInnerIndices=[],a=Math.ceil(y.contentStartingRowIndex/2)*e.oddRowContentTileCount+Math.floor(y.contentStartingRowIndex/2)*e.evenRowContentTileCount,o=0,l=e.originalContentInnerIndices.length;l>o;o+=1)e.actualContentInnerIndices[o]=e.originalContentInnerIndices[o]+a;for(e.innerIndexOfLastContentTile=e.actualContentInnerIndices[e.actualContentInnerIndices.length-1],s=a+e.innerIndexOfLastContentTile+1,n=0,r=0;s>n;)n+=r%2===0?e.oddRowContentTileCount:e.evenRowContentTileCount,r+=1;r>e.rowCount?(e.rowCount=r,e.height=(e.rowCount-2)*e.rowDeltaY):e.height=i}function t(){var e,t,i,n,r;for(e=this,r=[],n=e.postData.length,t=0;n>t;t+=1)r[t]=1;for(n=1/y.contentDensity*e.postData.length,t=e.postData.length;n>t;t+=1)r[t]=0;for(r=window.hg.util.shuffle(r),e.originalContentInnerIndices=[],t=0,i=0,n=r.length;n>t;t+=1)r[t]&&(e.originalContentInnerIndices[i++]=t)}function i(){var e;e=this,e.svg=document.createElementNS(window.hg.util.svgNamespace,"svg"),e.parent.appendChild(e.svg),e.svg.style.display="block",e.svg.style.position="relative",e.svg.style.width="100%",e.svg.style.zIndex="2147483647",e.svg.classList.add("hg-svg"),u.call(e),e.svgDefs=document.createElementNS(window.hg.util.svgNamespace,"defs"),e.svg.appendChild(e.svgDefs)}function n(){var e,t,i,n,a,s,c,d,u,g,h,p,f,m,b,w,C,T;for(e=this,e.originalTiles=[],e.originalBorderTiles=[],t=0,f=0,m=0,d=y.firstRowYOffset,n=e.rowCount,w=[],b=l.call(e),C=e.oddRowTileCount>e.evenRowTileCount,i=0;n>i;i+=1,d+=e.rowDeltaY)for(p=i%2===0,T=C&&p||!C&&!p,p?(c=e.oddRowXOffset,s=e.oddRowTileCount):(c=e.evenRowXOffset,s=e.evenRowTileCount),a=0;s>a;t+=1,a+=1,c+=e.tileDeltaX)u=p?a<e.oddRowContentStartIndex||a>e.oddRowContentEndIndex:a<e.evenRowContentStartIndex||a>e.evenRowContentEndIndex,g=e.isVertical?0===a||a===s-1||0===i||i===n-1:1>=i||i>=n-2||T&&(0===a||a===s-1),h=g&&(e.isVertical?!(0!==a&&a!==s-1||0!==i&&i!==n-1):(1>=i||i>=n-2)&&T&&(0===a||a===s-1)),e.originalTiles[t]=new window.hg.Tile(e.svg,e,c,d,y.tileOuterRadius,e.isVertical,y.tileHue,y.tileSaturation,y.tileLightness,null,t,i,a,u,g,h,T,y.tileMass),g&&e.originalBorderTiles.push(e.originalTiles[t]),u||(f===e.actualContentInnerIndices[m]&&(e.originalTiles[t].setContent(e.postData[m]),e.contentTiles[m]=e.originalTiles[t],m+=1),f+=1),w[t]=o.call(e,i,n,a,s,T,b);r.call(e,w),v.call(e,e.originalTiles)}function r(e){var t,i,n,r,o,l;for(t=this,l=[],i=0,r=t.originalTiles.length;r>i;i+=1){for(n=0,o=6;o>n;n+=1)l[n]=isNaN(e[i][n])?null:t.originalTiles[i+e[i][n]];t.originalTiles[i].setNeighborTiles(l)}}function o(e,t,i,n,r,o){var l,a;return l=this,a=o.slice(0),l.isVertical?(r?(0===i&&(a[3]=Number.NaN,a[4]=Number.NaN,a[5]=Number.NaN),i===n-1&&(a[0]=Number.NaN,a[1]=Number.NaN,a[2]=Number.NaN)):(0===i&&(a[4]=Number.NaN),i===n-1&&(a[1]=Number.NaN)),0===e&&(a[0]=Number.NaN,a[5]=Number.NaN),e===t-1&&(a[2]=Number.NaN,a[3]=Number.NaN)):(r&&(0===i&&(a[4]=Number.NaN,a[5]=Number.NaN),i===n-1&&(a[1]=Number.NaN,a[2]=Number.NaN)),0===e?(a[0]=Number.NaN,a[1]=Number.NaN,a[5]=Number.NaN):1===e&&(a[0]=Number.NaN),e===t-1?(a[2]=Number.NaN,a[3]=Number.NaN,a[4]=Number.NaN):e===t-2&&(a[3]=Number.NaN)),a}function l(){var e,t,i;return e=this,i=[],t=e.oddRowTileCount>e.evenRowTileCount?e.oddRowTileCount:e.evenRowTileCount,e.isVertical?(i[0]=-t+1,i[1]=1,i[2]=t,i[3]=t-1,i[4]=-1,i[5]=-t):(i[0]=2*-t+1,i[1]=-t+1,i[2]=t,i[3]=2*t-1,i[4]=t-1,i[5]=-t),i}function a(){var e,t;for(e=this,t=e.svg,e.annotations.destroyAnnotations();t.firstChild;)t.removeChild(t.firstChild);e.svg.appendChild(e.svgDefs)}function s(){var e,t,i;for(e=this,t=0,i=e.allTiles.length;i>t;t+=1)e.allTiles[t].element.setAttribute("hg-index",t)}function c(){var e=this;console.log("// --- Grid Info: ------- //"),console.log("// - Tile count="+e.originalTiles.length),console.log("// - Row count="+e.rowCount),console.log("// - Odd row tile count="+e.oddRowTileCount),console.log("// - Even row tile count="+e.evenRowTileCount),console.log("// ------------------------- //")}function d(){var t;t=this,a.call(t),e.call(t),t.svg.style.height=t.height+"px",n.call(t),c.call(t)}function u(){var e;e=this,e.svg.style.backgroundColor="hsl("+y.backgroundHue+","+y.backgroundSaturation+"%,"+y.backgroundLightness+"%)"}function g(){var e,t,i;for(e=this,t=0,i=e.allTiles.length;i>t;t+=1)e.allTiles[t].setColor(y.tileHue,y.tileSaturation,y.tileLightness)}function h(e){var t,i,n;for(t=this,i=0,n=t.allTiles.length;n>i;i+=1)t.allTiles[i].particle.m=e}function p(){var e=this;e.isComplete=!1}function f(e,t){var i,n,r;for(i=this,n=0,r=i.allTiles.length;r>n;n+=1)i.allTiles[n].update(e,t)}function m(){var e,t,i;for(e=this,t=0,i=e.allTiles.length;i>t;t+=1)e.allTiles[t].draw()}function b(){var e=this;e.isComplete=!0}function w(e){var t=this;t.hoveredTile&&t.hoveredTile.setIsHighlighted(!1),e&&e.setIsHighlighted(!0),t.hoveredTile=e}function v(e){var t=this;t.allTiles=e,t.annotations.destroyAnnotations(),t.annotations.createAnnotations(),s.call(t)}function C(e,n,r,o){var l=this;l.index=e,l.parent=n,l.postData=r,l.isVertical=o,l.actualContentAreaWidth=y.targetContentAreaWidth,l.isComplete=!1,l.svg=null,l.svgDefs=null,l.originalTiles=[],l.originalBorderTiles=[],l.contentTiles=[],l.originalContentInnerIndices=null,l.innerIndexOfLastContentTile=null,l.originalCenter={x:Number.NaN,y:Number.NaN},l.currentCenter={x:Number.NaN,y:Number.NaN},l.panCenter={x:Number.NaN,y:Number.NaN},l.isPostOpen=!1,l.isTransitioning=!1,l.expandedTile=null,l.sectors=[],l.allTiles=null,l.annotations=new window.hg.Annotations(l),l.actualContentAreaWidth=null,l.rowDeltaY=null,l.tileDeltaX=null,l.oddRowTileCount=null,l.evenRowTileCount=null,l.oddRowXOffset=null,l.rowCount=null,l.evenRowXOffset=null,l.contentAreaLeft=null,l.contentAreaRight=null,l.oddRowContentStartIndex=null,l.evenRowContentStartIndex=null,l.oddRowContentTileCount=null,l.evenRowContentTileCount=null,l.oddRowContentEndIndex=null,l.evenRowContentEndIndex=null,l.actualContentInnerIndices=null,l.innerIndexOfLastContentTile=null,l.rowCount=null,l.height=null,l.resize=d,l.start=p,l.update=f,l.draw=m,l.cancel=b,l.updateBackgroundColor=u,l.updateTileColor=g,l.updateTileMass=h,l.computeContentIndices=t,l.setHoveredTile=w,l.updateAllTilesCollection=v,i.call(l),t.call(l),d.call(l)}var y={};y.targetContentAreaWidth=800,y.backgroundHue=230,y.backgroundSaturation=2,y.backgroundLightness=8,y.tileHue=230,y.tileSaturation=50,y.tileLightness=30,y.tileOuterRadius=80,y.tileGap=12,y.contentStartingRowIndex=2,y.firstRowYOffset=y.tileOuterRadius*-.8,y.contentDensity=.6,y.tileMass=1,y.computeDependentValues=function(){y.sqrtThreeOverTwo=Math.sqrt(3)/2,y.twoOverSqrtThree=2/Math.sqrt(3),y.tileInnerRadius=y.tileOuterRadius*y.sqrtThreeOverTwo,y.tileShortLengthWithGap=2*y.tileInnerRadius+y.tileGap,y.tileLongLengthWithGap=2*y.tileOuterRadius+y.tileGap*y.twoOverSqrtThree},y.computeDependentValues(),C.config=y,window.hg=window.hg||{},window.hg.Grid=C,console.log("Grid module loaded")}(),function(){function e(){function e(e){var t;(t=l(e))&&(t.element.classList.contains("hg-post-tile"),a.grid.setHoveredTile(t))}function i(e){var t;e.relatedTarget&&"HTML"!==e.relatedTarget.nodeName?(t=l(e))&&(t.element.classList.contains("hg-post-tile"),a.grid.setHoveredTile(null),window.hg.controller.transientJobs.highlightHover.create(a.grid,t),e.stopPropagation()):(console.log("The mouse left the viewport"),a.grid.setHoveredTile(null))}function n(e){e.target.classList.contains("hg-post-tile")||e.target.classList.contains("hg-tile")}function r(e){e.target.classList.contains("hg-post-tile")}function o(e){var i;(i=l(e))&&(i.element.classList.contains("hg-post-tile"),t(a.grid,i))}function l(e){var t;return e.target.classList.contains("hg-tile")?(t=e.target.getAttribute("hg-index"),a.grid.allTiles[t]):null}var a;a=this,document.addEventListener("mouseover",e,!1),document.addEventListener("mouseout",i,!1),document.addEventListener("mousemove",n,!1),document.addEventListener("mousedown",r,!1),document.addEventListener("mouseup",o,!1)}function t(e,t){t.holdsContent?(n.possibleClickAnimations[n.contentTileClickAnimation](e,t),window.hg.controller.transientJobs.openPost.create(e,t)):n.possibleClickAnimations[n.emptyTileClickAnimation](e,t)}function i(t){var i=this;i.grid=t,e.call(i)}var n={};n.contentTileClickAnimation="Radiate Highlight",n.emptyTileClickAnimation="Radiate Lines",n.possibleClickAnimations={"Radiate Highlight":window.hg.controller.transientJobs.highlightRadiate.create,"Radiate Lines":window.hg.controller.transientJobs.linesRadiate.create,"Random Line":window.hg.controller.transientJobs.line.create,None:function(){}},i.config=n,window.hg=window.hg||{},window.hg.Input=i,console.log("Input module loaded")}(),function(){function e(){var e,t,i,n;e=this,e.majorNeighborIndex=e.index,e.minorNeighborIndex=(e.index+1)%6,e.majorNeighborDelta.x=e.baseTile.neighborStates[e.majorNeighborIndex].tile.originalAnchor.x-e.baseTile.originalAnchor.x,e.majorNeighborDelta.y=e.baseTile.neighborStates[e.majorNeighborIndex].tile.originalAnchor.y-e.baseTile.originalAnchor.y,e.minorNeighborDelta.x=e.baseTile.neighborStates[e.minorNeighborIndex].tile.originalAnchor.x-e.baseTile.originalAnchor.x,e.minorNeighborDelta.y=e.baseTile.neighborStates[e.minorNeighborIndex].tile.originalAnchor.y-e.baseTile.originalAnchor.y,t=(e.index+5)%6,i=e.baseTile.neighborStates[t].tile.originalAnchor.x-e.baseTile.originalAnchor.x,n=e.baseTile.neighborStates[t].tile.originalAnchor.y-e.baseTile.originalAnchor.y,e.expandedDisplacement.x=e.expandedDisplacementTileCount*i,e.expandedDisplacement.y=e.expandedDisplacementTileCount*n,e.originalAnchor.x=e.baseTile.originalAnchor.x+e.majorNeighborDelta.x,e.originalAnchor.y=e.baseTile.originalAnchor.y+e.majorNeighborDelta.y,e.currentAnchor.x=e.originalAnchor.x,e.currentAnchor.y=e.originalAnchor.y}function t(){var e;e=this,e.tilesByIndex=[],e.newTiles=[],e.tiles=[],i.call(e),n.call(e),l.call(e),a.call(e)}function i(){function e(){var e,t,n,o;n=0,e=i.baseTile.neighborStates[i.majorNeighborIndex].tile;do{t=e,o=0,i.tilesByIndex[n]=i.tilesByIndex[n]||[];do i.tilesByIndex[n][o]||r.call(i,t,n,o),o++;while(t.neighborStates[i.minorNeighborIndex]&&(t=t.neighborStates[i.minorNeighborIndex].tile));n++}while(e.neighborStates[i.majorNeighborIndex]&&(e=e.neighborStates[i.majorNeighborIndex].tile))}function t(){var e,t,n,o;o=0,e=i.baseTile.neighborStates[i.majorNeighborIndex].tile;do{t=e,n=0;do i.tilesByIndex[n]=i.tilesByIndex[n]||[],i.tilesByIndex[n][o]||r.call(i,t,n,o),n++;while(t.neighborStates[i.majorNeighborIndex]&&(t=t.neighborStates[i.majorNeighborIndex].tile));o++}while(e.neighborStates[i.minorNeighborIndex]&&(e=e.neighborStates[i.minorNeighborIndex].tile))}var i;i=this,e(),t()}function n(){function e(){var e,t,n,r,d,u;e=i.baseTile.originalAnchor.x+i.majorNeighborDelta.x,t=i.baseTile.originalAnchor.y+i.majorNeighborDelta.y,d=0,u=0,n=e,r=t;do{i.tilesByIndex[d]=i.tilesByIndex[d]||[];do i.tilesByIndex[d][u]||o.call(i,d,u,n,r),u++,n+=i.minorNeighborDelta.x,r+=i.minorNeighborDelta.y;while(n>=l&&a>=n&&r>=s&&c>=r);d++,u=0,n=e+d*i.majorNeighborDelta.x,r=t+d*i.majorNeighborDelta.y}while(n>=l&&a>=n&&r>=s&&c>=r)}function t(){var e,t,n,r,d,u;e=i.baseTile.originalAnchor.x+i.majorNeighborDelta.x,t=i.baseTile.originalAnchor.y+i.majorNeighborDelta.y,d=0,u=0,n=e,r=t;do{do i.tilesByIndex[d]=i.tilesByIndex[d]||[],i.tilesByIndex[d][u]||o.call(i,d,u,n,r),d++,n+=i.majorNeighborDelta.x,r+=i.majorNeighborDelta.y;while(n>=l&&a>=n&&r>=s&&c>=r);d=0,u++,n=e+u*i.minorNeighborDelta.x,r=t+u*i.minorNeighborDelta.y}while(n>=l&&a>=n&&r>=s&&c>=r)}var i,n,r,l,a,s,c;i=this,n=window.innerWidth/2-Math.abs(i.expandedDisplacement.x)+window.hg.Grid.config.tileShortLengthWithGap,r=window.innerHeight/2-Math.abs(i.expandedDisplacement.y)+window.hg.Grid.config.tileShortLengthWithGap,l=i.baseTile.originalAnchor.x-n,a=i.baseTile.originalAnchor.x+n,s=i.baseTile.originalAnchor.y-r,c=i.baseTile.originalAnchor.y+r,e(),t()}function r(e,t,i){var n=this;n.tilesByIndex[t][i]=e,window.hg.Tile.initializeTileExpandedState(e,n,t,i),e.sectorAnchorOffset.x=e.originalAnchor.x-n.originalAnchor.x,e.sectorAnchorOffset.y=e.originalAnchor.y-n.originalAnchor.y}function o(e,t,i,n){var o=this,l=new window.hg.Tile(o.grid.svg,o.grid,i,n,window.hg.Grid.config.tileOuterRadius,o.grid.isVertical,window.hg.Grid.config.tileHue,window.hg.Grid.config.tileSaturation,window.hg.Grid.config.tileLightness,null,Number.NaN,Number.NaN,Number.NaN,!0,!1,!1,!1,window.hg.Grid.config.tileMass);return r.call(o,l,e,t),o.newTiles[o.newTiles.length]=l,l}function l(){function e(e,t,i){var n,r,o,l;for(n=e.tilesByIndex[t][i],r=0;6>r;r+=1){switch(r){case e.index:o=t+1,l=i;break;case(e.index+1)%6:o=t,l=i+1;break;case(e.index+2)%6:o=t-1,l=i+1;break;case(e.index+3)%6:o=t-1,l=i;break;case(e.index+4)%6:o=t,l=i-1;break;case(e.index+5)%6:o=t+1,l=i-1;break;default:throw new Error("Invalid neighborRelationIndex: "+r)}e.tilesByIndex[o]&&e.tilesByIndex[o][l]?window.hg.Tile.setTileNeighborState(n,r,e.tilesByIndex[o][l]):n.expandedState.isBorderTile=!0}}var t,i,n;for(t=this,i=0;t.tilesByIndex[i];i+=1)for(n in t.tilesByIndex[i])e(t,i,n)}function a(){var e,t,i,n;e=this,t=0;for(i in e.tilesByIndex)for(n in e.tilesByIndex[i])e.tiles[t++]=e.tilesByIndex[i][n]}function s(e){var t,i,n,r,o,l,a,s,c,d;for(t=this,l=(t.index+2)%6,a=(t.index+3)%6,s=e[(t.index+1)%6],c=e[(t.index+5)%6],i=t.tilesByIndex[0],n=c.tilesByIndex,r=t.expandedDisplacementTileCount,d=0,i[r]&&(window.hg.Tile.setTileNeighborState(i[r],l,s.tilesByIndex[d][0]),i[r].expandedState.isBorderTile=!0),r+=1,o=i.length-1;o>r;r+=1)window.hg.Tile.setTileNeighborState(i[r],a,s.tilesByIndex[d][0]),d+=1,window.hg.Tile.setTileNeighborState(i[r],l,s.tilesByIndex[d][0]);for(i[r]&&(window.hg.Tile.setTileNeighborState(i[r],a,s.tilesByIndex[d][0]),d+=1,s.tilesByIndex[d]&&s.tilesByIndex[d][0]&&window.hg.Tile.setTileNeighborState(i[r],l,s.tilesByIndex[d][0]),i[r].expandedState.isBorderTile=!0),r=0,o=t.expandedDisplacementTileCount;o>r;r+=1)i[r].expandedState.isBorderTile=!0;for(r=i[0].length-1-t.expandedDisplacementTileCount,o=n.length;o>r;r+=1)n[r][0].expandedState.isBorderTile=!0;for(r=0,o=t.tilesByIndex.length;o>r;r+=1)t.tilesByIndex[r][t.tilesByIndex[r].length-1].expandedState.isBorderTile=!0}function c(){var e,t,i;for(e=this,t=0,i=e.newTiles.length;i>t;t+=1)e.newTiles[t].expandedState=null,e.newTiles[t].neighborStates=null}function d(e,t){var i,n,r;for(i=this,i.currentAnchor.x=e,i.currentAnchor.y=t,n=0,r=i.tiles.length;r>n;n+=1)i.tiles[n].originalAnchor.x=e+i.tiles[n].sectorAnchorOffset.x,i.tiles[n].originalAnchor.y=t+i.tiles[n].sectorAnchorOffset.y}function u(i,n,r,o){var l=this;l.grid=i,l.baseTile=n,l.index=r,l.expandedDisplacementTileCount=o,l.originalAnchor={x:Number.NaN,y:Number.NaN},l.currentAnchor={x:Number.NaN,y:Number.NaN},l.majorNeighborDelta={x:Number.NaN,y:Number.NaN},l.minorNeighborDelta={x:Number.NaN,y:Number.NaN},l.expandedDisplacement={x:Number.NaN,y:Number.NaN},l.tiles=null,l.tilesByIndex=null,l.newTiles=null,l.initializeExpandedStateExternalTileNeighbors=s,l.destroy=c,l.setSectorPosition=d,e.call(l),t.call(l)}var g={};g.computeDependentValues=function(){},g.computeDependentValues(),u.config=g,window.hg=window.hg||{},window.hg.Sector=u,console.log("Sector module loaded")}(),function(){function e(){var e,t;e=this,t=isNaN(e.originalIndex)?parseInt(1e6*Math.random()+1e3):e.originalIndex,e.vertexDeltas=l(e.outerRadius,e.isVertical),e.vertices=[],i.call(e,e.currentAnchor.x,e.currentAnchor.y),e.element=document.createElementNS(window.hg.util.svgNamespace,"polygon"),e.svg.appendChild(e.element),e.element.id="hg-"+t,e.element.classList.add("hg-tile"),e.element.style.cursor="pointer",g.call(e)}function t(e){var t;t=this,t.particle={},t.particle.px=t.currentAnchor.x,t.particle.py=t.currentAnchor.y,t.particle.vx=0,t.particle.vy=0,t.particle.fx=0,t.particle.fy=0,t.particle.m=e,t.particle.forceAccumulatorX=0,t.particle.forceAccumulatorY=0}function i(e,t){var i,n,r;for(i=this,n=0,r=0;6>n;n+=1)i.vertices[r]=e+i.vertexDeltas[r++],i.vertices[r]=t+i.vertexDeltas[r++]}function n(){var e;e=this}function r(){var e;e=this,e.tilePost=null}function o(){var e,t,i,n,r;for(i=Math.PI/3,n=-i,r=Math.PI/6-2*i,y.horizontalSines=[],y.horizontalCosines=[],e=0,t=n;6>e;e+=1,t+=i)y.horizontalSines[e]=Math.sin(t),y.horizontalCosines[e]=Math.cos(t);for(y.verticalSines=[],y.verticalCosines=[],e=0,t=r;6>e;e+=1,t+=i)y.verticalSines[e]=Math.sin(t),y.verticalCosines[e]=Math.cos(t)}function l(e,t){var i,n,r,o,l;for(t?(r=y.verticalSines,o=y.verticalCosines):(r=y.horizontalSines,o=y.horizontalCosines),i=0,n=0,l=[];6>i;i+=1)l[n++]=e*o[i],l[n++]=e*r[i];return l}function a(e){var t,i;t=this,i=t.holdsContent,t.postData=e,t.holdsContent=!!e,i?(r.call(t),n.call(t)):n.call(t)}function s(e){var t,i,n;for(t=this,i=0;6>i;i+=1)n=e[i],w(t,i,n)}function c(e,t,i){var n=this;n.isHighlighted&&(e+=window.hg.HighlightHoverJob.config.deltaHue,t+=window.hg.HighlightHoverJob.config.deltaSaturation,i+=window.hg.HighlightHoverJob.config.deltaLightness),n.originalColor.h=e,n.originalColor.s=t,n.originalColor.l=i,n.currentColor.h=e,n.currentColor.s=t,n.currentColor.l=i}function d(e){var t,i,n,r;t=this,e?t.isHighlighted?(i=t.originalColor.h,n=t.originalColor.s,r=t.originalColor.l):(i=t.originalColor.h+window.hg.HighlightHoverJob.config.deltaHue*window.hg.HighlightHoverJob.config.opacity,n=t.originalColor.s+window.hg.HighlightHoverJob.config.deltaSaturation*window.hg.HighlightHoverJob.config.opacity,r=t.originalColor.l+window.hg.HighlightHoverJob.config.deltaLightness*window.hg.HighlightHoverJob.config.opacity):t.isHighlighted?(i=t.originalColor.h-window.hg.HighlightHoverJob.config.deltaHue*window.hg.HighlightHoverJob.config.opacity,n=t.originalColor.s-window.hg.HighlightHoverJob.config.deltaSaturation*window.hg.HighlightHoverJob.config.opacity,r=t.originalColor.l-window.hg.HighlightHoverJob.config.deltaLightness*window.hg.HighlightHoverJob.config.opacity):(i=t.originalColor.h,n=t.originalColor.s,r=t.originalColor.l),t.originalColor.h=i,t.originalColor.s=n,t.originalColor.l=r,t.currentColor.h=i,t.currentColor.s=n,t.currentColor.l=r,t.isHighlighted=e}function u(e,t){var n,r,o,l,a,s,c,d,u,g,h,p,f,m,b;if(n=this,!n.particle.isFixed){for(n.grid.isPostOpen?(l=n.expandedState.neighborStates,a=n.expandedState.isBorderTile):(l=n.neighborStates,a=n.isBorderTile),n.particle.forceAccumulatorX+=-y.dragCoeff*n.particle.vx,n.particle.forceAccumulatorY+=-y.dragCoeff*n.particle.vy,r=0,o=l.length;o>r;r+=1)s=l[r],s&&(s.springForceX?(n.particle.forceAccumulatorX+=s.springForceX,n.particle.forceAccumulatorY+=s.springForceY,s.springForceX=0,s.springForceY=0):(c=s.tile.particle.px-n.particle.px,d=s.tile.particle.py-n.particle.py,u=s.tile.particle.vx-n.particle.vx,g=s.tile.particle.vy-n.particle.vy,h=c*u+d*g,p=Math.sqrt(c*c+d*d),f=(y.neighborSpringCoeff*(p-s.restLength)+y.neighborDampingCoeff*h/p)/p,m=c*f,b=d*f,n.particle.forceAccumulatorX+=m,n.particle.forceAccumulatorY+=b,s.neighborsRelationshipObj.springForceX=-m,s.neighborsRelationshipObj.springForceY=-b));c=n.currentAnchor.x-n.particle.px,d=n.currentAnchor.y-n.particle.py,p=Math.sqrt(c*c+d*d),p>0&&(u=-n.particle.vx,g=-n.particle.vy,h=c*u+d*g,f=a?(y.borderAnchorSpringCoeff*p+y.borderAnchorDampingCoeff*h/p)/p:(y.innerAnchorSpringCoeff*p+y.innerAnchorDampingCoeff*h/p)/p,m=c*f,b=d*f,n.particle.forceAccumulatorX+=m,n.particle.forceAccumulatorY+=b),n.particle.fx=n.particle.forceAccumulatorX/n.particle.m*t,n.particle.fy=n.particle.forceAccumulatorY/n.particle.m*t,n.particle.px+=n.particle.vx*t,n.particle.py+=n.particle.vy*t,n.particle.vx+=n.particle.fx,n.particle.vy+=n.particle.fy;{var w=n.particle;w.px,w.py,w.vx,w.vy,w.fx,w.fy,w.forceAccumulatorX,w.forceAccumulatorY}0===n.originalIndex,isNaN(n.particle.px)&&console.log("tile.particle.px="+n.particle.px),isNaN(n.particle.py)&&console.log("tile.particle.py="+n.particle.py),isNaN(n.particle.vx)&&console.log("tile.particle.vx="+n.particle.vx),isNaN(n.particle.vy)&&console.log("tile.particle.vy="+n.particle.vy),isNaN(n.particle.fx)&&console.log("tile.particle.fx="+n.particle.fx),isNaN(n.particle.fy)&&console.log("tile.particle.fy="+n.particle.fy),n.particle.fx=n.particle.fx<y.forceSuppressionLowerThreshold&&n.particle.fx>y.forceSuppressionThresholdNegative?0:n.particle.fx,n.particle.fy=n.particle.fy<y.forceSuppressionLowerThreshold&&n.particle.fy>y.forceSuppressionThresholdNegative?0:n.particle.fy,n.particle.vx=n.particle.vx<y.velocitySuppressionLowerThreshold&&n.particle.vx>y.velocitySuppressionThresholdNegative?0:n.particle.vx,n.particle.vy=n.particle.vy<y.velocitySuppressionLowerThreshold&&n.particle.vy>y.velocitySuppressionThresholdNegative?0:n.particle.vy,n.particle.forceAccumulatorX=0,n.particle.forceAccumulatorY=0,i.call(n,n.particle.px,n.particle.py)}}function g(){var e,t,i,n;for(e=this,t=0,i="";12>t;)i+=e.vertices[t++]+","+e.vertices[t++]+" ";e.element.setAttribute("points",i),n="hsl("+e.currentColor.h+","+e.currentColor.s+"%,"+e.currentColor.l+"%)",e.element.setAttribute("fill",n)}function h(e,t){var i;i=this,i.particle.forceAccumulatorX+=e,i.particle.forceAccumulatorY+=t}function p(e,t){var i;i=this,i.particle.isFixed=!0,i.particle.px=e,i.particle.py=t}function f(){var e=this;return e.grid.isPostOpen?e.expandedState.neighborStates:e.neighborStates}function m(){var e=this;return e.grid.isPostOpen?e.expandedState.isBorderTile:e.isBorderTile}function b(e){var t=this;t.grid.isPostOpen?t.expandedState.isBorderTile=e:t.isBorderTile=e}function w(e,t,i){function n(e,t,i,n){e[t]=e[t]||{tile:i,restLength:n,neighborsRelationshipObj:null,springForceX:0,springForceY:0}}var r,o,l,a,s,c;a=e.getNeighborStates(),i?(r=e.currentAnchor.x-i.currentAnchor.x,o=e.currentAnchor.y-i.currentAnchor.y,l=Math.sqrt(r*r+o*o),n(a,t,i,l),s=i.getNeighborStates(),c=(t+3)%6,n(s,c,e,l),a[t].neighborsRelationshipObj=s[c],s[c].neighborsRelationshipObj=a[t]):a[t]=null}function v(e,t,i,n){e.expandedState={sector:t,sectorMajorIndex:i,sectorMinorIndex:n,neighborStates:[],isBorderTile:!1}}function C(i,r,o,l,w,v,C,y,T,x,A,N,R,S,L,D,I,P){var E=this;E.svg=i,E.grid=r,E.element=null,E.currentAnchor={x:o,y:l},E.originalAnchor={x:o,y:l},E.sectorAnchorOffset={x:Number.NaN,y:Number.NaN},E.outerRadius=w,E.isVertical=v,E.originalColor={h:C,s:y,l:T},E.currentColor={h:C,s:y,l:T},E.postData=x,E.holdsContent=!!x,E.tilePost=null,E.originalIndex=A,E.rowIndex=N,E.columnIndex=R,E.isMarginTile=S,E.isBorderTile=L,E.isCornerTile=D,E.isInLargerRow=I,E.expandedState=null,E.isHighlighted=!1,E.neighborStates=[],E.vertices=null,E.vertexDeltas=null,E.particle=null,E.setContent=a,E.setNeighborTiles=s,E.setColor=c,E.setIsHighlighted=d,E.update=u,E.draw=g,E.applyExternalForce=h,E.fixPosition=p,E.getNeighborStates=f,E.getIsBorderTile=m,E.setIsBorderTile=b,e.call(E),t.call(E,P),E.holdsContent&&n.call(E)}var y;y={},y.dragCoeff=.01,y.neighborSpringCoeff=1e-5,y.neighborDampingCoeff=.001,y.innerAnchorSpringCoeff=4e-5,y.innerAnchorDampingCoeff=.001,y.borderAnchorSpringCoeff=4e-5,y.borderAnchorDampingCoeff=.001,y.forceSuppressionLowerThreshold=5e-4,y.velocitySuppressionLowerThreshold=5e-4,y.computeDependentValues=function(){y.forceSuppressionThresholdNegative=-y.forceSuppressionLowerThreshold,y.velocitySuppressionThresholdNegative=-y.velocitySuppressionLowerThreshold},y.computeDependentValues(),C.setTileNeighborState=w,C.initializeTileExpandedState=v,C.config=y,window.hg=window.hg||{},window.hg.Tile=C,o(),console.log("Tile module loaded")}(),function(){function e(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function t(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.grid.allTiles[t].currentColor.h=e.grid.allTiles[t].originalColor.h,e.grid.allTiles[t].currentColor.s=e.grid.allTiles[t].originalColor.s,e.grid.allTiles[t].currentColor.l=e.grid.allTiles[t].originalColor.l}function i(){}function n(){var e=this;e.isComplete=!0}function r(r){var o=this;o.grid=r,o.startTime=0,o.isComplete=!1,o.start=e,o.update=t,o.draw=i,o.cancel=n,o.init=function(){},o.init(),console.log("ColorResetJob created")}var o={};r.config=o,window.hg=window.hg||{},window.hg.ColorResetJob=r,console.log("ColorResetJob module loaded")}(),function(){function e(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function t(){var e;e=this}function i(){}function n(){var e=this;e.isComplete=!0}function r(r){var l=this;l.grid=r,l.startTime=0,l.isComplete=!1,l.start=e,l.update=t,l.draw=i,l.cancel=n,l.init=function(){o.computeDependentValues()},l.init(),console.log("ColorShiftJob created")}var o={};o.computeDependentValues=function(){},o.computeDependentValues(),r.config=o,window.hg=window.hg||{},window.hg.ColorShiftJob=r,console.log("ColorShiftJob module loaded")}(),function(){function e(){var e,t,i,n,r,o,l,s;for(e=this,s=a.wavelength/2,e.waveProgressOffsets=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)n=e.grid.allTiles[t],o=n.originalAnchor.x-a.originX,l=n.originalAnchor.y-a.originY,r=Math.sqrt(o*o+l*l)+a.wavelength,e.waveProgressOffsets[t]=-(r%a.wavelength-s)/s}function t(e,t,i){var n=Math.sin((((e+1+i)%2+2)%2-1)*Math.PI);t.currentColor.h=t.currentColor.h+a.deltaHue*n*a.opacity,t.currentColor.s=t.currentColor.s+a.deltaSaturation*n*a.opacity,t.currentColor.l=t.currentColor.l+a.deltaLightness*n*a.opacity}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;for(i=this,n=(e+a.halfPeriod)/a.period%2-1,r=0,o=i.grid.allTiles.length;o>r;r+=1)t(n,i.grid.allTiles[r],i.waveProgressOffsets[r])}function r(){}function o(){var e=this;e.isComplete=!0}function l(t){var l=this;l.grid=t,l.waveProgressOffsets=null,l.startTime=0,l.isComplete=!1,l.start=i,l.update=n,l.draw=r,l.cancel=o,l.init=function(){a.computeDependentValues(),e.call(l)},l.init(),console.log("ColorWaveJob created")}var a={};a.period=1e3,a.wavelength=600,a.originX=-100,a.originY=1400,a.deltaHue=0,a.deltaSaturation=0,a.deltaLightness=5,a.opacity=.5,a.computeDependentValues=function(){a.halfPeriod=a.period/2},a.computeDependentValues(),l.config=a,window.hg=window.hg||{},window.hg.ColorWaveJob=l,console.log("ColorWaveJob module loaded")}(),function(){function e(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function t(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.grid.allTiles[t].currentAnchor.x=e.grid.allTiles[t].originalAnchor.x,e.grid.allTiles[t].currentAnchor.y=e.grid.allTiles[t].originalAnchor.y}function i(){}function n(){var e=this;e.isComplete=!0}function r(r){var o=this;o.grid=r,o.startTime=0,o.isComplete=!1,o.start=e,o.update=t,o.draw=i,o.cancel=n,o.init=function(){},o.init(),console.log("DisplacementResetJob created")}var o={};r.config=o,window.hg=window.hg||{},window.hg.DisplacementResetJob=r,console.log("DisplacementResetJob module loaded")}(),function(){function e(){var e,t,i,n,r,o,l,s;for(e=this,s=a.wavelength/2,e.waveProgressOffsets=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)n=e.grid.allTiles[t],o=n.originalAnchor.x-a.originX,l=n.originalAnchor.y-a.originY,r=Math.sqrt(o*o+l*l)+a.wavelength,e.waveProgressOffsets[t]=-(r%a.wavelength-s)/s}function t(e,t,i){var n=Math.sin((((e+1+i)%2+2)%2-1)*Math.PI);t.currentAnchor.x+=a.tileDeltaX*n,t.currentAnchor.y+=a.tileDeltaY*n}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;for(i=this,n=(e+a.halfPeriod)/a.period%2-1,r=0,o=i.grid.allTiles.length;o>r;r+=1)t(n,i.grid.allTiles[r],i.waveProgressOffsets[r])}function r(){}function o(){var e=this;e.isComplete=!0}function l(t){var l=this;l.grid=t,l.waveProgressOffsets=null,l.startTime=0,l.isComplete=!1,l.start=i,l.update=n,l.draw=r,l.cancel=o,l.init=function(){a.computeDependentValues(),e.call(l)},l.init(),console.log("DisplacementWaveJob created")}var a={};a.period=3200,a.wavelength=1800,a.originX=0,a.originY=0,a.tileDeltaX=-15,a.tileDeltaY=-a.tileDeltaX*Math.sqrt(3),a.computeDependentValues=function(){a.halfPeriod=a.period/2,a.displacementAmplitude=Math.sqrt(a.tileDeltaX*a.tileDeltaX+a.tileDeltaY*a.tileDeltaY)},a.computeDependentValues(),l.config=a,window.hg=window.hg||{},window.hg.DisplacementWaveJob=l,console.log("DisplacementWaveJob module loaded")}(),function(){function e(){}function t(e){var t=this;console.log("ClosePostJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(){var t=this;e.call(t)}function r(){}function o(){var e=this;t.call(e,!0)}function l(e,t,l){var a=this;a.grid=e,a.tile=t,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=l,console.log("ClosePostJob created")}var a={};a.duration=500,l.config=a,window.hg=window.hg||{},window.hg.ClosePostJob=l,console.log("ClosePostJob module loaded")}(),function(){function e(){}function t(e){var t=this;console.log("DisplacementRadiateJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(){}function r(){}function o(){var e=this;t.call(e,!0)}function l(t,l,a){var s=this;s.grid=t,s.tile=l,s.startTime=0,s.isComplete=!1,s.displacements=null,s.start=i,s.update=n,s.draw=r,s.cancel=o,s.onComplete=a,e.call(s),console.log("DisplacementRadiateJob created")}var a={};a.duration=500,a.waveSpeed=3,a.waveWidth=500,a.displacementDistance=50,a.isRecurring=!1,a.avgDelay=4e3,a.delayDeviationRange=3800,l.config=a,window.hg=window.hg||{},window.hg.DisplacementRadiateJob=l,console.log("DisplacementRadiateJob module loaded")}(),function(){function e(){var e=this;e.isComplete=!0,e.onComplete()}function t(e,t){var i=a.opacity*t;e.currentColor.h=e.currentColor.h+a.deltaHue*i,e.currentColor.s=e.currentColor.s+a.deltaSaturation*i,e.currentColor.l=e.currentColor.l+a.deltaLightness*i}function i(){var e=this;
e.startTime=Date.now(),e.isComplete=!1}function n(i){var n,r;n=this,i>n.startTime+a.duration?e.call(n,!1):(r=1-(i-n.startTime)/a.duration,t(n.tile,r))}function r(){}function o(){var t=this;e.call(t,!0)}function l(e,t,l){var a=this;a.grid=e,a.tile=t,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=l}var a={};a.duration=500,a.deltaHue=0,a.deltaSaturation=0,a.deltaLightness=50,a.opacity=.5,a.isRecurring=!1,a.avgDelay=30,a.delayDeviationRange=20,l.config=a,window.hg=window.hg||{},window.hg.HighlightHoverJob=l,console.log("HighlightHoverJob module loaded")}(),function(){function e(){var e,t,i,n,r,o;for(e=this,o=-window.hg.Grid.config.tileShortLengthWithGap,t=0,i=e.grid.allTiles.length;i>t;t+=1)n=e.grid.allTiles[t].originalAnchor.x-e.startPoint.x,r=e.grid.allTiles[t].originalAnchor.y-e.startPoint.y,e.tileDistances[t]=Math.sqrt(n*n+r*r)+o}function t(e){var t=this;console.log("HighlightRadiateJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(e,t,i){var n=s.opacity*i;e.currentColor.h=e.currentColor.h+s.deltaHue*t*n,e.currentColor.s=e.currentColor.s+s.deltaSaturation*t*n,e.currentColor.l=e.currentColor.l+s.deltaLightness*t*n}function n(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function r(e){var n,r,o,l,a,c,d,u,g;if(n=this,e>n.startTime+s.duration)t.call(n,!1);else{for(u=1-(e-n.startTime)/s.duration,r=s.shimmerSpeed*(e-n.startTime),o=r-s.shimmerWaveWidth,g=!1,l=0,a=n.grid.allTiles.length;a>l;l+=1)c=n.tileDistances[l],c>o&&r>c&&(d=(c-o)/s.shimmerWaveWidth,i(n.grid.allTiles[l],d,u),g=!0);g||t.call(n,!1)}}function o(){}function l(){var e=this;t.call(e,!0)}function a(t,i,a){var s=this;s.grid=t,s.startPoint={x:i.originalAnchor.x,y:i.originalAnchor.y},s.tileDistances=[],s.startTime=0,s.isComplete=!1,s.onComplete=a||function(){},s.start=n,s.update=r,s.draw=o,s.cancel=l,e.call(s),console.log("HighlightRadiateJob created")}var s={};s.shimmerSpeed=3,s.shimmerWaveWidth=500,s.duration=500,s.deltaHue=0,s.deltaSaturation=0,s.deltaLightness=50,s.opacity=.5,s.isRecurring=!1,s.avgDelay=4e3,s.delayDeviationRange=3800,a.config=s,window.hg=window.hg||{},window.hg.HighlightRadiateJob=a,console.log("HighlightRadiateJob module loaded")}(),function(){function e(e){var t=this;console.log("IntraTileRadiateJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function t(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function i(){}function n(){var e;e=this}function r(){var t=this;e.call(t,!0)}function o(e,o,l){var a=this;a.grid=e,a.tile=o,a.startTime=0,a.isComplete=!1,a.start=t,a.update=i,a.draw=n,a.cancel=r,a.onComplete=l,console.log("IntraTileRadiateJob created")}var l={};l.duration=500,l.isRecurring=!1,l.avgDelay=4e3,l.delayDeviationRange=3800,o.config=l,window.hg=window.hg||{},window.hg.IntraTileRadiateJob=o,console.log("IntraTileRadiateJob module loaded")}(),function(){function e(){var e,t,i;e=this,t=document.createElementNS(window.hg.util.svgNamespace,"filter"),e.grid.svgDefs.appendChild(t),i=document.createElementNS(window.hg.util.svgNamespace,"feGaussianBlur"),t.appendChild(i),t.setAttribute("id",y.filterId),t.setAttribute("x","-10%"),t.setAttribute("y","-10%"),t.setAttribute("width","120%"),t.setAttribute("height","120%"),i.setAttribute("in","SourceGraphic"),i.setAttribute("result","blurOut"),e.filter=t,e.feGaussianBlur=i}function t(){var e;e=this,e.startHue=360*Math.random(),e.endHue=360*Math.random()}function i(){var e;e=this,e.polyline=document.createElementNS(window.hg.util.svgNamespace,"polyline"),e.grid.svg.insertBefore(e.polyline,e.grid.svg.firstChild),e.polyline.setAttribute("fill-opacity","0"),y.isBlurOn&&e.polyline.setAttribute("filter","url(#"+y.filterId+")")}function n(){var e,t,i;e=this,t=e.ellapsedTime/e.duration,i=1-t,e.currentColor.h=i*e.startHue+t*e.endHue,e.currentColor.s=i*e.startSaturation+t*e.endSaturation,e.currentColor.l=i*e.startLightness+t*e.endLightness,e.currentOpacity=i*e.startOpacity+t*e.endOpacity}function r(){var e;e=this,console.log("LineJob completed"),e.polyline&&(e.grid.svg.removeChild(e.polyline),e.polyline=null),e.tiles=[],e.corners=[],e.direction=Number.NaN,e.currentCornerIndex=Number.NaN,e.hasReachedEdge=!0,e.isComplete=!0,e.onComplete(e)}function o(){var e;e=this,e.hasAlmostReachedEdge=e.direction===(e.corners[e.currentCornerIndex]+3)%6?!1:!e.lowerNeighbors[e.currentCornerIndex]||!e.upperNeighbors[e.currentCornerIndex]}function l(){var e,t,i,n;e=this,n=e.corners[e.currentCornerIndex],e.grid.isVertical?(t=(n+5)%6,i=n):(t=n,i=(n+1)%6),e.lowerNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighborStates[t],e.upperNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighborStates[i],e.lowerNeighborCorners[e.currentCornerIndex]=(n+2)%6,e.upperNeighborCorners[e.currentCornerIndex]=(n+4)%6}function a(){var e,t,i,n,r,a,c,d,u,g,h;if(e=this,h=e.corners[e.currentCornerIndex],0===e.currentCornerIndex)c=e.forcedInitialRelativeDirection,e.latestDirection=s(c,h);else{switch(t=(h-e.direction+6)%6){case 0:i=e.sameDirectionProb,n=y.distantSidewaysDirectionProb,r=y.distantSidewaysDirectionProb;break;case 1:i=y.closeSidewaysDirectionProb,n=y.closeSidewaysDirectionProb,r=y.oppositeDirectionProb;break;case 2:i=y.distantSidewaysDirectionProb,n=e.sameDirectionProb,r=y.distantSidewaysDirectionProb;break;case 3:i=y.oppositeDirectionProb,n=y.closeSidewaysDirectionProb,r=y.closeSidewaysDirectionProb;break;case 4:i=y.distantSidewaysDirectionProb,n=y.distantSidewaysDirectionProb,r=e.sameDirectionProb;break;case 5:i=y.closeSidewaysDirectionProb,n=y.oppositeDirectionProb,r=y.closeSidewaysDirectionProb;break;default:throw new Error("Invalid state: cornerConfig="+t)}do a=Math.random(),c=i>a?y.NEIGHBOR:i+n>a?y.LOWER_SELF:y.UPPER_SELF,d=s(c,h);while(d===(e.latestDirection+3)%6);e.latestDirection=d}switch(c){case y.NEIGHBOR:e.grid.isVertical?(u=(h+1)%6,g=e.tiles[e.currentCornerIndex].neighborStates[(h+5)%6].tile):(u=(h+1)%6,g=e.tiles[e.currentCornerIndex].neighborStates[h].tile);break;case y.LOWER_SELF:u=(h+5)%6,g=e.tiles[e.currentCornerIndex];break;case y.UPPER_SELF:u=(h+1)%6,g=e.tiles[e.currentCornerIndex];break;default:throw new Error("Invalid state: relativeDirection="+c)}e.currentCornerIndex=e.corners.length,e.corners[e.currentCornerIndex]=u,e.tiles[e.currentCornerIndex]=g,l.call(e),o.call(e)}function s(e,t){switch(e){case y.NEIGHBOR:return t;case y.LOWER_SELF:return(t+4)%6;case y.UPPER_SELF:return(t+2)%6;default:throw new Error("Invalid state: relativeDirection="+e)}}function c(){var e,t,i,n,o,l,s;for(e=this,t=e.ellapsedTime/e.lineSidePeriod*window.hg.Grid.config.tileOuterRadius,o=parseInt(e.ellapsedTime/e.lineSidePeriod)+1;o>=e.corners.length&&!e.hasAlmostReachedEdge;)a.call(e);i=t%window.hg.Grid.config.tileOuterRadius,n=(e.lineLength-i+window.hg.Grid.config.tileOuterRadius)%window.hg.Grid.config.tileOuterRadius,e.frontSegmentEndRatio=i/window.hg.Grid.config.tileOuterRadius,e.backSegmentStartRatio=1-n/window.hg.Grid.config.tileOuterRadius,e.isShort=e.lineLength<window.hg.Grid.config.tileOuterRadius,e.isStarting=t<e.lineLength,e.hasAlmostReachedEdge&&o>=e.corners.length&&(e.hasReachedEdge=!0),e.segmentsIncludedCount=parseInt((e.lineLength-i-n-y.epsilon)/window.hg.Grid.config.tileOuterRadius)+2,e.isShort?e.segmentsIncludedCount=e.isStarting||e.hasReachedEdge?1:i-e.lineLength>=0?1:2:(e.isStarting&&(e.segmentsIncludedCount=o),e.hasReachedEdge&&(s=o-e.corners.length+1,l=t-(e.corners.length-1)*window.hg.Grid.config.tileOuterRadius,l>e.lineLength&&r.call(e),e.segmentsIncludedCount-=s))}function d(){var e,t,i;for(e=this,e.gapPoints=[],t=0,i=e.corners.length;i>t;t+=1)e.gapPoints[t]=u(e.tiles[t],e.corners[t],e.lowerNeighbors[t],e.upperNeighbors[t],e.lowerNeighborCorners[t],e.upperNeighborCorners[t])}function u(e,t,i,n,r,o){var l,a,s;return i?n?(l=3,a=e.particle.px+i.tile.particle.px+n.tile.particle.px,s=e.particle.py+i.tile.particle.py+n.tile.particle.py):(l=2,a=e.vertices[2*t]+i.tile.vertices[2*r],s=e.vertices[2*t+1]+i.tile.vertices[2*r+1]):n?(l=2,a=e.vertices[2*t]+n.tile.vertices[2*o],s=e.vertices[2*t+1]+n.tile.vertices[2*o+1]):(l=1,a=e.vertices[2*t],s=e.vertices[2*t+1]),{x:a/l,y:s/l}}function g(){var e,t,i,n;for(e=this,e.polylinePoints=[],t=e.currentCornerIndex,e.extraStartPoint&&e.isStarting?(e.polylinePoints[0]=e.extraStartPoint,i=e.segmentsIncludedCount+1,n=1):(i=e.segmentsIncludedCount,n=0),e.polylinePoints[i]=e.hasReachedEdge?{x:e.gapPoints[t].x,y:e.gapPoints[t].y}:{x:e.gapPoints[t].x*e.frontSegmentEndRatio+e.gapPoints[t-1].x*(1-e.frontSegmentEndRatio),y:e.gapPoints[t].y*e.frontSegmentEndRatio+e.gapPoints[t-1].y*(1-e.frontSegmentEndRatio)},i-=1,t-=1;i>n;i-=1,t-=1)e.polylinePoints[i]=e.gapPoints[t];e.polylinePoints[i]=e.isStarting?{x:e.gapPoints[t].x,y:e.gapPoints[t].y}:{x:e.gapPoints[t+1].x*e.backSegmentStartRatio+e.gapPoints[t].x*(1-e.backSegmentStartRatio),y:e.gapPoints[t+1].y*e.backSegmentStartRatio+e.gapPoints[t].y*(1-e.backSegmentStartRatio)}}function h(){var e,t,i,n;for(e=this,n="",t=0,i=e.polylinePoints.length;i>t;t+=1)n+=e.polylinePoints[t].x+","+e.polylinePoints[t].y+" ";e.polyline.setAttribute("points",n),e.polyline.setAttribute("stroke","hsl("+e.currentColor.h+","+e.currentColor.s+"%,"+e.currentColor.l+"%)"),e.polyline.setAttribute("stroke-opacity",e.currentOpacity),e.polyline.setAttribute("stroke-width",e.lineWidth)}function p(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function f(e){var t=this;t.ellapsedTime=e-t.startTime,t.ellapsedTime>=t.duration?r.call(t):(n.call(t),c.call(t),t.feGaussianBlur.setAttribute("stdDeviation",t.blurStdDeviation),t.isComplete||(d.call(t),g.call(t)))}function m(){var e=this;h.call(e)}function b(){var e;e=this,r.call(e)}function w(n,r,o,a,s,c,d){var u=this;if(u.grid=n,u.tiles=[r],u.corners=[o],u.lowerNeighbors=[],u.upperNeighbors=[],u.lowerNeighborCorners=[],u.upperNeighborCorners=[],u.direction=a,u.forcedInitialRelativeDirection=s,u.extraStartPoint=d,u.currentCornerIndex=0,u.frontSegmentEndRatio=Number.NaN,u.backSegmentStartRatio=Number.NaN,u.latestDirection=a,u.polyline=null,u.gapPoints=[],u.polylinePoints=null,u.hasReachedEdge=!1,u.startTime=0,u.ellapsedTime=0,u.isComplete=!1,u.startHue=Number.NaN,u.endHue=Number.NaN,u.currentColor={h:Number.NaN,s:y.startSaturation,l:y.startLightness},u.currentOpacity=y.startOpacity,u.duration=y.duration,u.lineWidth=y.lineWidth,u.lineLength=y.lineLength,u.lineSidePeriod=y.lineSidePeriod,u.startSaturation=y.startSaturation,u.startLightness=y.startLightness,u.startOpacity=y.startOpacity,u.endSaturation=y.endSaturation,u.endLightness=y.endLightness,u.endOpacity=y.endOpacity,u.sameDirectionProb=y.sameDirectionProb,u.blurStdDeviation=y.blurStdDeviation,u.isBlurOn=y.isBlurOn,u.onComplete=c||function(){},u.start=p,u.update=f,u.draw=m,u.cancel=b,y.haveDefinedLineBlur||e.call(u),!C(u))throw new Error("LineJob created with invalid initial corner configuration: tileIndex="+r.originalIndex+", corner="+o+", direction="+a);l.call(u),t.call(u),i.call(u),console.log("LineJob created: tileIndex="+r.originalIndex+", corner="+o+", direction="+a)}function v(e,t){var i,n,r,o;do i=e.originalBorderTiles[parseInt(Math.random()*e.originalBorderTiles.length)];while(i.isCornerTile);return e.isVertical?i.neighborStates[4]?i.neighborStates[1]?i.neighborStates[0]?(Math.random()<.5?(n=2,o=y.LOWER_SELF):(n=4,o=y.UPPER_SELF),r=0):(Math.random()<.5?(n=1,o=y.UPPER_SELF):(n=5,o=y.LOWER_SELF),r=3):(i.isInLargerRow?Math.random()<.5?(n=0,o=y.LOWER_SELF):(n=3,o=y.UPPER_SELF):Math.random()<.5?(n=1,o=y.LOWER_SELF):(n=2,o=y.UPPER_SELF),r=i.originalAnchor.y<e.originalCenter.y?4:5):(i.isInLargerRow?Math.random()<.5?(n=0,o=y.UPPER_SELF):(n=3,o=y.LOWER_SELF):Math.random()<.5?(n=4,o=y.LOWER_SELF):(n=5,o=y.UPPER_SELF),r=i.originalAnchor.y<e.originalCenter.y?2:1):i.neighborStates[0]?i.neighborStates[3]?i.neighborStates[4]?(Math.random()<.5?(n=0,o=y.LOWER_SELF):(n=2,o=y.UPPER_SELF),r=4):(Math.random()<.5?(n=3,o=y.LOWER_SELF):(n=5,o=y.UPPER_SELF),r=1):(i.rowIndex===e.rowCount-1?Math.random()<.5?(n=1,o=y.LOWER_SELF):(n=4,o=y.UPPER_SELF):Math.random()<.5?(n=2,o=y.LOWER_SELF):(n=3,o=y.UPPER_SELF),r=i.originalAnchor.x<e.originalCenter.x?0:5):(0===i.rowIndex?Math.random()<.5?(n=1,o=y.UPPER_SELF):(n=4,o=y.LOWER_SELF):Math.random()<.5?(n=0,o=y.UPPER_SELF):(n=5,o=y.LOWER_SELF),r=i.originalAnchor.x<e.originalCenter.x?2:3),new w(e,i,n,r,o,t,null)}function C(e){var t,i,n,r,o;if(t=e.tiles[0],i=e.corners[0],n=e.direction,r=e.forcedInitialRelativeDirection,t.isCornerTile)return!1;if(t.isBorderTile)if(e.grid.isVertical)if(t.neighborStates[4])if(t.neighborStates[1])if(t.neighborStates[0])switch(o=0===n,i){case 0:return!0;case 1:return!0;case 2:return r===y.LOWER_SELF&&o;case 3:return!1;case 4:return r===y.UPPER_SELF&&o;case 5:return!0}else switch(o=3===n,i){case 0:return!1;case 1:return r===y.UPPER_SELF&&o;case 2:return!0;case 3:return!0;case 4:return!0;case 5:return r===y.LOWER_SELF&&o}else if(o=4===n||5===n,t.isInLargerRow)switch(i){case 0:return r===y.LOWER_SELF&&o;case 1:return!1;case 2:return!1;case 3:return r===y.UPPER_SELF&&o;case 4:return!0;case 5:return!0}else switch(i){case 0:return!0;case 1:return r===y.LOWER_SELF&&o;case 2:return r===y.UPPER_SELF&&o;case 3:return!0;case 4:return!0;case 5:return!0}else if(o=1===n||2===n,t.isInLargerRow)switch(i){case 0:return r===y.UPPER_SELF&&o;case 1:return!0;case 2:return!0;case 3:return r===y.LOWER_SELF&&o;case 4:return!1;case 5:return!1}else switch(i){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return!0;case 4:return r===y.LOWER_SELF&&o;case 5:return r===y.UPPER_SELF&&o}else if(t.neighborStates[0])if(t.neighborStates[3])if(t.neighborStates[4])switch(o=4===n,i){case 0:return r===y.LOWER_SELF&&o;case 1:return!1;case 2:return r===y.UPPER_SELF&&o;case 3:return!0;case 4:return!0;case 5:return!0}else switch(o=1===n,i){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return r===y.LOWER_SELF&&o;case 4:return!1;case 5:return r===y.UPPER_SELF&&o}else if(o=0===n||5===n,t.rowIndex===e.grid.rowCount-1)switch(i){case 0:return!0;case 1:return r===y.LOWER_SELF&&o;case 2:return!1;case 3:return!1;case 4:return r===y.UPPER_SELF&&o;case 5:return!0}else switch(i){case 0:return!0;case 1:return!0;case 2:return r===y.LOWER_SELF&&o;case 3:return r===y.UPPER_SELF&&o;case 4:return!0;case 5:return!0}else if(o=2===n||3===n,0===t.rowIndex)switch(i){case 0:return!1;case 1:return r===y.UPPER_SELF&&o;case 2:return!0;case 3:return!0;case 4:return r===y.LOWER_SELF&&o;case 5:return!1}else switch(i){case 0:return r===y.UPPER_SELF&&o;case 1:return!0;case 2:return!0;case 3:return!0;case 4:return!0;case 5:return r===y.LOWER_SELF&&o}return!0}var y={};y.duration=2e3,y.lineWidth=28,y.lineLength=6e4,y.lineSidePeriod=5,y.startSaturation=100,y.startLightness=100,y.startOpacity=.6,y.endSaturation=100,y.endLightness=60,y.endOpacity=0,y.sameDirectionProb=.8,y.blurStdDeviation=2,y.isBlurOn=!1,y.isRecurring=!0,y.avgDelay=2200,y.delayDeviationRange=2100,y.NEIGHBOR=0,y.LOWER_SELF=1,y.UPPER_SELF=2,y.oppositeDirectionProb=0,y.epsilon=1e-5,y.haveDefinedLineBlur=!1,y.filterId="random-line-filter",y.computeDependentValues=function(){y.distantSidewaysDirectionProb=(1-y.sameDirectionProb)/2,y.closeSidewaysDirectionProb=(1-y.oppositeDirectionProb)/2},y.computeDependentValues(),w.config=y,w.createRandomLineJob=v,window.hg=window.hg||{},window.hg.LineJob=w,console.log("LineJob module loaded")}(),function(){function e(){var e,t,i;e=this,t=document.createElementNS(window.hg.util.svgNamespace,"filter"),e.grid.svgDefs.appendChild(t),i=document.createElementNS(window.hg.util.svgNamespace,"feGaussianBlur"),t.appendChild(i),t.setAttribute("id",s.filterId),t.setAttribute("x","-10%"),t.setAttribute("y","-10%"),t.setAttribute("width","120%"),t.setAttribute("height","120%"),i.setAttribute("in","SourceGraphic"),i.setAttribute("result","blurOut"),e.feGaussianBlur=i}function t(){var e,t,i;for(e=this,e.lineJobs=[],t=0;6>t;t+=1){try{i=new window.hg.LineJob(e.grid,e.tile,t,t,window.hg.LineJob.config.NEIGHBOR,e.onComplete,e.extraStartPoint)}catch(n){console.debug(n.message);continue}e.lineJobs.push(i),i.duration=s.duration,i.lineWidth=s.lineWidth,i.lineLength=s.lineLength,i.lineSidePeriod=s.lineSidePeriod,i.startSaturation=s.startSaturation,i.startLightness=s.startLightness,i.startOpacity=s.startOpacity,i.endSaturation=s.endSaturation,i.endLightness=s.endLightness,i.endOpacity=s.endOpacity,i.sameDirectionProb=s.sameDirectionProb,i.filterId=s.filterId,i.blurStdDeviation=s.blurStdDeviation,i.isBlurOn=s.isBlurOn,s.isBlurOn?i.polyline.setAttribute("filter","url(#"+s.filterId+")"):i.polyline.setAttribute("filter","none")}}function i(){var e,t;for(e=this,t=0;t<e.lineJobs.length;t+=1){if(!e.lineJobs[t].isComplete)return;e.lineJobs.splice(t--,1)}console.log("LinesRadiateJob completed"),e.isComplete=!0}function n(){var e,t,i;for(e=this,e.startTime=Date.now(),e.isComplete=!1,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].start()}function r(e,t){var n,r,o;for(n=this,n.extraStartPoint.x=n.tile.particle.px,n.extraStartPoint.y=n.tile.particle.py,r=0,o=n.lineJobs.length;o>r;r+=1)n.lineJobs[r].update(e,t),n.lineJobs[r].isComplete&&(n.lineJobs.splice(r,1),r--,o--);n.feGaussianBlur.setAttribute("stdDeviation",s.blurStdDeviation),i.call(n)}function o(){var e,t,i;for(e=this,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].draw()}function l(){var e,t,i;for(e=this,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].cancel();e.lineJobs=[],e.isComplete=!0}function a(i,a,c){var d=this;d.grid=i,d.tile=a,d.extraStartPoint={x:a.particle.px,y:a.particle.py},d.startTime=0,d.isComplete=!1,d.lineJobs=null,d.onComplete=c||function(){},d.start=n,d.update=r,d.draw=o,d.cancel=l,s.haveDefinedLineBlur||e.call(d),t.call(d),console.log("LinesRadiateJob created: tileIndex="+a.originalIndex)}var s={};s.duration=700,s.lineWidth=24,s.lineLength=1300,s.lineSidePeriod=30,s.startSaturation=100,s.startLightness=100,s.startOpacity=.8,s.endSaturation=100,s.endLightness=70,s.endOpacity=0,s.sameDirectionProb=.85,s.blurStdDeviation=2,s.isBlurOn=!1,s.isRecurring=!1,s.avgDelay=2e3,s.delayDeviationRange=1800,s.haveDefinedLineBlur=!1,s.filterId="random-line-filter",a.config=s,window.hg=window.hg||{},window.hg.LinesRadiateJob=a,console.log("LinesRadiateJob module loaded")}(),function(){function e(e){var t=this;console.log("OpenPostJob "+(e?"cancelled":"completed")),t.grid.isTransitioning=!1,t.isComplete=!0,t.onComplete()}function t(){var e,t,i,n,r,o,l;for(e=this,e.grid.sectors=[],t=0;6>t;t+=1)e.grid.sectors[t]=new window.hg.Sector(e.grid,e.baseTile,t,a.expandedDisplacementTileCount);for(t=0;6>t;t+=1)e.grid.sectors[t].initializeExpandedStateExternalTileNeighbors(e.grid.sectors);for(t=0;6>t;t+=1)e.grid.sectors[t].tilesByIndex=null;for(window.hg.Tile.initializeTileExpandedState(e.baseTile,null,Number.NaN,Number.NaN),l=[],r=0,t=0;6>t;t+=1)for(o=e.grid.sectors[t].tiles,i=0,n=o.length;n>i;i+=1,r+=1)l[r]=o[i];l[r]=e.baseTile,e.grid.updateAllTilesCollection(l)}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1,e.grid.isPostOpen=!0,e.grid.isTransitioning=!0,e.grid.expandedTile=e.baseTile,e.grid.parent.style.overflow="hidden",t.call(e),window.hg.controller.resetPersistentJobs(e.grid),e.grid.annotations.setExpandedAnnotations(!0),window.hg.controller.transientJobs.spread.create(e.grid,e.baseTile),window.hg.controller.transientJobs.pan.create(e.grid,e.baseTile)}function n(t){var i,n,r,o,l;for(i=this,n=(t-i.startTime)/a.duration,n=window.hg.util.easingFunctions.easeOutQuint(n),n=n>1?1:n,r=0;6>r;r+=1)o=i.grid.sectors[r].originalAnchor.x+i.grid.sectors[r].expandedDisplacement.x*n,l=i.grid.sectors[r].originalAnchor.y+i.grid.sectors[r].expandedDisplacement.y*n,i.grid.sectors[r].setSectorPosition(o,l);i.baseTile.element.style.opacity=1-n,1===n&&e.call(i,!1)}function r(){}function o(){var t=this;e.call(t,!0)}function l(e,t,l){var a=this;a.grid=e,a.baseTile=t,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=l,console.log("OpenPostJob created")}var a={};a.duration=500,a.expandedDisplacementTileCount=3,l.config=a,window.hg=window.hg||{},window.hg.OpenPostJob=l,console.log("OpenPostJob module loaded")}(),function(){function e(e){var t=this;console.log("PanJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function t(){var e,t,i;for(e=this,t=0,i=e.grid.allTiles.length;i>t;t+=1)e.grid.allTiles[t].originalAnchor.x+=e.displacement.x,e.grid.allTiles[t].originalAnchor.y+=e.displacement.y;e.grid.panCenter.x+=e.displacement.x,e.grid.panCenter.y+=e.displacement.y}function i(){var e=this;e.reverseDisplacement={x:e.endPoint.x-e.startPoint.x,y:e.endPoint.y-e.startPoint.y},e.displacement={x:-e.reverseDisplacement.x,y:-e.reverseDisplacement.y},e.startTime=Date.now(),e.isComplete=!1,t.call(e)}function n(t){var i,n,r,o,l,s;for(i=this,n=(t-i.startTime)/a.duration,n=1-window.hg.util.easingFunctions.easeOutQuint(n),n=0>n?0:n,l=i.reverseDisplacement.x*n,s=i.reverseDisplacement.y*n,r=0,o=i.grid.allTiles.length;o>r;r+=1)i.grid.allTiles[r].currentAnchor.x+=l,i.grid.allTiles[r].currentAnchor.y+=s;i.grid.currentCenter.x=i.grid.panCenter.x+l,i.grid.currentCenter.y=i.grid.panCenter.y+s,0===n&&e.call(i,!1)}function r(){}function o(){var t=this;e.call(t,!0)}function l(e,t,l,a){var s=this;s.grid=e,s.baseTile=t,s.reverseDisplacement=null,s.displacement=null,s.startTime=0,s.isComplete=!1,s.endPoint=a||{x:t.originalAnchor.x,y:t.originalAnchor.y},s.startPoint={x:e.originalCenter.x,y:e.originalCenter.y},s.start=i,s.update=n,s.draw=r,s.cancel=o,s.onComplete=l,console.log("PanJob created")}var a={};a.duration=500,a.displacementRatio=.28,a.isRecurring=!1,a.avgDelay=300,a.delayDeviationRange=0,l.config=a,window.hg=window.hg||{},window.hg.PanJob=l,console.log("PanJob module loaded")}(),function(){function e(){var e,t,i;for(e=this,e.displacements=[],t=0,i=e.grid.allTiles.length;i>t;t+=1)e.displacements[t]={tile:e.grid.allTiles[t],dx:a.displacementRatio*(e.grid.allTiles[t].originalAnchor.x-e.tile.originalAnchor.x),dy:a.displacementRatio*(e.grid.allTiles[t].originalAnchor.y-e.tile.originalAnchor.y)};console.log("spread-job.grid.allTiles.length",e.grid.allTiles.length)}function t(e){var t=this;console.log("SpreadJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;if(i=this,e>i.startTime+a.duration)t.call(i,!1);else for(n=(e-i.startTime)/a.duration,n=2*(n>.5?1-n:n),n=window.hg.util.easingFunctions.easeOutQuint(n),r=0,o=i.displacements.length;o>r;r+=1)i.displacements[r].tile.currentAnchor.x+=i.displacements[r].dx*n,i.displacements[r].tile.currentAnchor.y+=i.displacements[r].dy*n}function r(){}function o(){var e=this;t.call(e,!0)}function l(t,l,a){var s=this;s.grid=t,s.tile=l,s.startTime=0,s.isComplete=!1,s.displacements=null,s.start=i,s.update=n,s.draw=r,s.cancel=o,s.onComplete=a,e.call(s),console.log("SpreadJob created")}var a={};a.duration=500,a.displacementRatio=.28,a.isRecurring=!1,a.avgDelay=4e3,a.delayDeviationRange=3800,l.config=a,window.hg=window.hg||{},window.hg.SpreadJob=l,console.log("SpreadJob module loaded")}(),function(){function e(e){var t=this;console.log("TileBorderJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function t(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function i(){}function n(){var e;e=this}function r(){var t=this;e.call(t,!0)}function o(e,o,l){var a=this;a.grid=e,a.tile=o,a.startTime=0,a.isComplete=!1,a.start=t,a.update=i,a.draw=n,a.cancel=r,a.onComplete=l,console.log("TileBorderJob created")}var l={};l.duration=500,l.isRecurring=!1,l.avgDelay=4e3,l.delayDeviationRange=3800,o.config=l,window.hg=window.hg||{},window.hg.TileBorderJob=o,console.log("TileBorderJob module loaded")}();