"use strict";!function(){function e(){var e,t,i,n,r,o,a,l,s;for(e=this,t=.5*e.parent.clientWidth,i=e.parent.clientHeight,e.centerX=t,e.centerY=.5*i,e.actualContentAreaWidth=e.parent.clientWidth<v.targetContentAreaWidth?e.parent.clientWidth:v.targetContentAreaWidth,e.isVertical?(e.rowDeltaY=1.5*v.tileOuterRadius+v.tileGap*v.sqrtThreeOverTwo,e.tileDeltaX=v.tileShortLengthWithGap,e.oddRowTileCount=2*Math.ceil((t-(v.tileInnerRadius+v.tileGap))/v.tileShortLengthWithGap)+1,e.evenRowTileCount=2*Math.ceil((t-(v.tileShortLengthWithGap+.5*v.tileGap))/v.tileShortLengthWithGap)+2,e.oddRowXOffset=t-v.tileShortLengthWithGap*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(v.firstRowYOffset+2*v.tileOuterRadius+v.tileGap*Math.sqrt(3)))/e.rowDeltaY)+2):(e.rowDeltaY=v.tileInnerRadius+.5*v.tileGap,e.tileDeltaX=3*v.tileOuterRadius+v.tileGap*Math.sqrt(3),e.oddRowTileCount=2*Math.ceil((t-(e.tileDeltaX-v.tileOuterRadius))/e.tileDeltaX)+1,e.evenRowTileCount=2*Math.ceil((t-(e.tileDeltaX+v.tileGap*v.sqrtThreeOverTwo+.5*v.tileOuterRadius))/e.tileDeltaX)+2,e.oddRowXOffset=t-e.tileDeltaX*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(v.firstRowYOffset+3*v.tileInnerRadius+2*v.tileGap))/e.rowDeltaY)+4),e.evenRowXOffset=e.oddRowXOffset+(e.evenRowTileCount>e.oddRowTileCount?-1:1)*e.tileDeltaX*.5,e.contentAreaLeft=t-.5*e.actualContentAreaWidth,e.contentAreaRight=e.contentAreaLeft+e.actualContentAreaWidth,e.isVertical?(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-v.tileInnerRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-v.tileInnerRadius))/e.tileDeltaX)):(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-v.tileOuterRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-v.tileOuterRadius))/e.tileDeltaX)),e.oddRowContentTileCount=e.oddRowTileCount-2*e.oddRowContentStartIndex,e.evenRowContentTileCount=e.evenRowTileCount-2*e.evenRowContentStartIndex,e.oddRowContentEndIndex=e.oddRowContentStartIndex+e.oddRowContentTileCount-1,e.evenRowContentEndIndex=e.evenRowContentStartIndex+e.evenRowContentTileCount-1,e.actualContentInnerIndices=[],l=Math.ceil(v.contentStartingRowIndex/2)*e.oddRowContentTileCount+Math.floor(v.contentStartingRowIndex/2)*e.evenRowContentTileCount,o=0,a=e.originalContentInnerIndices.length;a>o;o+=1)e.actualContentInnerIndices[o]=e.originalContentInnerIndices[o]+l;for(e.innerIndexOfLastContentTile=e.actualContentInnerIndices[e.actualContentInnerIndices.length-1],s=l+e.innerIndexOfLastContentTile+1,n=0,r=0;s>n;)n+=r%2===0?e.oddRowContentTileCount:e.evenRowContentTileCount,r+=1;e.rowCount=r>e.rowCount?r:e.rowCount,e.height=(e.rowCount-1)*e.rowDeltaY}function t(){var e,t,i,n,r;for(e=this,r=[],n=e.tileData.length,t=0;n>t;t+=1)r[t]=1;for(n=1/v.contentDensity*e.tileData.length,t=e.tileData.length;n>t;t+=1)r[t]=0;for(r=hg.util.shuffle(r),e.originalContentInnerIndices=[],t=0,i=0,n=r.length;n>t;t+=1)r[t]&&(e.originalContentInnerIndices[i++]=t)}function i(){var e;e=this,e.svg=document.createElementNS(hg.util.svgNamespace,"svg"),e.svg.style.display="block",e.svg.style.position="relative",e.svg.style.width="100%",e.svg.style.zIndex="2147483647",d.call(e),e.parent.appendChild(e.svg),e.svgDefs=document.createElementNS(hg.util.svgNamespace,"defs"),e.svg.appendChild(e.svgDefs)}function n(){var e,t,i,n,l,s,c,d,u,g,h,p,f,m,b,C,w;for(e=this,e.tiles=[],e.borderTiles=[],t=0,p=0,f=0,d=v.firstRowYOffset,n=e.rowCount,b=[],m=a.call(e),C=e.oddRowTileCount>e.evenRowTileCount,i=0;n>i;i+=1,d+=e.rowDeltaY)for(h=i%2===0,h?(c=e.oddRowXOffset,s=e.oddRowTileCount):(c=e.evenRowXOffset,s=e.evenRowTileCount),l=0;s>l;t+=1,l+=1,c+=e.tileDeltaX)u=h?l<e.oddRowContentStartIndex||l>e.oddRowContentEndIndex:l<e.evenRowContentStartIndex||l>e.evenRowContentEndIndex,g=0===l||l===s-1||0===i||i===n-1,e.tiles[t]=new hg.HexTile(e.svg,c,d,v.tileOuterRadius,e.isVertical,v.tileHue,v.tileSaturation,v.tileLightness,null,t,u,g,v.tileMass),g&&e.borderTiles.push(e.tiles[t]),u||(p===e.actualContentInnerIndices[f]&&(e.tiles[t].setContent(e.tileData[f]),f+=1),p+=1),w=C&&h||!C&&!h,b[t]=o.call(e,i,n,l,s,w,m);r.call(e,b)}function r(e){var t,i,n,r,o,a;for(t=this,a=[],i=0,r=t.tiles.length;r>i;i+=1){for(n=0,o=6;o>n;n+=1)a[n]=isNaN(e[i][n])?null:t.tiles[i+e[i][n]];t.tiles[i].setNeighborTiles(a)}}function o(e,t,i,n,r,o){var a,l;return a=this,l=o.slice(0),a.isVertical?(r?(0===i&&(l[3]=Number.NaN,l[4]=Number.NaN,l[5]=Number.NaN),i===n-1&&(l[0]=Number.NaN,l[1]=Number.NaN,l[2]=Number.NaN)):(0===i&&(l[4]=Number.NaN),i===n-1&&(l[1]=Number.NaN)),0===e&&(l[0]=Number.NaN,l[5]=Number.NaN),e===t-1&&(l[2]=Number.NaN,l[3]=Number.NaN)):(r&&(0===i&&(l[4]=Number.NaN,l[5]=Number.NaN),i===n-1&&(l[1]=Number.NaN,l[2]=Number.NaN)),0===e?(l[0]=Number.NaN,l[1]=Number.NaN,l[5]=Number.NaN):1===e&&(l[0]=Number.NaN),e===t-1?(l[2]=Number.NaN,l[3]=Number.NaN,l[4]=Number.NaN):e===t-2&&(l[3]=Number.NaN)),l}function a(){var e,t,i;return e=this,i=[],t=e.oddRowTileCount>e.evenRowTileCount?e.oddRowTileCount:e.evenRowTileCount,e.isVertical?(i[0]=-t+1,i[1]=1,i[2]=t,i[3]=t-1,i[4]=-1,i[5]=-t):(i[0]=2*-t+1,i[1]=-t+1,i[2]=t,i[3]=2*t-1,i[4]=t-1,i[5]=-t),i}function l(){var e,t;for(e=this,t=e.svg,e.annotations.destroyAnnotations.call(e.annotations);t.firstChild;)t.removeChild(t.firstChild)}function s(){var e=this;console.log("// --- HexGrid Info: ------- //"),console.log("// - Tile count="+e.tiles.length),console.log("// - Row count="+e.rowCount),console.log("// - Odd row tile count="+e.oddRowTileCount),console.log("// - Even row tile count="+e.evenRowTileCount),console.log("// ------------------------- //")}function c(){var t;t=this,l.call(t),e.call(t),n.call(t),t.svg.style.height=t.height+"px",t.annotations.createAnnotations(),s.call(t)}function d(){var e;e=this,e.svg.style.backgroundColor="hsl("+v.backgroundHue+","+v.backgroundSaturation+"%,"+v.backgroundLightness+"%)"}function u(){var e,t,i;for(e=this,t=0,i=e.tiles.length;i>t;t+=1)e.tiles[t].setColor(v.tileHue,v.tileSaturation,v.tileLightness)}function g(e){var t,i,n;for(t=this,i=0,n=t.tiles.length;n>i;i+=1)t.tiles[i].particle.m=e}function h(){var e=this;e.isComplete=!1}function p(e,t){var i,n,r;for(i=this,n=0,r=i.tiles.length;r>n;n+=1)i.tiles[n].update(e,t),i.tiles[n].draw();i.annotations.update(e,t)}function f(){var e=this;e.isComplete=!0}function m(e,n,r){var o=this;o.parent=e,o.tileData=n,o.isVertical=r,o.actualContentAreaWidth=v.targetContentAreaWidth,o.isComplete=!1,o.svg=null,o.tiles=[],o.borderTiles=null,o.originalContentInnerIndices=null,o.innerIndexOfLastContentTile=null,o.centerX=Number.NaN,o.centerY=Number.NaN,o.annotations=new hg.HexGridAnnotations(o),o.resize=c,o.start=h,o.update=p,o.cancel=f,o.updateBackgroundColor=d,o.updateTileColor=u,o.updateTileMass=g,o.computeContentIndices=t,i.call(o),t.call(o),c.call(o)}var v={};v.targetContentAreaWidth=800,v.backgroundHue=327,v.backgroundSaturation=20,v.backgroundLightness=10,v.tileHue=147,v.tileSaturation=50,v.tileLightness=30,v.tileOuterRadius=80,v.tileGap=12,v.contentStartingRowIndex=2,v.firstRowYOffset=v.tileOuterRadius*-.8,v.contentDensity=.6,v.tileMass=1,v.computeDependentValues=function(){v.sqrtThreeOverTwo=Math.sqrt(3)/2,v.twoOverSqrtThree=2/Math.sqrt(3),v.tileInnerRadius=v.tileOuterRadius*v.sqrtThreeOverTwo,v.tileShortLengthWithGap=2*v.tileInnerRadius+v.tileGap,v.tileLongLengthWithGap=2*v.tileOuterRadius+v.tileGap*v.twoOverSqrtThree},v.computeDependentValues(),m.config=v,window.hg||(window.hg={}),window.hg.HexGrid=m,console.log("HexGrid module loaded")}(),function(){function e(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].holdsContent&&e.grid.tiles[t].setColor(hg.HexGrid.config.tileHue+80,hg.HexGrid.config.tileSaturation,hg.HexGrid.config.tileLightness)}function t(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].element.setAttribute("opacity","0")}function i(){var e,t;e=this,e.contentAreaGuideLines=[],t=document.createElementNS(hg.util.svgNamespace,"line"),t.setAttribute("x1",e.grid.contentAreaLeft),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaLeft),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[0]=t,t=document.createElementNS(hg.util.svgNamespace,"line"),t.setAttribute("x1",e.grid.contentAreaRight),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaRight),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[1]=t}function n(){var e,t,i;for(e=this,e.tileParticleCenters=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileParticleCenters[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.tileParticleCenters[t].setAttribute("r","4"),e.tileParticleCenters[t].setAttribute("fill","gray"),e.grid.svg.appendChild(e.tileParticleCenters[t])}function r(){var e,t,i;for(e=this,e.tileAnchorLines=[],e.tileAnchorCenters=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileAnchorLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.tileAnchorLines[t].setAttribute("stroke","#bbbbbb"),e.tileAnchorLines[t].setAttribute("stroke-width","2"),e.grid.svg.appendChild(e.tileAnchorLines[t]),e.tileAnchorCenters[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.tileAnchorCenters[t].setAttribute("r","4"),e.tileAnchorCenters[t].setAttribute("fill","white"),e.grid.svg.appendChild(e.tileAnchorCenters[t])}function o(){var e,t,i;for(e=this,e.tileDisplacementCircles=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileDisplacementCircles[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.tileDisplacementCircles[t].setAttribute("r","80"),e.tileDisplacementCircles[t].setAttribute("opacity","0.4"),e.tileDisplacementCircles[t].setAttribute("fill","white"),e.grid.svg.appendChild(e.tileDisplacementCircles[t])}function a(){var e,t,i;for(e=this,e.tileInnerRadii=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileInnerRadii[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.tileInnerRadii[t].setAttribute("stroke","blue"),e.tileInnerRadii[t].setAttribute("stroke-width","1"),e.tileInnerRadii[t].setAttribute("fill","transparent"),e.grid.svg.appendChild(e.tileInnerRadii[t])}function l(){var e,t,i;for(e=this,e.tileOuterRadii=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileOuterRadii[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.tileOuterRadii[t].setAttribute("stroke","green"),e.tileOuterRadii[t].setAttribute("stroke-width","1"),e.tileOuterRadii[t].setAttribute("fill","transparent"),e.grid.svg.appendChild(e.tileOuterRadii[t])}function s(){var e,t,i,n,r,o,a;for(e=this,e.neighborLines=[],t=0,n=e.grid.tiles.length;n>t;t+=1)for(o=e.grid.tiles[t],e.neighborLines[t]=[],i=0,r=o.neighbors.length;r>i;i+=1)a=o.neighbors[i],a&&(e.neighborLines[t][i]=document.createElementNS(hg.util.svgNamespace,"line"),e.neighborLines[t][i].setAttribute("stroke","purple"),e.neighborLines[t][i].setAttribute("stroke-width","1"),e.grid.svg.appendChild(e.neighborLines[t][i]))}function c(){var e,t,i;for(e=this,e.forceLines=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.forceLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.forceLines[t].setAttribute("stroke","orange"),e.forceLines[t].setAttribute("stroke-width","2"),e.grid.svg.appendChild(e.forceLines[t])}function d(){var e,t,i;for(e=this,e.velocityLines=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.velocityLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.velocityLines[t].setAttribute("stroke","red"),e.velocityLines[t].setAttribute("stroke-width","2"),e.grid.svg.appendChild(e.velocityLines[t])}function u(){var e,t,i;for(e=this,e.indexTexts=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.indexTexts[t]=document.createElementNS(hg.util.svgNamespace,"text"),e.indexTexts[t].setAttribute("font-size","16"),e.indexTexts[t].setAttribute("fill","black"),e.indexTexts[t].innerHTML=e.grid.tiles[t].index,e.grid.svg.appendChild(e.indexTexts[t])}function g(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].holdsContent&&e.grid.tiles[t].setColor(hg.HexGrid.config.tileHue,hg.HexGrid.config.tileSaturation,hg.HexGrid.config.tileLightness)}function h(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].element.setAttribute("opacity","1")}function p(){var e,t,i;for(e=this,t=0,i=e.contentAreaGuideLines.length;i>t;t+=1)e.grid.svg.removeChild(e.contentAreaGuideLines[t]);e.contentAreaGuideLines=[]}function f(){var e,t,i;for(e=this,t=0,i=e.tileParticleCenters.length;i>t;t+=1)e.grid.svg.removeChild(e.tileParticleCenters[t]);e.tileParticleCenters=[]}function m(){var e,t,i;for(e=this,t=0,i=e.tileAnchorLines.length;i>t;t+=1)e.grid.svg.removeChild(e.tileAnchorLines[t]),e.grid.svg.removeChild(e.tileAnchorCenters[t]);e.tileAnchorLines=[],e.tileAnchorCenters=[]}function v(){var e,t,i;for(e=this,t=0,i=e.tileDisplacementCircles.length;i>t;t+=1)e.grid.svg.removeChild(e.tileDisplacementCircles[t]);e.tileDisplacementCircles=[]}function b(){var e,t,i;for(e=this,t=0,i=e.tileInnerRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileInnerRadii[t]);e.tileInnerRadii=[]}function C(){var e,t,i;for(e=this,t=0,i=e.tileOuterRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileOuterRadii[t]);e.tileOuterRadii=[]}function w(){var e,t,i,n,r;for(e=this,t=0,n=e.neighborLines.length;n>t;t+=1)for(i=0,r=e.neighborLines[t].length;r>i;i+=1)e.neighborLines[t][i]&&e.grid.svg.removeChild(e.neighborLines[t][i]);e.neighborLines=[]}function y(){var e,t,i;for(e=this,t=0,i=e.forceLines.length;i>t;t+=1)e.grid.svg.removeChild(e.forceLines[t]);e.forceLines=[]}function A(){var e,t,i;for(e=this,t=0,i=e.velocityLines.length;i>t;t+=1)e.grid.svg.removeChild(e.velocityLines[t]);e.velocityLines=[]}function x(){var e,t,i;for(e=this,t=0,i=e.indexTexts.length;i>t;t+=1)e.grid.svg.removeChild(e.indexTexts[t]);e.indexTexts=[]}function N(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileParticleCenters[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileParticleCenters[t].setAttribute("cy",e.grid.tiles[t].particle.py)}function R(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileAnchorLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.tileAnchorLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.tileAnchorLines[t].setAttribute("x2",e.grid.tiles[t].centerX),e.tileAnchorLines[t].setAttribute("y2",e.grid.tiles[t].centerY),e.tileAnchorCenters[t].setAttribute("cx",e.grid.tiles[t].centerX),e.tileAnchorCenters[t].setAttribute("cy",e.grid.tiles[t].centerY)}function L(){var e,t,i,n,r,o,a,l;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t].particle.px-e.grid.tiles[t].originalCenterX,r=e.grid.tiles[t].particle.py-e.grid.tiles[t].originalCenterY,o=180*Math.atan2(n,r)/Math.PI,a=Math.sqrt(n*n+r*r),l="hsl("+o+","+a/hg.WaveAnimationJob.config.displacementWavelength*100+"%,80%)",e.tileDisplacementCircles[t].setAttribute("fill",l),e.tileDisplacementCircles[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileDisplacementCircles[t].setAttribute("cy",e.grid.tiles[t].particle.py)}function T(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileInnerRadii[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileInnerRadii[t].setAttribute("cy",e.grid.tiles[t].particle.py),e.tileInnerRadii[t].setAttribute("r",e.grid.tiles[t].outerRadius*hg.HexGrid.config.sqrtThreeOverTwo)}function I(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileOuterRadii[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileOuterRadii[t].setAttribute("cy",e.grid.tiles[t].particle.py),e.tileOuterRadii[t].setAttribute("r",e.grid.tiles[t].outerRadius)}function S(){var e,t,i,n,r,o,a;for(e=this,t=0,n=e.grid.tiles.length;n>t;t+=1)for(o=e.grid.tiles[t],i=0,r=o.neighbors.length;r>i;i+=1)a=o.neighbors[i],a&&(e.neighborLines[t][i].setAttribute("x1",o.particle.px),e.neighborLines[t][i].setAttribute("y1",o.particle.py),e.neighborLines[t][i].setAttribute("x2",a.tile.particle.px),e.neighborLines[t][i].setAttribute("y2",a.tile.particle.py))}function D(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.forceLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.forceLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.forceLines[t].setAttribute("x2",e.grid.tiles[t].particle.px+e.grid.tiles[t].particle.fx*G.forceLineLengthMultiplier),e.forceLines[t].setAttribute("y2",e.grid.tiles[t].particle.py+e.grid.tiles[t].particle.fy*G.forceLineLengthMultiplier)}function O(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.velocityLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.velocityLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.velocityLines[t].setAttribute("x2",e.grid.tiles[t].particle.px+e.grid.tiles[t].particle.vx*G.velocityLineLengthMultiplier),e.velocityLines[t].setAttribute("y2",e.grid.tiles[t].particle.py+e.grid.tiles[t].particle.vy*G.velocityLineLengthMultiplier)}function P(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.indexTexts[t].setAttribute("x",e.grid.tiles[t].particle.px-10),e.indexTexts[t].setAttribute("y",e.grid.tiles[t].particle.py+6)}function M(){var e,t;e=this;for(t in e.annotations)e.annotations[t].enabled&&e.annotations[t].update.call(e)}function X(e,t){var i;i=this,i.annotations[e].enabled=t,t?i.annotations[e].create.call(i):i.annotations[e].destroy.call(i)}function E(){var e,t;e=this;for(t in e.annotations)e.annotations[t].enabled&&e.annotations[t].create.call(e)}function J(){var e,t;e=this;for(t in e.annotations)e.annotations[t].destroy.call(e)}function H(e){var t=this;t.grid=e,t.annotations=hg.util.shallowCopy(G.annotations),t.contentAreaGuideLines=[],t.tileParticleCenters=[],t.tileAnchorLines=[],t.tileAnchorCenters=[],t.tileDisplacementCircles=[],t.tileInnerRadii=[],t.tileOuterRadii=[],t.neighborLines=[],t.forceLines=[],t.velocityLines=[],t.indexTexts=[],t.toggleAnnotationEnabled=X,t.update=M,t.createAnnotations=E,t.destroyAnnotations=J}var G={};G.forceLineLengthMultiplier=4e3,G.velocityLineLengthMultiplier=300,G.annotations={contentTiles:{enabled:!0,create:e,destroy:g,update:function(){}},transparentTiles:{enabled:!1,create:t,destroy:h,update:function(){}},tileAnchorCenters:{enabled:!0,create:r,destroy:m,update:R},tileParticleCenters:{enabled:!1,create:n,destroy:f,update:N},tileDisplacementColors:{enabled:!1,create:o,destroy:v,update:L},tileInnerRadii:{enabled:!1,create:a,destroy:b,update:T},tileOuterRadii:{enabled:!1,create:l,destroy:C,update:I},tileIndices:{enabled:!1,create:u,destroy:x,update:P},tileForces:{enabled:!0,create:c,destroy:y,update:D},tileVelocities:{enabled:!0,create:d,destroy:A,update:O},tileNeighborConnections:{enabled:!0,create:s,destroy:w,update:S},contentAreaGuidelines:{enabled:!1,create:i,destroy:p,update:function(){}}},H.config=G,window.hg||(window.hg={}),window.hg.HexGridAnnotations=H,console.log("HexGridAnnotations module loaded")}(),function(){function e(){function e(e){!e.toElement&&!e.relatedTarget}function t(){}function i(){}function n(){}var r;r=this,document.addEventListener("mouseout",e,!1),document.addEventListener("mousemove",t,!1),document.addEventListener("mousedown",i,!1),document.addEventListener("mouseup",n,!1)}function t(t){var i=this;i.grid=t,e.call(i)}var i={};t.config=i,window.hg||(window.hg={}),window.hg.HexInput=t,console.log("HexInput module loaded")}(),function(){function e(){var e;e=this,e.vertexDeltas=n(e.outerRadius,e.isVertical),e.vertices=r(e.centerX,e.centerY,e.vertexDeltas),e.element=document.createElementNS(hg.util.svgNamespace,"polygon"),e.svg.appendChild(e.element),l.call(e,e.vertices),s.call(e,e.hue,e.saturation,e.lightness)}function t(e){var t;t=this,t.particle={},t.particle.px=t.centerX,t.particle.py=t.centerY,t.particle.vx=0,t.particle.vy=0,t.particle.fx=0,t.particle.fy=0,t.particle.m=e,t.particle.forceAccumulatorX=0,t.particle.forceAccumulatorY=0}function i(){var e,t;for(f=Math.PI/3,m=Math.PI/6,C=[],w=[],e=0,t=0;6>e;e+=1,t+=f)C[e]=Math.sin(t),w[e]=Math.cos(t);for(v=[],b=[],e=0,t=m;6>e;e+=1,t+=f)v[e]=Math.sin(t),b[e]=Math.cos(t)}function n(e,t){var i,n,r,o,a;for(t?(r=v,o=b):(r=C,o=w),i=0,n=0,a=[];6>i;i+=1)a[n++]=e*o[i],a[n++]=e*r[i];return a}function r(e,t,i){var n,r,o;for(n=0,r=0,o=[];6>n;n+=1)o[r]=e+i[r++],o[r]=t+i[r++];return o}function o(e){var t=this;t.tileData=e,t.holdsContent=!!e}function a(e){var t,i,n,r,o,a,l,s;for(t=this,t.neighbors=[],i=0,n=e.length;n>i;i+=1)if(a=e[i]){if(l=t.centerX-a.centerX,s=t.centerY-a.centerY,t.neighbors[i]={tile:a,restLength:Math.sqrt(l*l+s*s),neighborsRelationshipObj:null,springForceX:0,springForceY:0},a.neighbors)for(r=0,o=a.neighbors.length;o>r;r+=1)a.neighbors[r]&&a.neighbors[r].tile===t&&(t.neighbors[i].neighborsRelationshipObj=a.neighbors[r],a.neighbors[r].neighborsRelationshipObj=t.neighbors[i])}else t.neighbors[i]=null}function l(e){var t,i,n;for(t=this,i=0,n="";12>i;)n+=e[i++]+","+e[i++]+" ";t.element.setAttribute("points",n)}function s(e,t,i){var n,r;n=this,r="hsl("+e+","+t+"%,"+i+"%)",n.element.setAttribute("fill",r)}function c(e,t){var i,n,o,a,l,s,c,d,u,g,h,f,m;if(i=this,!i.particle.isFixed){for(i.particle.forceAccumulatorX+=-p.dragCoeff*i.particle.vx,i.particle.forceAccumulatorY+=-p.dragCoeff*i.particle.vy,n=0,o=i.neighbors.length;o>n;n+=1)a=i.neighbors[n],a&&(a.springForceX?(i.particle.forceAccumulatorX+=a.springForceX,i.particle.forceAccumulatorY+=a.springForceY,a.springForceX=0,a.springForceY=0):(l=a.tile.particle.px-i.particle.px,s=a.tile.particle.py-i.particle.py,c=a.tile.particle.vx-i.particle.vx,d=a.tile.particle.vy-i.particle.vy,u=l*c+s*d,g=Math.sqrt(l*l+s*s),h=(p.neighborSpringCoeff*(g-a.restLength)+p.neighborDampingCoeff*u/g)/g,f=l*h,m=s*h,i.particle.forceAccumulatorX+=f,i.particle.forceAccumulatorY+=m,a.neighborsRelationshipObj.springForceX=-f,a.neighborsRelationshipObj.springForceY=-m));l=i.centerX-i.particle.px,s=i.centerY-i.particle.py,g=Math.sqrt(l*l+s*s),g>0&&(c=-i.particle.vx,d=-i.particle.vy,u=l*c+s*d,h=i.isBorderTile?(p.borderAnchorSpringCoeff*g+p.borderAnchorDampingCoeff*u/g)/g:(p.innerAnchorSpringCoeff*g+p.innerAnchorDampingCoeff*u/g)/g,f=l*h,m=s*h,i.particle.forceAccumulatorX+=f,i.particle.forceAccumulatorY+=m),i.particle.fx=i.particle.forceAccumulatorX/i.particle.m*t,i.particle.fy=i.particle.forceAccumulatorY/i.particle.m*t,i.particle.px+=i.particle.vx*t,i.particle.py+=i.particle.vy*t,i.particle.vx+=i.particle.fx,i.particle.vy+=i.particle.fy;{var v=i.particle;v.px,v.py,v.vx,v.vy,v.fx,v.fy,v.forceAccumulatorX,v.forceAccumulatorY}0===i.index,isNaN(i.particle.px)&&console.log("tile.particle.px="+i.particle.px),isNaN(i.particle.py)&&console.log("tile.particle.py="+i.particle.py),isNaN(i.particle.vx)&&console.log("tile.particle.vx="+i.particle.vx),isNaN(i.particle.vy)&&console.log("tile.particle.vy="+i.particle.vy),isNaN(i.particle.fx)&&console.log("tile.particle.fx="+i.particle.fx),isNaN(i.particle.fy)&&console.log("tile.particle.fy="+i.particle.fy),i.particle.fx=i.particle.fx<p.forceSuppressionLowerThreshold&&i.particle.fx>p.forceSuppressionThresholdNegative?0:i.particle.fx,i.particle.fy=i.particle.fy<p.forceSuppressionLowerThreshold&&i.particle.fy>p.forceSuppressionThresholdNegative?0:i.particle.fy,i.particle.vx=i.particle.vx<p.velocitySuppressionLowerThreshold&&i.particle.vx>p.velocitySuppressionThresholdNegative?0:i.particle.vx,i.particle.vy=i.particle.vy<p.velocitySuppressionLowerThreshold&&i.particle.vy>p.velocitySuppressionThresholdNegative?0:i.particle.vy,i.particle.forceAccumulatorX=0,i.particle.forceAccumulatorY=0,i.vertices=r(i.particle.px,i.particle.py,i.vertexDeltas)}}function d(){var e;e=this,l.call(e,e.vertices)}function u(e,t){var i;i=this,i.particle.forceAccumulatorX+=e,i.particle.forceAccumulatorY+=t}function g(e,t){var i;i=this,i.particle.isFixed=!0,i.particle.px=e,i.particle.py=t}function h(i,n,r,h,p,f,m,v,b,C,w,y,A){var x=this;x.svg=i,x.element=null,x.centerX=n,x.centerY=r,x.originalCenterX=n,x.originalCenterY=r,x.outerRadius=h,x.isVertical=p,x.hue=f,x.saturation=m,x.lightness=v,x.tileData=b,x.holdsContent=!!b,x.index=C,x.isMarginTile=w,x.isBorderTile=y,x.neighbors=null,x.vertices=null,x.vertexDeltas=null,x.particle=null,x.setContent=o,x.setNeighborTiles=a,x.setColor=s,x.setVertices=l,x.update=c,x.draw=d,x.applyExternalForce=u,x.fixPosition=g,e.call(x),t.call(x,A)}var p,f,m,v,b,C,w;p={},p.dragCoeff=.01,p.neighborSpringCoeff=1e-5,p.neighborDampingCoeff=.001,p.innerAnchorSpringCoeff=4e-5,p.innerAnchorDampingCoeff=.001,p.borderAnchorSpringCoeff=4e-5,p.borderAnchorDampingCoeff=.001,p.forceSuppressionLowerThreshold=5e-4,p.velocitySuppressionLowerThreshold=5e-4,p.computeDependentValues=function(){p.forceSuppressionThresholdNegative=-p.forceSuppressionLowerThreshold,p.velocitySuppressionThresholdNegative=-p.velocitySuppressionLowerThreshold},p.computeDependentValues(),h.config=p,window.hg||(window.hg={}),window.hg.HexTile=h,i(),console.log("HexTile module loaded")}(),function(){function e(e,i,n){var r,o,l;return r=new hg.HexGrid(e,i,n),a.grids.push(r),hg.animator.startJob(r),l=a.grids.length-1,o=new hg.WaveAnimationJob(r),a.waveAnimationJobs.push(o),t(l),l}function t(e){var t=a.waveAnimationJobs[e];t.isComplete||hg.animator.cancelJob(t),t.init(),hg.animator.startJob(t)}function i(){hg.animator.startJob(job)}function n(e){var t=hg.LineAnimationJob.createRandomLineAnimationJob(a.grids[e]);hg.animator.startJob(t)}function r(){hg.animator.startJob(job)}function o(){a.grids.forEach(function(e,i){e.resize(),t(i)})}var a={},l={};a.grids=[],a.waveAnimationJobs=[],a.config=l,a.createNewHexGrid=e,a.restartWaveAnimation=t,a.createLinesRadiateAnimation=i,a.createRandomLineAnimation=n,a.createShimmerRadiateAnimation=r,a.resize=o,window.hg||(window.hg={}),window.hg.controller=a,window.addEventListener("resize",o,!1),console.log("controller module loaded")}(),function(){function e(e,t,i){e.forEach(function(e){t.forEach(function(t){T.listen(e,t,i)})})}function t(e,t,i,n){var r=document.createElement(e);return t&&t.appendChild(r),i&&(r.id=i),n&&n.forEach(function(e){l(r,e)}),r}function i(e,t){var i,n;return i=e.className.indexOf(t),i>=0&&(0===i||" "===e.className[i-1])&&(n=i+t.length,n===e.className.length||" "===e.className[n])?!0:!1}function n(e,t,n){"undefined"==typeof n?i(e,t)?s(e,t):l(e,t):n?l(e,t):s(e,t)}function r(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return t-=T.getScrollLeft(),i-=T.getScrollTop(),{x:t,y:i}}function o(){var e,t;return"undefined"!=typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{w:e,h:t}}function a(e,t){return t&&t.parentNode===e?(e.removeChild(t),!0):!1}function l(e,t){e.className+=" "+t}function s(e,t){e.className=e.className.split(" ").filter(function(e){return e!==t}).join(" ")}function c(e){e.className=""}function d(e,t,i,n,r){var o,a;return i=i||document.getElementsByTagName("body")[0],o=T.createElement(t,null,n,r),o.style.position="absolute",o.style.visibility="hidden",o.style.whiteSpace="nowrap",i.appendChild(o),o.innerHTML=e,a=o.clientWidth,i.removeChild(o),a}function u(e){var t,i;i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+i.join("&")}function g(e,t){var i,n;return t=encodeURIComponent(t),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+t+"=([^&#]*)","i"),n=i.exec(e),null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))}function h(e,t){e.style.transitionDuration=t+"s",e.style.WebkitTransitionDuration=t+"s",e.style.MozTransitionDuration=t+"s",e.style.msTransitionDuration=t+"s",e.style.OTransitionDuration=t+"s"}function p(e,t){e.style.transitionDelay=t+"s",e.style.WebkitTransitionDelay=t+"s",e.style.MozTransitionDelay=t+"s",e.style.msTransitionDelay=t+"s",e.style.OTransitionDelay=t+"s"}function f(e,t){var i,n,r;for(i=e.querySelectorAll("."+t),n=0,r=i.length;r>n;n++)e.removeChild(i[n])}function m(e,t){var i="cubic-bezier("+t.p1x+","+t.p1y+","+t.p2x+","+t.p2y+")";e.style.transitionTimingFunction=i,e.style.WebkitTransitionTimingFunction=i,e.style.MozTransitionTimingFunction=i,e.style.msTransitionTimingFunction=i,e.style.OTransitionTimingFunction=i}function v(e,t){var i,n,r,o,a,l,s;return r=1-e,o=r*r*r,a=3*e*r*r,l=3*e*e*r,s=e*e*e,i=t[0].x*o+t[1].x*a+t[2].x*l+t[3].x*s,n=t[0].y*o+t[1].y*a+t[2].y*l+t[3].y*s,{x:i,y:n}}function b(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function C(e){var t,i,n,r;for(t=0,n=e.length;n>t;t+=1)i=parseInt(Math.random()*n),r=e[i],e[i]=e[t],e[t]=r;return e}function w(e,t,i,n){var r,o,a,l,s,c,d,u,g,h,p;if(r=!1,n){if(i.length<6)return r;u=i[i.length-4],g=i[i.length-3]}else{if(i.length<4)return r;u=i[i.length-2],g=i[i.length-1]}for(o=0,a=i.length-2;a>o;o+=2)h=i[o],p=i[o+1],h>u?(l=u,s=g,c=h,d=p):(l=h,s=p,c=u,d=g),e>h==u>=e&&(d-s)*(e-l)>(t-s)*(c-l)&&(r=!r),u=h,g=p;return r}function y(e){var t,i;i={};for(t in e)i[t]=e[t];return i}function A(e){var t=e.s*(e.l<.5?e.l:1-e.l);return{h:e.h,s:2*t/(e.l+t),v:e.l+t}}function x(e){var t=(2-e.s)*e.v;return{h:e.h,s:e.s*e.v/(1>t?t:1.9999999-t),l:.5*t}}var N={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1+--e*e*e},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}},R={linear:function(e){return e},easeInQuad:function(e){return Math.sqrt(e)},easeOutQuad:function(e){return 1-Math.sqrt(1-e)},easeInOutQuad:function(e){return.5>e?Math.sqrt(.5*e):1-.70710678*Math.sqrt(1-e)}},L=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,16)}).bind(window),T={listenToMultipleForMultiple:e,createElement:t,containsClass:i,toggleClass:n,getPageOffset:r,getViewportSize:o,removeChildIfPresent:a,addClass:l,removeClass:s,clearClasses:c,getTextWidth:d,encodeQueryString:u,getQueryStringParameterValue:g,setTransitionDurationSeconds:h,setTransitionDelaySeconds:p,removeChildrenWithClass:f,setTransitionCubicBezierTimingFunction:m,easingFunctions:N,inverseEasingFunctions:R,requestAnimationFrame:L,getXYFromPercentWithBezier:v,applyTransform:b,shuffle:C,isPointInsidePolyline:w,shallowCopy:y,hsvToHsl:x,hslToHsv:A,svgNamespace:"http://www.w3.org/2000/svg"};window.hg||(window.hg={}),window.hg.util=T,console.log("util module loaded")}(),function(){function e(){}function t(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function i(){var t=this;e.call(t)}function n(){var e=this;e.onComplete(!1),e.isComplete=!0}function r(e,r){var o=this;o.grid=e,o.startTime=0,o.isComplete=!1,o.start=t,o.update=i,o.cancel=n,o.onComplete=r,console.log("AnimationJob created")}window.hg||(window.hg={}),window.hg.AnimationJob=r,console.log("AnimationJob module loaded")}(),function(){function e(){var e;e=this,e.startHue=360*Math.random(),e.endHue=360*Math.random()}function t(){var e;e=this,e.polyline=document.createElementNS(hg.util.svgNamespace,"polyline"),e.polyline.setAttribute("fill-opacity","0"),e.grid.svg.appendChild(e.polyline)}function i(){var e,t,i;e=this,t=e.ellapsedTime/e.duration,i=1-t,e.currentHue=i*e.startHue+t*e.endHue,e.currentSaturation=i*e.startSaturation+t*e.endSaturation,e.currentLightness=i*e.startLightness+t*e.endLightness,e.currentOpacity=i*e.startOpacity+t*e.endOpacity}function n(){var e;
e=this,console.log("LineAnimationJob completed"),e.polyline&&(e.grid.svg.removeChild(e.polyline),e.polyline=null),e.tiles=[],e.corners=[],e.direction=Number.NaN,e.currentCornerIndex=Number.NaN,e.hasReachedEdge=!0,e.isComplete=!0}function r(){var e;e=this,e.hasReachedEdge=e.direction===(e.corners[e.currentCornerIndex]+3)%6?!1:!e.lowerNeighbors[e.currentCornerIndex]||!e.upperNeighbors[e.currentCornerIndex]}function o(){var e,t,i;e=this,e.grid.isVertical?(t=(e.corners[e.currentCornerIndex]+5)%6,i=e.corners[e.currentCornerIndex]):(t=e.corners[e.currentCornerIndex],i=(e.corners[e.currentCornerIndex]+1)%6),e.lowerNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighbors[t],e.upperNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighbors[i],e.lowerNeighborCorners[e.currentCornerIndex]=(e.corners[e.currentCornerIndex]+1)%6,e.upperNeighborCorners[e.currentCornerIndex]=(e.corners[e.currentCornerIndex]+5)%6}function a(){var e,t,i,n,a,l,s,c,d;switch(e=this,t=(e.corners[e.currentCornerIndex]-e.direction+6)%6){case 0:i=f.sameDirectionProb,n=f.distantSidewaysDirectionProb,a=f.distantSidewaysDirectionProb;break;case 1:i=f.closeSidewaysDirectionProb,n=f.closeSidewaysDirectionProb,a=f.oppositeDirectionProb;break;case 2:i=f.distantSidewaysDirectionProb,n=f.sameDirectionProb,a=f.distantSidewaysDirectionProb;break;case 3:i=f.oppositeDirectionProb,n=f.closeSidewaysDirectionProb,a=f.closeSidewaysDirectionProb;break;case 4:i=f.distantSidewaysDirectionProb,n=f.distantSidewaysDirectionProb,a=f.sameDirectionProb;break;case 5:i=f.closeSidewaysDirectionProb,n=f.oppositeDirectionProb,a=f.closeSidewaysDirectionProb;break;default:throw new Error("Invalid state: cornerConfig="+t)}do l=Math.random(),s=i>l?0:i+n>l?1:2;while(s===e.latestDirection%6);switch(e.latestDirection=s,s){case 0:e.grid.isVertical?(c=(e.corners[e.currentCornerIndex]+1)%6,d=e.tiles[e.currentCornerIndex].neighbors[(e.corners[e.currentCornerIndex]+5)%6].tile):(c=(e.corners[e.currentCornerIndex]+1)%6,d=e.tiles[e.currentCornerIndex].neighbors[e.corners[e.currentCornerIndex]].tile);break;case 1:c=(e.corners[e.currentCornerIndex]+5)%6,d=e.tiles[e.currentCornerIndex];break;case 2:c=(e.corners[e.currentCornerIndex]+1)%6,d=e.tiles[e.currentCornerIndex];break;default:throw new Error("Invalid state: relativeDirection="+s)}e.currentCornerIndex=e.corners.length,e.corners[e.currentCornerIndex]=c,e.tiles[e.currentCornerIndex]=d,o.call(e),r.call(e)}function l(){var e,t,i,r,o,l;for(e=this,t=e.ellapsedTime/e.lineSidePeriod*hg.HexGrid.config.tileOuterRadius,o=parseInt(t/hg.HexGrid.config.tileOuterRadius)+1;o>=e.corners.length&&!e.hasReachedEdge;)a.call(e);i=t%hg.HexGrid.config.tileOuterRadius,r=(e.lineLength-i+hg.HexGrid.config.tileOuterRadius)%hg.HexGrid.config.tileOuterRadius,e.frontSegmentEndRatio=i/hg.HexGrid.config.tileOuterRadius,e.backSegmentStartRatio=1-r/hg.HexGrid.config.tileOuterRadius,e.isShort=e.lineLength<hg.HexGrid.config.tileOuterRadius,e.isStarting=t<e.lineLength,e.isStarting?(e.segmentsIncludedCount=o,e.completeSegmentsIncludedCount=e.segmentsIncludedCount-1,console.log(">>>>>1.1")):e.hasReachedEdge?e.isShort?(e.segmentsIncludedCount=1,e.completeSegmentsIncludedCount=0,console.log(">>>>>2.1")):(l=hg.HexGrid.config.tileOuterRadius*(o-e.currentCornerIndex-1),l>e.lineLength&&n.call(e),e.segmentsIncludedCount=(e.lineLength-l)%hg.HexGrid.config.tileOuterRadius,e.segmentsIncludedCount=e.segmentsIncludedCount<0?0:parseInt(e.segmentsIncludedCount)+1,e.completeSegmentsIncludedCount=e.segmentsIncludedCount-1,console.log(">>>>>2.2")):e.isShort?t%hg.HexGrid.config.tileOuterRadius-i+f.epsilon<2*f.epsilon?(e.segmentsIncludedCount=1,e.completeSegmentsIncludedCount=0,console.log(">>>>>3.1")):(e.segmentsIncludedCount=2,e.completeSegmentsIncludedCount=0,console.log(">>>>>3.2")):(e.segmentsIncludedCount=parseInt((e.lineLength-i-r+f.epsilon)%hg.HexGrid.config.tileOuterRadius)+2,e.completeSegmentsIncludedCount=e.segmentsIncludedCount-2,console.log(">>>>>3.3"))}function s(){var e,t,i,n,r,o,a,l;for(e=this,o=[],t=0,i=e.corners.length;i>t;t+=1)o[t]=c(e.tiles[t],e.corners[t],e.lowerNeighbors[t],e.upperNeighbors[t],e.lowerNeighborCorners[t],e.upperNeighborCorners[t]);for(a=[],n=e.segmentsIncludedCount,l=e.currentCornerIndex,e.hasReachedEdge||(a[n]={x:o[l].x*e.frontSegmentEndRatio+o[l-1].x*(1-e.frontSegmentEndRatio),y:o[l].y*e.frontSegmentEndRatio+o[l-1].y*(1-e.frontSegmentEndRatio)},n-=1,l-=1),t=0,i=e.completeSegmentsIncludedCount+1;i>t;t+=1,n-=1,l-=1)a[n]=o[l];for(e.isStarting||(a[0]={x:o[l+1].x*e.backSegmentStartRatio+o[l].x*(1-e.backSegmentStartRatio),y:o[l+1].y*e.backSegmentStartRatio+o[l].y*(1-e.backSegmentStartRatio)}),r="",t=0,i=a.length;i>t;t+=1)r+=a[t].x+","+a[t].y+" ";e.polyline.setAttribute("points",r),e.polyline.setAttribute("stroke","hsl("+e.currentHue+","+e.currentSaturation+"%,"+e.currentLightness+"%)"),e.polyline.setAttribute("stroke-opacity",e.currentOpacity),e.polyline.setAttribute("stroke-width",e.lineWidth)}function c(e,t,i,n,r,o){var a,l,s;return i?n?(a=3,l=e.particle.px+i.tile.particle.px+n.tile.particle.px,s=e.particle.py+i.tile.particle.py+n.tile.particle.py):(a=2,l=e.vertices[2*t]+i.tile.vertices[2*r],s=e.vertices[2*t+1]+i.tile.vertices[2*r+1]):n?(a=2,l=e.vertices[2*t]+n.tile.vertices[2*o],s=e.vertices[2*t+1]+n.tile.vertices[2*o+1]):(a=1,l=e.vertices[2*t],s=e.vertices[2*t+1]),{x:l/a,y:s/a}}function d(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function u(e){var t=this;return t.ellapsedTime=e-t.startTime,t.ellapsedTime>=t.duration?void n.call(t):(i.call(t),l.call(t),void s.call(t))}function g(){var e;e=this,n.call(e)}function h(i,n,r,a){var l=this;l.grid=i,l.tiles=[n],l.corners=[r],l.lowerNeighbors=[],l.upperNeighbors=[],l.lowerNeighborCorners=[],l.upperNeighborCorners=[],l.direction=a,l.currentCornerIndex=0,l.frontSegmentEndRatio=Number.NaN,l.backSegmentStartRatio=Number.NaN,l.latestDirection=a,l.polyline=null,l.hasReachedEdge=!1,l.startTime=0,l.ellapsedTime=0,l.isComplete=!1,l.startHue=Number.NaN,l.endHue=Number.NaN,l.currentHue=Number.NaN,l.duration=f.duration,l.lineWidth=f.lineWidth,l.lineLength=f.lineLength,l.lineSidePeriod=f.lineSidePeriod,l.startSaturation=f.startSaturation,l.startLightness=f.startLightness,l.startOpacity=f.startOpacity,l.endSaturation=f.endSaturation,l.endLightness=f.endLightness,l.endOpacity=f.endOpacity,l.sameDirectionProb=f.sameDirectionProb,l.currentSaturation=f.startSaturation,l.currentLightness=f.startLightness,l.currentOpacity=f.startOpacity,l.start=d,l.update=u,l.cancel=g,o.call(l),e.call(l),t.call(l),console.log("LineAnimationJob created: tileIndex="+n.index+", corner="+r+", direction="+a)}function p(e){var t,i,n;return t=e.borderTiles[parseInt(Math.random()*e.borderTiles.length)],e.isVertical?t.neighbors[4]?t.neighbors[1]?t.neighbors[0]?(i=Math.random()<.5?2:4,n=0):(i=Math.random()<.5?1:5,n=3):(i=Math.random()<.5?0:3,n=t.originalCenterY<e.centerY?4:5):(i=Math.random()<.5?0:3,n=t.originalCenterY<e.centerY?2:1):t.neighbors[0]?t.neighbors[3]?t.neighbors[4]?(i=Math.random()<.5?0:2,n=4):(i=Math.random()<.5?3:5,n=1):(i=Math.random()<.5?1:4,n=t.originalCenterX<e.centerX?0:5):(i=Math.random()<.5?1:4,n=t.originalCenterX<e.centerX?2:3),new h(e,t,i,n)}var f={};f.duration=3200,f.lineWidth=8,f.lineLength=200,f.lineSidePeriod=300,f.startSaturation=100,f.startLightness=70,f.startOpacity=.8,f.endSaturation=50,f.endLightness=90,f.endOpacity=0,f.sameDirectionProb=.7,f.oppositeDirectionProb=0,f.epsilon=1e-5,f.computeDependentValues=function(){f.distantSidewaysDirectionProb=(1-f.sameDirectionProb)/2,f.closeSidewaysDirectionProb=(1-f.oppositeDirectionProb)/2},f.computeDependentValues(),h.config=f,h.createRandomLineAnimationJob=p,window.hg||(window.hg={}),window.hg.LineAnimationJob=h,console.log("LineAnimationJob module loaded")}(),function(){function e(){var e,t;for(e=this,e.lineAnimationJobs=[],t=0;6>t;t+=1)e.lineAnimationJobs[t]=new hg.LineAnimationJob(e.grid,e.tile,t,t),e.lineAnimationJobs[t].duration=a.duration,e.lineAnimationJobs[t].lineWidth=a.lineWidth,e.lineAnimationJobs[t].lineLength=a.lineLength,e.lineAnimationJobs[t].lineSidePeriod=a.lineSidePeriod,e.lineAnimationJobs[t].startSaturation=a.startSaturation,e.lineAnimationJobs[t].startLightness=a.startLightness,e.lineAnimationJobs[t].startOpacity=a.startOpacity,e.lineAnimationJobs[t].endSaturation=a.endSaturation,e.lineAnimationJobs[t].endLightness=a.endLightness,e.lineAnimationJobs[t].endOpacity=a.endOpacity,e.lineAnimationJobs[t].sameDirectionProb=a.sameDirectionProb}function t(){var e,t,i;for(e=this,t=0,i=e.lineAnimationJobs.length;i>t;t+=1){if(!e.lineAnimationJobs[t].isComplete)return;e.lineAnimationJobs.splice(t,1)}console.log("LinesRadiateAnimationJob completed"),e.isComplete=!0}function i(){var e,t,i;for(e=this,e.startTime=Date.now(),e.isComplete=!1,t=0,i=e.lineAnimationJobs.length;i>t;t+=1)e.lineAnimationJobs[t].start()}function n(e,i){var n,r,o;for(n=this,r=0,o=n.lineAnimationJobs.length;o>r;r+=1)n.lineAnimationJobs[r].update(e,i);t.call(n)}function r(){var e,t,i;for(e=this,t=0,i=e.lineAnimationJobs.length;i>t;t+=1)e.lineAnimationJobs[t].cancel();e.lineAnimationJobs=[],e.isComplete=!0}function o(t,o){var a=this;a.grid=t,a.tile=o,a.startTime=0,a.isComplete=!1,a.lineAnimationJobs=null,a.start=i,a.update=n,a.cancel=r,e.call(a),console.log("LinesRadiateAnimationJob created: tileIndex="+o.index)}var a={};a.duration=900,a.lineWidth=6,a.lineLength=140,a.lineSidePeriod=200,a.startSaturation=100,a.startLightness=70,a.startOpacity=.8,a.endSaturation=50,a.endLightness=90,a.endOpacity=0,a.sameDirectionProb=.85,o.config=a,window.hg||(window.hg={}),window.hg.LinesRadiateAnimationJob=o,console.log("LinesRadiateAnimationJob module loaded")}(),function(){function e(){}function t(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function i(){var t=this;e.call(t)}function n(){var e=this;e.isComplete=!0}function r(e){var r=this;r.grid=e,r.startTime=0,r.isComplete=!1,r.start=t,r.update=i,r.cancel=n,console.log("ShimmerRadiateAnimationJob created")}var o={};r.config=o,window.hg||(window.hg={}),window.hg.ShimmerRadiateAnimationJob=r,console.log("ShimmerRadiateAnimationJob module loaded")}(),function(){function e(){var e,t,i,n,r,o,l,s;for(e=this,s=a.wavelength/2,t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t],o=n.originalCenterX-a.originX,l=n.originalCenterY-a.originY,r=Math.sqrt(o*o+l*l)+a.wavelength,n.waveProgressOffset=-(r%a.wavelength-s)/s}function t(e,t){var i,n;i=this,n=Math.sin((((e+1+t.waveProgressOffset)%2+2)%2-1)*Math.PI),t.centerX=t.originalCenterX+a.tileDeltaX*n,t.centerY=t.originalCenterY+a.tileDeltaY*n}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;for(i=this,n=(e+a.halfPeriod)/a.period%2-1,r=0,o=i.grid.tiles.length;o>r;r+=1)t.call(i,n,i.grid.tiles[r])}function r(){var e=this;e.isComplete=!0}function o(t){var o=this;o.grid=t,o.startTime=0,o.isComplete=!1,o.start=i,o.update=n,o.cancel=r,o.init=function(){e.call(o)},o.init(),console.log("WaveAnimationJob created")}var a={};a.period=3200,a.tileDeltaX=-15,a.tileDeltaY=-a.tileDeltaX*Math.sqrt(3),a.wavelength=1800,a.originX=0,a.originY=0,a.displacementWavelength=Math.sqrt(a.tileDeltaX*a.tileDeltaX+a.tileDeltaY*a.tileDeltaY),a.halfPeriod=a.period/2,o.config=a,window.hg||(window.hg={}),window.hg.WaveAnimationJob=o,console.log("WaveAnimationJob module loaded")}(),function(){function e(){var i,n;i=Date.now(),n=i-a.previousTime,n=n>l.deltaTimeUpperThreshold?l.deltaTimeUpperThreshold:n,a.isLooping=!0,a.isPaused?a.isLooping=!1:(t(i,n),hg.util.requestAnimationFrame(e)),a.previousTime=i}function t(e,t){var n,r;for(n=0,r=a.jobs.length;r>n;n+=1)a.jobs[n].update(e,t),a.jobs[n].isComplete&&(i(a.jobs[n],n),n--,r--)}function i(e,t){var i;if("number"==typeof t)a.jobs.splice(t,1);else for(t=0,i=a.jobs.length;i>t;t+=1)if(a.jobs[t]===e){a.jobs.splice(t,1);break}0===a.jobs.length&&(a.isPaused=!0)}function n(){a.isPaused=!1,a.isLooping||(a.previousTime=Date.now(),e())}function r(e){console.log("AnimationJob starting: "+e.constructor.name),e.start(),a.jobs.push(e),n()}function o(e){console.log("AnimationJob cancelling: "+e.constructor.name),e.cancel(),i(e)}var a={},l={};l.deltaTimeUpperThreshold=200,a.jobs=[],a.previousTime=Date.now(),a.isLooping=!1,a.isPaused=!0,a.startJob=r,a.cancelJob=o,a.config=l,window.hg||(window.hg={}),window.hg.animator=a,console.log("animator module loaded")}();