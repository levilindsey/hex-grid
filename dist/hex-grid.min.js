"use strict";!function(){function e(e,a,s){var l,c,u,d;return l=new hg.Grid(e,a,s),C.grids.push(l),hg.animator.startJob(l),c=C.grids.length-1,l.index=c,i(c),n(c),r(c),o(c),u=l.annotations,hg.animator.startJob(u),C.annotations.push(u),d=new hg.Input(l),C.inputs.push(d),t(c),c}function t(e){hg.HighlightHoverJob.config.isRecurring&&C.toggleHighlightHoverJobRecurrence(e,!0,hg.HighlightHoverJob.config.avgDelay,hg.HighlightHoverJob.config.delayDeviationRange),hg.HighlightRadiateJob.config.isRecurring&&C.toggleHighlightRadiateJobRecurrence(e,!0,hg.HighlightRadiateJob.config.avgDelay,hg.HighlightRadiateJob.config.delayDeviationRange),hg.LineJob.config.isRecurring&&C.toggleRandomLineJobRecurrence(e,!0,hg.LineJob.config.avgDelay,hg.LineJob.config.delayDeviationRange),hg.LinesRadiateJob.config.isRecurring&&C.toggleLinesRadiateJobRecurrence(e,!0,hg.LinesRadiateJob.config.avgDelay,hg.LinesRadiateJob.config.delayDeviationRange)}function i(e){var t=new hg.ColorResetJob(C.grids[e]);C.colorResetJobs.push(t),a(e),C.grids[e].animations.colorResetAnimations=C.grids[e].animations.colorResetAnimations||[],C.grids[e].animations.colorResetAnimations.push(t)}function n(e){var t=new hg.ColorShiftJob(C.grids[e]);C.colorShiftJobs.push(t),s(e),C.grids[e].animations.colorShiftAnimations=C.grids[e].animations.colorShiftAnimations||[],C.grids[e].animations.colorShiftAnimations.push(t)}function r(e){var t=new hg.ColorWaveJob(C.grids[e]);C.colorWaveJobs.push(t),l(e),C.grids[e].animations.colorWaveAnimations=C.grids[e].animations.colorWaveAnimations||[],C.grids[e].animations.colorWaveAnimations.push(t)}function o(e){var t=new hg.DisplacementWaveJob(C.grids[e]);C.displacementWaveJobs.push(t),c(e),C.grids[e].animations.displacementWaveAnimations=C.grids[e].animations.displacementWaveAnimations||[],C.grids[e].animations.displacementWaveAnimations.push(t)}function a(e){var t=C.colorResetJobs[e];t.isComplete||hg.animator.cancelJob(t),t.init(),hg.animator.startJob(t)}function s(e){var t=C.colorShiftJobs[e];t.isComplete||hg.animator.cancelJob(t),t.init(),hg.animator.startJob(t)}function l(e){var t=C.colorWaveJobs[e];t.isComplete||hg.animator.cancelJob(t),t.init(),hg.animator.startJob(t)}function c(e){var t=C.displacementWaveJobs[e];t.isComplete||hg.animator.cancelJob(t),t.init(),hg.animator.startJob(t)}function u(e,t){function i(t){C.grids[e].animations.lineAnimations.splice(C.grids[e].animations.lineAnimations.indexOf(t),1)}var n,r,o,a;for(a=C.grids[e],a.animations.lineAnimations=a.animations.lineAnimations||[],n=new hg.LinesRadiateJob(a,a.tiles[t],i),C.linesRadiateJobs.push(n),hg.animator.startJob(n),r=0,o=n.lineJobs.length;o>r;r+=1)a.animations.lineAnimations.push(n.lineJobs[r])}function d(e){function t(){C.grids[e].animations.lineAnimations.splice(C.grids[e].animations.lineAnimations.indexOf(i),1)}var i;C.grids[e].animations.lineAnimations=C.grids[e].animations.lineAnimations||[],i=hg.LineJob.createRandomLineJob(C.grids[e],t),C.randomLineJobs.push(i),hg.animator.startJob(i),C.grids[e].animations.lineAnimations.push(i)}function g(e,t){function i(){C.grids[e].animations.highlightHoverAnimations.splice(C.grids[e].animations.highlightHoverAnimations.indexOf(n),1)}var n,r,o;r=C.grids[e],o=r.tiles[t],C.grids[e].animations.highlightHoverAnimations=C.grids[e].animations.highlightHoverAnimations||[],n=new hg.HighlightHoverJob(o,i),C.highlightHoverJobs.push(n),hg.animator.startJob(n),C.grids[e].animations.highlightHoverAnimations.push(n)}function h(e,t){function i(){C.grids[e].animations.highlightRadiateAnimations.splice(C.grids[e].animations.highlightRadiateAnimations.indexOf(n),1)}var n,r,o;r=C.grids[e],C.grids[e].animations.highlightRadiateAnimations=C.grids[e].animations.highlightRadiateAnimations||[],o={x:r.tiles[t].originalCenterX,y:r.tiles[t].originalCenterY},n=new hg.HighlightRadiateJob(o,r,i),C.highlightRadiateJobs.push(n),hg.animator.startJob(n),C.grids[e].animations.highlightRadiateAnimations.push(n)}function p(e){var t=parseInt(Math.random()*hg.controller.grids[e].tiles.length);h(e,t)}function f(e){var t=parseInt(Math.random()*hg.controller.grids[e].tiles.length);g(e,t)}function m(e){var t=parseInt(Math.random()*hg.controller.grids[e].tiles.length);u(e,t)}function v(e,t,i,n,r,o){function a(){var n=Math.random()*c+s;e(i),t[i]=setTimeout(a,n)}var s,l,c;s=r-.5*o,s=s>0?s:1,l=r+.5*o,c=l-s,t[i]&&(clearTimeout(t[i]),t[i]=null),n&&(t[i]=setTimeout(a,r))}function b(){C.grids.forEach(function(e,t){hg.animator.cancelAll(),e.resize(),a(t),s(t),l(t),c(t),hg.animator.startJob(e),hg.animator.startJob(C.annotations[t])})}var C={},w={};C.grids=[],C.inputs=[],C.annotations=[],C.colorResetJobs=[],C.colorShiftJobs=[],C.displacementWaveJobs=[],C.colorWaveJobs=[],C.linesRadiateJobs=[],C.randomLineJobs=[],C.highlightHoverJobs=[],C.highlightRadiateJobs=[],C.highlightHoverRecurrenceTimeouts=[],C.highlightRadiateRecurrenceTimeouts=[],C.linesRadiateRecurrenceTimeouts=[],C.randomLineRecurrenceTimeouts=[],C.config=w,C.createNewHexGrid=e,C.restartColorShiftAnimation=s,C.restartColorWaveAnimation=l,C.restartDisplacementWaveAnimation=c,C.createLinesRadiateAnimation=u,C.createRandomLineAnimation=d,C.createHighlightHoverAnimation=g,C.createHighlightRadiateAnimation=h,C.createRandomHighlightRadiateAnimation=p,C.createRandomHighlightHoverAnimation=f,C.createRandomLinesRadiateAnimation=m,C.toggleHighlightHoverJobRecurrence=v.bind(C,f,C.highlightHoverRecurrenceTimeouts),C.toggleHighlightRadiateJobRecurrence=v.bind(C,p,C.highlightRadiateRecurrenceTimeouts),C.toggleLinesRadiateJobRecurrence=v.bind(C,m,C.linesRadiateRecurrenceTimeouts),C.toggleRandomLineJobRecurrence=v.bind(C,d,C.randomLineRecurrenceTimeouts),C.resize=b,window.hg||(window.hg={}),window.hg.controller=C,window.addEventListener("resize",b,!1),console.log("controller module loaded")}(),function(){function e(e,t,i){e.forEach(function(e){t.forEach(function(t){N.listen(e,t,i)})})}function t(e,t,i,n){var r=document.createElement(e);return t&&t.appendChild(r),i&&(r.id=i),n&&n.forEach(function(e){s(r,e)}),r}function i(e,t){var i,n;return i=e.className.indexOf(t),i>=0&&(0===i||" "===e.className[i-1])&&(n=i+t.length,n===e.className.length||" "===e.className[n])?!0:!1}function n(e,t,n){"undefined"==typeof n?i(e,t)?l(e,t):s(e,t):n?s(e,t):l(e,t)}function r(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return t-=N.getScrollLeft(),i-=N.getScrollTop(),{x:t,y:i}}function o(){var e,t;return"undefined"!=typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{w:e,h:t}}function a(e,t){return t&&t.parentNode===e?(e.removeChild(t),!0):!1}function s(e,t){e.className+=" "+t}function l(e,t){e.className=e.className.split(" ").filter(function(e){return e!==t}).join(" ")}function c(e){e.className=""}function u(e,t,i,n,r){var o,a;return i=i||document.getElementsByTagName("body")[0],o=N.createElement(t,null,n,r),o.style.position="absolute",o.style.visibility="hidden",o.style.whiteSpace="nowrap",i.appendChild(o),o.innerHTML=e,a=o.clientWidth,i.removeChild(o),a}function d(e){var t,i;i=[];for(t in e)e.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+i.join("&")}function g(e,t){var i,n;return t=encodeURIComponent(t),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+t+"=([^&#]*)","i"),n=i.exec(e),null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))}function h(e,t){e.style.transitionDuration=t+"s",e.style.WebkitTransitionDuration=t+"s",e.style.MozTransitionDuration=t+"s",e.style.msTransitionDuration=t+"s",e.style.OTransitionDuration=t+"s"}function p(e,t){e.style.transitionDelay=t+"s",e.style.WebkitTransitionDelay=t+"s",e.style.MozTransitionDelay=t+"s",e.style.msTransitionDelay=t+"s",e.style.OTransitionDelay=t+"s"}function f(e,t){var i,n,r;for(i=e.querySelectorAll("."+t),n=0,r=i.length;r>n;n++)e.removeChild(i[n])}function m(e,t){var i="cubic-bezier("+t.p1x+","+t.p1y+","+t.p2x+","+t.p2y+")";e.style.transitionTimingFunction=i,e.style.WebkitTransitionTimingFunction=i,e.style.MozTransitionTimingFunction=i,e.style.msTransitionTimingFunction=i,e.style.OTransitionTimingFunction=i}function v(e,t){var i,n,r,o,a,s,l;return r=1-e,o=r*r*r,a=3*e*r*r,s=3*e*e*r,l=e*e*e,i=t[0].x*o+t[1].x*a+t[2].x*s+t[3].x*l,n=t[0].y*o+t[1].y*a+t[2].y*s+t[3].y*l,{x:i,y:n}}function b(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function C(e){var t,i,n,r;for(t=0,n=e.length;n>t;t+=1)i=parseInt(Math.random()*n),r=e[i],e[i]=e[t],e[t]=r;return e}function w(e,t,i,n){var r,o,a,s,l,c,u,d,g,h,p;if(r=!1,n){if(i.length<6)return r;d=i[i.length-4],g=i[i.length-3]}else{if(i.length<4)return r;d=i[i.length-2],g=i[i.length-1]}for(o=0,a=i.length-2;a>o;o+=2)h=i[o],p=i[o+1],h>d?(s=d,l=g,c=h,u=p):(s=h,l=p,c=d,u=g),e>h==d>=e&&(u-l)*(e-s)>(t-l)*(c-s)&&(r=!r),d=h,g=p;return r}function L(e){var t,i;i={};for(t in e)i[t]=e[t];return i}function R(e){var t=e.s*(e.l<.5?e.l:1-e.l);return{h:e.h,s:2*t/(e.l+t),v:e.l+t}}function y(e){var t=(2-e.s)*e.v;return{h:e.h,s:e.s*e.v/(1>t?t:2.00000001-t),l:.5*t}}function A(e,t){for(;e;)if(e.classList.contains(t))return e;return null}var S={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1+--e*e*e},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}},x={linear:function(e){return e},easeInQuad:function(e){return Math.sqrt(e)},easeOutQuad:function(e){return 1-Math.sqrt(1-e)},easeInOutQuad:function(e){return.5>e?Math.sqrt(.5*e):1-.70710678*Math.sqrt(1-e)}},T=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,16)}).bind(window),N={listenToMultipleForMultiple:e,createElement:t,containsClass:i,toggleClass:n,getPageOffset:r,getViewportSize:o,removeChildIfPresent:a,addClass:s,removeClass:l,clearClasses:c,getTextWidth:u,encodeQueryString:d,getQueryStringParameterValue:g,setTransitionDurationSeconds:h,setTransitionDelaySeconds:p,removeChildrenWithClass:f,setTransitionCubicBezierTimingFunction:m,easingFunctions:S,inverseEasingFunctions:x,requestAnimationFrame:T,getXYFromPercentWithBezier:v,applyTransform:b,shuffle:C,isPointInsidePolyline:w,shallowCopy:L,hsvToHsl:y,hslToHsv:R,findClassInSelfOrAncestors:A,svgNamespace:"http://www.w3.org/2000/svg"};window.hg||(window.hg={}),window.hg.util=N,console.log("util module loaded")}(),function(){function e(){var i,r;i=Date.now(),r=i-l.previousTime,r=r>c.deltaTimeUpperThreshold?c.deltaTimeUpperThreshold:r,l.isLooping=!0,l.isPaused?l.isLooping=!1:(t(i,r),n(),hg.util.requestAnimationFrame(e)),l.previousTime=i}function t(e,t){var n,r;for(n=0,r=l.jobs.length;r>n;n+=1)l.jobs[n].update(e,t),l.jobs[n].isComplete&&(i(l.jobs[n],n),n--,r--)}function i(e,t){var i;if("number"==typeof t)l.jobs.splice(t,1);else for(t=0,i=l.jobs.length;i>t;t+=1)if(l.jobs[t]===e){l.jobs.splice(t,1);break}0===l.jobs.length&&(l.isPaused=!0)}function n(){var e,t;for(e=0,t=l.jobs.length;t>e;e+=1)l.jobs[e].draw()}function r(){l.isPaused=!1,l.isLooping||(l.previousTime=Date.now(),e())}function o(e){e.start(),l.jobs.push(e),r()}function a(e){console.log("Job cancelling: "+e.constructor.name),e.cancel(),i(e)}function s(){for(;l.jobs.length;)a(l.jobs[0])}var l={},c={};c.deltaTimeUpperThreshold=200,l.jobs=[],l.previousTime=Date.now(),l.isLooping=!1,l.isPaused=!0,l.startJob=o,l.cancelJob=a,l.cancelAll=s,l.config=c,window.hg||(window.hg={}),window.hg.animator=l,console.log("animator module loaded")}(),function(){function e(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].holdsContent&&e.grid.tiles[t].setColor(z.contentTileHue,z.contentTileSaturation,z.contentTileLightness)}function t(){var e,t,i;for(e=this,t=0,i=e.grid.borderTiles.length;i>t;t+=1)e.grid.borderTiles[t].setColor(z.borderTileHue,z.borderTileSaturation,z.borderTileLightness)}function i(){var e,t,i;for(e=this,t=0,i=e.grid.borderTiles.length;i>t;t+=1)e.grid.borderTiles[t].isCornerTile&&e.grid.borderTiles[t].setColor(z.cornerTileHue,z.cornerTileSaturation,z.cornerTileLightness)}function n(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].element.setAttribute("opacity","0")}function r(){var e,t;e=this,e.contentAreaGuideLines=[],t=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[0]=t,t.setAttribute("x1",e.grid.contentAreaLeft),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaLeft),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2"),t=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(t),e.contentAreaGuideLines[1]=t,t.setAttribute("x1",e.grid.contentAreaRight),t.setAttribute("y1",0),t.setAttribute("x2",e.grid.contentAreaRight),t.setAttribute("y2",e.grid.height),t.setAttribute("stroke","red"),t.setAttribute("stroke-width","2")}function o(){var e,t,i;for(e=this,e.tileParticleCenters=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileParticleCenters[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileParticleCenters[t]),e.tileParticleCenters[t].setAttribute("r","4"),e.tileParticleCenters[t].setAttribute("fill","gray")}function a(){var e,t,i;for(e=this,e.tileAnchorLines=[],e.tileAnchorCenters=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileAnchorLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.tileAnchorLines[t]),e.tileAnchorLines[t].setAttribute("stroke","#666666"),e.tileAnchorLines[t].setAttribute("stroke-width","2"),e.tileAnchorCenters[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileAnchorCenters[t]),e.tileAnchorCenters[t].setAttribute("r","4"),e.tileAnchorCenters[t].setAttribute("fill","#888888")}function s(){var e,t,i;for(e=this,e.tileDisplacementCircles=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileDisplacementCircles[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileDisplacementCircles[t]),e.tileDisplacementCircles[t].setAttribute("r","80"),e.tileDisplacementCircles[t].setAttribute("opacity","0.4"),e.tileDisplacementCircles[t].setAttribute("fill","white")}function l(){var e,t,i;for(e=this,e.tileInnerRadii=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileInnerRadii[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileInnerRadii[t]),e.tileInnerRadii[t].setAttribute("stroke","blue"),e.tileInnerRadii[t].setAttribute("stroke-width","1"),e.tileInnerRadii[t].setAttribute("fill","transparent")}function c(){var e,t,i;for(e=this,e.tileOuterRadii=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileOuterRadii[t]=document.createElementNS(hg.util.svgNamespace,"circle"),e.grid.svg.appendChild(e.tileOuterRadii[t]),e.tileOuterRadii[t].setAttribute("stroke","green"),e.tileOuterRadii[t].setAttribute("stroke-width","1"),e.tileOuterRadii[t].setAttribute("fill","transparent")}function u(){var e,t,i,n,r,o,a;for(e=this,e.neighborLines=[],t=0,n=e.grid.tiles.length;n>t;t+=1)for(o=e.grid.tiles[t],e.neighborLines[t]=[],i=0,r=o.neighbors.length;r>i;i+=1)a=o.neighbors[i],a&&(e.neighborLines[t][i]=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.neighborLines[t][i]),e.neighborLines[t][i].setAttribute("stroke","purple"),e.neighborLines[t][i].setAttribute("stroke-width","1"))}function d(){var e,t,i;for(e=this,e.forceLines=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.forceLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.forceLines[t]),e.forceLines[t].setAttribute("stroke","orange"),e.forceLines[t].setAttribute("stroke-width","2")}function g(){var e,t,i;for(e=this,e.velocityLines=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.velocityLines[t]=document.createElementNS(hg.util.svgNamespace,"line"),e.grid.svg.appendChild(e.velocityLines[t]),e.velocityLines[t].setAttribute("stroke","red"),e.velocityLines[t].setAttribute("stroke-width","2")}function h(){var e,t,i;for(e=this,e.indexTexts=[],t=0,i=e.grid.tiles.length;i>t;t+=1)e.indexTexts[t]=document.createElementNS(hg.util.svgNamespace,"text"),e.indexTexts[t].innerHTML=e.grid.tiles[t].index,e.grid.svg.appendChild(e.indexTexts[t]),e.indexTexts[t].setAttribute("font-size","16"),e.indexTexts[t].setAttribute("fill","black"),e.indexTexts[t].setAttribute("pointer-events","none")}function p(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].holdsContent&&e.grid.tiles[t].setColor(hg.Grid.config.tileHue,hg.Grid.config.tileSaturation,hg.Grid.config.tileLightness)}function f(){var e,t,i;for(e=this,t=0,i=e.grid.borderTiles.length;i>t;t+=1)e.grid.borderTiles[t].setColor(hg.Grid.config.tileHue,hg.Grid.config.tileSaturation,hg.Grid.config.tileLightness)}function m(){var e,t,i;for(e=this,t=0,i=e.grid.borderTiles.length;i>t;t+=1)e.grid.borderTiles[t].isCornerTile&&e.grid.borderTiles[t].setColor(hg.Grid.config.tileHue,hg.Grid.config.tileSaturation,hg.Grid.config.tileLightness)}function v(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].element.setAttribute("opacity","1")}function b(){var e,t,i;for(e=this,t=0,i=e.contentAreaGuideLines.length;i>t;t+=1)e.grid.svg.removeChild(e.contentAreaGuideLines[t]);e.contentAreaGuideLines=[]}function C(){var e,t,i;for(e=this,t=0,i=e.tileParticleCenters.length;i>t;t+=1)e.grid.svg.removeChild(e.tileParticleCenters[t]);e.tileParticleCenters=[]}function w(){var e,t,i;for(e=this,t=0,i=e.tileAnchorLines.length;i>t;t+=1)e.grid.svg.removeChild(e.tileAnchorLines[t]),e.grid.svg.removeChild(e.tileAnchorCenters[t]);e.tileAnchorLines=[],e.tileAnchorCenters=[]}function L(){var e,t,i;for(e=this,t=0,i=e.tileDisplacementCircles.length;i>t;t+=1)e.grid.svg.removeChild(e.tileDisplacementCircles[t]);e.tileDisplacementCircles=[]}function R(){var e,t,i;for(e=this,t=0,i=e.tileInnerRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileInnerRadii[t]);e.tileInnerRadii=[]}function y(){var e,t,i;for(e=this,t=0,i=e.tileOuterRadii.length;i>t;t+=1)e.grid.svg.removeChild(e.tileOuterRadii[t]);e.tileOuterRadii=[]}function A(){var e,t,i,n,r;for(e=this,t=0,n=e.neighborLines.length;n>t;t+=1)for(i=0,r=e.neighborLines[t].length;r>i;i+=1)e.neighborLines[t][i]&&e.grid.svg.removeChild(e.neighborLines[t][i]);e.neighborLines=[]}function S(){var e,t,i;for(e=this,t=0,i=e.forceLines.length;i>t;t+=1)e.grid.svg.removeChild(e.forceLines[t]);e.forceLines=[]}function x(){var e,t,i;for(e=this,t=0,i=e.velocityLines.length;i>t;t+=1)e.grid.svg.removeChild(e.velocityLines[t]);e.velocityLines=[]}function T(){var e,t,i;for(e=this,t=0,i=e.indexTexts.length;i>t;t+=1)e.grid.svg.removeChild(e.indexTexts[t]);e.indexTexts=[]}function N(){var e,t,i;for(e=this,t=0,i=e.lineAnimationGapDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationGapDots[t]);e.lineAnimationGapDots=[]}function D(){var e,t,i;for(e=this,t=0,i=e.lineAnimationSelfCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationSelfCornerDots[t]);for(t=0,i=e.lineAnimationLowerNeighborCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationLowerNeighborCornerDots[t]);for(t=0,i=e.lineAnimationUpperNeighborCornerDots.length;i>t;t+=1)e.grid.svg.removeChild(e.lineAnimationUpperNeighborCornerDots[t]);e.lineAnimationSelfCornerDots=[],e.lineAnimationLowerNeighborCornerDots=[],e.lineAnimationUpperNeighborCornerDots=[]}function E(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileParticleCenters[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileParticleCenters[t].setAttribute("cy",e.grid.tiles[t].particle.py)}function P(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileAnchorLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.tileAnchorLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.tileAnchorLines[t].setAttribute("x2",e.grid.tiles[t].centerX),e.tileAnchorLines[t].setAttribute("y2",e.grid.tiles[t].centerY),e.tileAnchorCenters[t].setAttribute("cx",e.grid.tiles[t].centerX),e.tileAnchorCenters[t].setAttribute("cy",e.grid.tiles[t].centerY)}function I(){var e,t,i,n,r,o,a,s;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t].particle.px-e.grid.tiles[t].originalCenterX,r=e.grid.tiles[t].particle.py-e.grid.tiles[t].originalCenterY,o=180*Math.atan2(n,r)/Math.PI,a=Math.sqrt(n*n+r*r),s="hsl("+o+","+a/hg.DisplacementWaveJob.config.displacementAmplitude*100+"%,80%)",e.tileDisplacementCircles[t].setAttribute("fill",s),e.tileDisplacementCircles[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileDisplacementCircles[t].setAttribute("cy",e.grid.tiles[t].particle.py)}function O(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileInnerRadii[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileInnerRadii[t].setAttribute("cy",e.grid.tiles[t].particle.py),e.tileInnerRadii[t].setAttribute("r",e.grid.tiles[t].outerRadius*hg.Grid.config.sqrtThreeOverTwo)}function H(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.tileOuterRadii[t].setAttribute("cx",e.grid.tiles[t].particle.px),e.tileOuterRadii[t].setAttribute("cy",e.grid.tiles[t].particle.py),e.tileOuterRadii[t].setAttribute("r",e.grid.tiles[t].outerRadius)}function J(){var e,t,i,n,r,o,a;for(e=this,t=0,n=e.grid.tiles.length;n>t;t+=1)for(o=e.grid.tiles[t],i=0,r=o.neighbors.length;r>i;i+=1)a=o.neighbors[i],a&&(e.neighborLines[t][i].setAttribute("x1",o.particle.px),e.neighborLines[t][i].setAttribute("y1",o.particle.py),e.neighborLines[t][i].setAttribute("x2",a.tile.particle.px),e.neighborLines[t][i].setAttribute("y2",a.tile.particle.py))}function W(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.forceLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.forceLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.forceLines[t].setAttribute("x2",e.grid.tiles[t].particle.px+e.grid.tiles[t].particle.fx*z.forceLineLengthMultiplier),e.forceLines[t].setAttribute("y2",e.grid.tiles[t].particle.py+e.grid.tiles[t].particle.fy*z.forceLineLengthMultiplier)}function F(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.velocityLines[t].setAttribute("x1",e.grid.tiles[t].particle.px),e.velocityLines[t].setAttribute("y1",e.grid.tiles[t].particle.py),e.velocityLines[t].setAttribute("x2",e.grid.tiles[t].particle.px+e.grid.tiles[t].particle.vx*z.velocityLineLengthMultiplier),e.velocityLines[t].setAttribute("y2",e.grid.tiles[t].particle.py+e.grid.tiles[t].particle.vy*z.velocityLineLengthMultiplier)}function M(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.indexTexts[t].setAttribute("x",e.grid.tiles[t].particle.px-10),e.indexTexts[t].setAttribute("y",e.grid.tiles[t].particle.py+6)}function G(){var e,t,i,n,r,o,a;if(e=this,N.call(e),e.lineAnimationGapDots=[],e.grid.animations.lineAnimations)for(o=0,t=0,i=e.grid.animations.lineAnimations.length;i>t;t+=1)for(a=e.grid.animations.lineAnimations[t],n=0,r=a.gapPoints.length;r>n;n+=1,o+=1)e.lineAnimationGapDots[o]=document.createElementNS(hg.util.svgNamespace,"circle"),e.lineAnimationGapDots[o].setAttribute("cx",a.gapPoints[n].x),e.lineAnimationGapDots[o].setAttribute("cy",a.gapPoints[n].y),e.lineAnimationGapDots[o].setAttribute("r","4"),e.lineAnimationGapDots[o].setAttribute("fill","white"),e.grid.svg.appendChild(e.lineAnimationGapDots[o])}function X(){function e(e,t){return{x:e.vertices[2*t],y:e.vertices[2*t+1]}}var t,i,n,r,o,a,s,l;if(t=this,D.call(t),t.lineAnimationSelfCornerDots=[],t.lineAnimationLowerNeighborCornerDots=[],t.lineAnimationUpperNeighborCornerDots=[],t.grid.animations.lineAnimations)for(i=0,n=t.grid.animations.lineAnimations.length;n>i;i+=1)for(a=t.grid.animations.lineAnimations[i],r=0,o=a.corners.length;o>r;r+=1)s=e(a.tiles[r],a.corners[r]),l=document.createElementNS(hg.util.svgNamespace,"circle"),l.setAttribute("cx",s.x),l.setAttribute("cy",s.y),l.setAttribute("r","3"),l.setAttribute("fill","#ffaaaa"),t.grid.svg.appendChild(l),t.lineAnimationSelfCornerDots.push(l),a.lowerNeighbors[r]&&(s=e(a.lowerNeighbors[r].tile,a.lowerNeighborCorners[r]),l=document.createElementNS(hg.util.svgNamespace,"circle"),l.setAttribute("cx",s.x),l.setAttribute("cy",s.y),l.setAttribute("r","3"),l.setAttribute("fill","#aaffaa"),t.grid.svg.appendChild(l),t.lineAnimationLowerNeighborCornerDots.push(l)),a.upperNeighbors[r]&&(s=e(a.upperNeighbors[r].tile,a.upperNeighborCorners[r]),l=document.createElementNS(hg.util.svgNamespace,"circle"),l.setAttribute("cx",s.x),l.setAttribute("cy",s.y),l.setAttribute("r","3"),l.setAttribute("fill","#aaaaff"),t.grid.svg.appendChild(l),t.lineAnimationUpperNeighborCornerDots.push(l))}function _(e,t){var i;i=this,i.annotations[e].enabled=t,t?i.annotations[e].create.call(i):i.annotations[e].destroy.call(i)}function k(){var e,t;e=this;for(t in e.annotations)e.annotations[t].enabled&&e.annotations[t].create.call(e)}function Y(){var e,t;e=this;for(t in e.annotations)e.annotations[t].destroy.call(e)}function U(){var e=this;e.isComplete=!1}function B(){var e,t;e=this;for(t in e.annotations)e.annotations[t].enabled&&e.annotations[t].update.call(e)}function q(){}function V(){var e=this;e.isComplete=!0}function j(e){var t=this;t.grid=e,t.startTime=0,t.isComplete=!1,t.annotations=hg.util.shallowCopy(z.annotations),t.contentAreaGuideLines=[],t.tileParticleCenters=[],t.tileAnchorLines=[],t.tileAnchorCenters=[],t.tileDisplacementCircles=[],t.tileInnerRadii=[],t.tileOuterRadii=[],t.neighborLines=[],t.forceLines=[],t.velocityLines=[],t.indexTexts=[],t.lineAnimationGapDots=[],t.lineAnimationSelfCornerDots=[],t.lineAnimationLowerNeighborCornerDots=[],t.lineAnimationUpperNeighborCornerDots=[],t.toggleAnnotationEnabled=_,t.createAnnotations=k,t.destroyAnnotations=Y,t.start=U,t.update=B,t.draw=q,t.cancel=V}var z={};z.forceLineLengthMultiplier=4e3,z.velocityLineLengthMultiplier=300,z.contentTileHue=187,z.contentTileSaturation=50,z.contentTileLightness=30,z.borderTileHue=267,z.borderTileSaturation=0,z.borderTileLightness=30,z.cornerTileHue=267,z.cornerTileSaturation=50,z.cornerTileLightness=30,z.annotations={contentTiles:{enabled:!1,create:e,destroy:p,update:function(){}},borderTiles:{enabled:!1,create:t,destroy:f,update:function(){}},cornerTiles:{enabled:!1,create:i,destroy:m,update:function(){}},transparentTiles:{enabled:!1,create:n,destroy:v,update:function(){}},tileAnchorCenters:{enabled:!1,create:a,destroy:w,update:P},tileParticleCenters:{enabled:!1,create:o,destroy:C,update:E},tileDisplacementColors:{enabled:!1,create:s,destroy:L,update:I},tileInnerRadii:{enabled:!1,create:l,destroy:R,update:O},tileOuterRadii:{enabled:!1,create:c,destroy:y,update:H},tileIndices:{enabled:!0,create:h,destroy:T,update:M},tileForces:{enabled:!1,create:d,destroy:S,update:W},tileVelocities:{enabled:!1,create:g,destroy:x,update:F},tileNeighborConnections:{enabled:!1,create:u,destroy:A,update:J},contentAreaGuidelines:{enabled:!1,create:r,destroy:b,update:function(){}},lineAnimationGapPoints:{enabled:!1,create:function(){},destroy:N,update:G},lineAnimationCornerData:{enabled:!1,create:function(){},destroy:D,update:X}},j.config=z,window.hg||(window.hg={}),window.hg.Annotations=j,console.log("Annotations module loaded")}(),function(){function e(){var e,t,i,n,r,o,a,s,l;for(e=this,t=.5*e.parent.clientWidth,i=e.parent.clientHeight,e.centerX=t,e.centerY=.5*i,e.actualContentAreaWidth=e.parent.clientWidth<L.targetContentAreaWidth?e.parent.clientWidth:L.targetContentAreaWidth,e.isVertical?(e.rowDeltaY=1.5*L.tileOuterRadius+L.tileGap*L.sqrtThreeOverTwo,e.tileDeltaX=L.tileShortLengthWithGap,e.oddRowTileCount=2*Math.ceil((t-(L.tileInnerRadius+L.tileGap))/L.tileShortLengthWithGap)+1,e.evenRowTileCount=2*Math.ceil((t-(L.tileShortLengthWithGap+.5*L.tileGap))/L.tileShortLengthWithGap)+2,e.oddRowXOffset=t-L.tileShortLengthWithGap*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(L.firstRowYOffset+2*L.tileOuterRadius+L.tileGap*Math.sqrt(3)))/e.rowDeltaY)+2):(e.rowDeltaY=L.tileInnerRadius+.5*L.tileGap,e.tileDeltaX=3*L.tileOuterRadius+L.tileGap*Math.sqrt(3),e.oddRowTileCount=2*Math.ceil((t-(e.tileDeltaX-L.tileOuterRadius))/e.tileDeltaX)+1,e.evenRowTileCount=2*Math.ceil((t-(e.tileDeltaX+L.tileGap*L.sqrtThreeOverTwo+.5*L.tileOuterRadius))/e.tileDeltaX)+2,e.oddRowXOffset=t-e.tileDeltaX*(e.oddRowTileCount-1)/2,e.rowCount=Math.ceil((i-(L.firstRowYOffset+3*L.tileInnerRadius+2*L.tileGap))/e.rowDeltaY)+4),e.evenRowXOffset=e.oddRowXOffset+(e.evenRowTileCount>e.oddRowTileCount?-1:1)*e.tileDeltaX*.5,e.contentAreaLeft=t-.5*e.actualContentAreaWidth,e.contentAreaRight=e.contentAreaLeft+e.actualContentAreaWidth,e.isVertical?(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-L.tileInnerRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-L.tileInnerRadius))/e.tileDeltaX)):(e.oddRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.oddRowXOffset-L.tileOuterRadius))/e.tileDeltaX),e.evenRowContentStartIndex=Math.ceil((e.contentAreaLeft-(e.evenRowXOffset-L.tileOuterRadius))/e.tileDeltaX)),e.oddRowContentTileCount=e.oddRowTileCount-2*e.oddRowContentStartIndex,e.evenRowContentTileCount=e.evenRowTileCount-2*e.evenRowContentStartIndex,e.oddRowContentEndIndex=e.oddRowContentStartIndex+e.oddRowContentTileCount-1,e.evenRowContentEndIndex=e.evenRowContentStartIndex+e.evenRowContentTileCount-1,e.actualContentInnerIndices=[],s=Math.ceil(L.contentStartingRowIndex/2)*e.oddRowContentTileCount+Math.floor(L.contentStartingRowIndex/2)*e.evenRowContentTileCount,o=0,a=e.originalContentInnerIndices.length;a>o;o+=1)e.actualContentInnerIndices[o]=e.originalContentInnerIndices[o]+s;for(e.innerIndexOfLastContentTile=e.actualContentInnerIndices[e.actualContentInnerIndices.length-1],l=s+e.innerIndexOfLastContentTile+1,n=0,r=0;l>n;)n+=r%2===0?e.oddRowContentTileCount:e.evenRowContentTileCount,r+=1;e.rowCount=r>e.rowCount?r:e.rowCount,e.height=(e.rowCount-2)*e.rowDeltaY}function t(){var e,t,i,n,r;for(e=this,r=[],n=e.postData.length,t=0;n>t;t+=1)r[t]=1;for(n=1/L.contentDensity*e.postData.length,t=e.postData.length;n>t;t+=1)r[t]=0;for(r=hg.util.shuffle(r),e.originalContentInnerIndices=[],t=0,i=0,n=r.length;n>t;t+=1)r[t]&&(e.originalContentInnerIndices[i++]=t)}function i(){var e;e=this,e.svg=document.createElementNS(hg.util.svgNamespace,"svg"),e.parent.appendChild(e.svg),e.svg.style.display="block",e.svg.style.position="relative",e.svg.style.width="100%",e.svg.style.zIndex="2147483647",e.svg.classList.add("hg-svg"),u.call(e),e.svgDefs=document.createElementNS(hg.util.svgNamespace,"defs"),e.svg.appendChild(e.svgDefs)}function n(){var e,t,i,n,s,l,c,u,d,g,h,p,f,m,v,b,C,w;for(e=this,e.tiles=[],e.borderTiles=[],t=0,f=0,m=0,u=L.firstRowYOffset,n=e.rowCount,b=[],v=a.call(e),C=e.oddRowTileCount>e.evenRowTileCount,i=0;n>i;i+=1,u+=e.rowDeltaY)for(p=i%2===0,w=C&&p||!C&&!p,p?(c=e.oddRowXOffset,l=e.oddRowTileCount):(c=e.evenRowXOffset,l=e.evenRowTileCount),s=0;l>s;t+=1,s+=1,c+=e.tileDeltaX)d=p?s<e.oddRowContentStartIndex||s>e.oddRowContentEndIndex:s<e.evenRowContentStartIndex||s>e.evenRowContentEndIndex,g=e.isVertical?0===s||s===l-1||0===i||i===n-1:1>=i||i>=n-2||w&&(0===s||s===l-1),h=g&&(e.isVertical?!(0!==s&&s!==l-1||0!==i&&i!==n-1):(1>=i||i>=n-2)&&w&&(0===s||s===l-1)),e.tiles[t]=new hg.Tile(e.svg,c,u,L.tileOuterRadius,e.isVertical,L.tileHue,L.tileSaturation,L.tileLightness,null,t,i,s,d,g,h,w,L.tileMass),g&&e.borderTiles.push(e.tiles[t]),d||(f===e.actualContentInnerIndices[m]&&(e.tiles[t].setContent(e.postData[m]),m+=1),f+=1),b[t]=o.call(e,i,n,s,l,w,v);
r.call(e,b)}function r(e){var t,i,n,r,o,a;for(t=this,a=[],i=0,r=t.tiles.length;r>i;i+=1){for(n=0,o=6;o>n;n+=1)a[n]=isNaN(e[i][n])?null:t.tiles[i+e[i][n]];t.tiles[i].setNeighborTiles(a)}}function o(e,t,i,n,r,o){var a,s;return a=this,s=o.slice(0),a.isVertical?(r?(0===i&&(s[3]=Number.NaN,s[4]=Number.NaN,s[5]=Number.NaN),i===n-1&&(s[0]=Number.NaN,s[1]=Number.NaN,s[2]=Number.NaN)):(0===i&&(s[4]=Number.NaN),i===n-1&&(s[1]=Number.NaN)),0===e&&(s[0]=Number.NaN,s[5]=Number.NaN),e===t-1&&(s[2]=Number.NaN,s[3]=Number.NaN)):(r&&(0===i&&(s[4]=Number.NaN,s[5]=Number.NaN),i===n-1&&(s[1]=Number.NaN,s[2]=Number.NaN)),0===e?(s[0]=Number.NaN,s[1]=Number.NaN,s[5]=Number.NaN):1===e&&(s[0]=Number.NaN),e===t-1?(s[2]=Number.NaN,s[3]=Number.NaN,s[4]=Number.NaN):e===t-2&&(s[3]=Number.NaN)),s}function a(){var e,t,i;return e=this,i=[],t=e.oddRowTileCount>e.evenRowTileCount?e.oddRowTileCount:e.evenRowTileCount,e.isVertical?(i[0]=-t+1,i[1]=1,i[2]=t,i[3]=t-1,i[4]=-1,i[5]=-t):(i[0]=2*-t+1,i[1]=-t+1,i[2]=t,i[3]=2*t-1,i[4]=t-1,i[5]=-t),i}function s(){var e,t;for(e=this,t=e.svg,e.annotations.destroyAnnotations.call(e.annotations);t.firstChild;)t.removeChild(t.firstChild);e.svg.appendChild(e.svgDefs)}function l(){var e=this;console.log("// --- Grid Info: ------- //"),console.log("// - Tile count="+e.tiles.length),console.log("// - Row count="+e.rowCount),console.log("// - Odd row tile count="+e.oddRowTileCount),console.log("// - Even row tile count="+e.evenRowTileCount),console.log("// ------------------------- //")}function c(){var t;t=this,s.call(t),e.call(t),n.call(t),t.svg.style.height=t.height+"px",t.annotations.createAnnotations(),l.call(t)}function u(){var e;e=this,e.svg.style.backgroundColor="hsl("+L.backgroundHue+","+L.backgroundSaturation+"%,"+L.backgroundLightness+"%)"}function d(){var e,t,i;for(e=this,t=0,i=e.tiles.length;i>t;t+=1)e.tiles[t].setColor(L.tileHue,L.tileSaturation,L.tileLightness)}function g(e){var t,i,n;for(t=this,i=0,n=t.tiles.length;n>i;i+=1)t.tiles[i].particle.m=e}function h(){var e=this;e.isComplete=!1}function p(e,t){var i,n,r;for(i=this,n=0,r=i.tiles.length;r>n;n+=1)i.tiles[n].update(e,t)}function f(){var e,t,i;for(e=this,t=0,i=e.tiles.length;i>t;t+=1)e.tiles[t].draw()}function m(){var e=this;e.isComplete=!0}function v(e){var t=this;t.hoveredTile&&t.hoveredTile.setIsHighlighted(!1),e&&e.setIsHighlighted(!0),t.hoveredTile=e}function b(){var e;e=this}function C(){var e;e=this}function w(e,n,r){var o=this;o.parent=e,o.postData=n,o.isVertical=r,o.actualContentAreaWidth=L.targetContentAreaWidth,o.isComplete=!1,o.svg=null,o.svgDefs=null,o.tiles=[],o.borderTiles=[],o.originalContentInnerIndices=null,o.innerIndexOfLastContentTile=null,o.centerX=Number.NaN,o.centerY=Number.NaN,o.index=Number.NaN,o.isPostOpen=!1,o.animations={},o.annotations=new hg.Annotations(o),o.resize=c,o.start=h,o.update=p,o.draw=f,o.cancel=m,o.updateBackgroundColor=u,o.updateTileColor=d,o.updateTileMass=g,o.computeContentIndices=t,o.setHoveredTile=v,o.openPost=b,o.closePost=C,i.call(o),t.call(o),c.call(o)}var L={};L.targetContentAreaWidth=800,L.backgroundHue=327,L.backgroundSaturation=20,L.backgroundLightness=10,L.tileHue=230,L.tileSaturation=50,L.tileLightness=30,L.tileOuterRadius=80,L.tileGap=12,L.contentStartingRowIndex=2,L.firstRowYOffset=L.tileOuterRadius*-.8,L.contentDensity=.6,L.tileMass=1,L.computeDependentValues=function(){L.sqrtThreeOverTwo=Math.sqrt(3)/2,L.twoOverSqrtThree=2/Math.sqrt(3),L.tileInnerRadius=L.tileOuterRadius*L.sqrtThreeOverTwo,L.tileShortLengthWithGap=2*L.tileInnerRadius+L.tileGap,L.tileLongLengthWithGap=2*L.tileOuterRadius+L.tileGap*L.twoOverSqrtThree},L.computeDependentValues(),w.config=L,window.hg||(window.hg={}),window.hg.Grid=w,console.log("Grid module loaded")}(),function(){function e(){function e(e){var t;(t=a(e))&&(t.element.classList.contains("hg-post-tile"),s.grid.setHoveredTile(t))}function i(e){var t;e.relatedTarget&&"HTML"!==e.relatedTarget.nodeName?(t=a(e))&&(t.element.classList.contains("hg-post-tile"),s.grid.setHoveredTile(null),hg.controller.createHighlightHoverAnimation(s.grid.index,t.index),e.stopPropagation()):(console.log("The mouse left the viewport"),s.grid.setHoveredTile(null))}function n(e){e.target.classList.contains("hg-post-tile")||e.target.classList.contains("hg-tile")}function r(e){e.target.classList.contains("hg-post-tile")}function o(e){var i;(i=a(e))&&(i.element.classList.contains("hg-post-tile"),t(s.grid.index,i.index))}function a(e){var t;return e.target.classList.contains("hg-tile")?(t=e.target.id.substr(3),s.grid.tiles[t]):null}var s;s=this,document.addEventListener("mouseover",e,!1),document.addEventListener("mouseout",i,!1),document.addEventListener("mousemove",n,!1),document.addEventListener("mousedown",r,!1),document.addEventListener("mouseup",o,!1)}function t(e,t){n.possibleClickAnimations[n.clickAnimation](e,t)}function i(t){var i=this;i.grid=t,e.call(i)}var n={};n.clickAnimation="Radiate Highlight",n.possibleClickAnimations={"Radiate Highlight":hg.controller.createHighlightRadiateAnimation,"Radiate Lines":hg.controller.createLinesRadiateAnimation,"Random Line":hg.controller.createRandomLineAnimation,None:function(){}},i.config=n,window.hg||(window.hg={}),window.hg.Input=i,console.log("Input module loaded")}(),function(){function e(){var e;e=this,e.vertexDeltas=a(e.outerRadius,e.isVertical),e.vertices=[],i.call(e,e.centerX,e.centerY),e.element=document.createElementNS(hg.util.svgNamespace,"polygon"),e.svg.appendChild(e.element),e.element.id="hg-"+e.index,e.element.classList.add("hg-tile"),e.element.style.cursor="pointer",g.call(e)}function t(e){var t;t=this,t.particle={},t.particle.px=t.centerX,t.particle.py=t.centerY,t.particle.vx=0,t.particle.vy=0,t.particle.fx=0,t.particle.fy=0,t.particle.m=e,t.particle.forceAccumulatorX=0,t.particle.forceAccumulatorY=0}function i(e,t){var i,n,r;for(i=this,n=0,r=0;6>n;n+=1)i.vertices[r]=e+i.vertexDeltas[r++],i.vertices[r]=t+i.vertexDeltas[r++]}function n(){var e;e=this}function r(){var e;e=this,e.tilePost=null}function o(){var e,t,i,n,r;for(i=Math.PI/3,n=-i,r=Math.PI/6-2*i,m.horizontalSines=[],m.horizontalCosines=[],e=0,t=n;6>e;e+=1,t+=i)m.horizontalSines[e]=Math.sin(t),m.horizontalCosines[e]=Math.cos(t);for(m.verticalSines=[],m.verticalCosines=[],e=0,t=r;6>e;e+=1,t+=i)m.verticalSines[e]=Math.sin(t),m.verticalCosines[e]=Math.cos(t)}function a(e,t){var i,n,r,o,a;for(t?(r=m.verticalSines,o=m.verticalCosines):(r=m.horizontalSines,o=m.horizontalCosines),i=0,n=0,a=[];6>i;i+=1)a[n++]=e*o[i],a[n++]=e*r[i];return a}function s(e){var t,i;t=this,i=t.holdsContent,t.postData=e,t.holdsContent=!!e,i?(r.call(t),n.call(t)):n.call(t)}function l(e){var t,i,n,r,o,a,s,l;for(t=this,t.neighbors=[],i=0,n=e.length;n>i;i+=1)if(a=e[i]){if(s=t.centerX-a.centerX,l=t.centerY-a.centerY,t.neighbors[i]={tile:a,restLength:Math.sqrt(s*s+l*l),neighborsRelationshipObj:null,springForceX:0,springForceY:0},a.neighbors)for(r=0,o=a.neighbors.length;o>r;r+=1)a.neighbors[r]&&a.neighbors[r].tile===t&&(t.neighbors[i].neighborsRelationshipObj=a.neighbors[r],a.neighbors[r].neighborsRelationshipObj=t.neighbors[i])}else t.neighbors[i]=null}function c(e,t,i){var n=this;n.isHighlighted&&(e+=hg.HighlightHoverJob.config.deltaHue,t+=hg.HighlightHoverJob.config.deltaSaturation,i+=hg.HighlightHoverJob.config.deltaLightness),n.originalHue=e,n.originalSaturation=t,n.originalLightness=i,n.currentHue=e,n.currentSaturation=t,n.currentLightness=i}function u(e){var t,i,n,r;t=this,e?t.isHighlighted?(i=t.originalHue,n=t.originalSaturation,r=t.originalLightness):(i=t.originalHue+hg.HighlightHoverJob.config.deltaHue*hg.HighlightHoverJob.config.opacity,n=t.originalSaturation+hg.HighlightHoverJob.config.deltaSaturation*hg.HighlightHoverJob.config.opacity,r=t.originalLightness+hg.HighlightHoverJob.config.deltaLightness*hg.HighlightHoverJob.config.opacity):t.isHighlighted?(i=t.originalHue-hg.HighlightHoverJob.config.deltaHue*hg.HighlightHoverJob.config.opacity,n=t.originalSaturation-hg.HighlightHoverJob.config.deltaSaturation*hg.HighlightHoverJob.config.opacity,r=t.originalLightness-hg.HighlightHoverJob.config.deltaLightness*hg.HighlightHoverJob.config.opacity):(i=t.originalHue,n=t.originalSaturation,r=t.originalLightness),t.originalHue=i,t.originalSaturation=n,t.originalLightness=r,t.currentHue=i,t.currentSaturation=n,t.currentLightness=r,t.isHighlighted=e}function d(e,t){var n,r,o,a,s,l,c,u,d,g,h,p,f;if(n=this,!n.particle.isFixed){for(n.particle.forceAccumulatorX+=-m.dragCoeff*n.particle.vx,n.particle.forceAccumulatorY+=-m.dragCoeff*n.particle.vy,r=0,o=n.neighbors.length;o>r;r+=1)a=n.neighbors[r],a&&(a.springForceX?(n.particle.forceAccumulatorX+=a.springForceX,n.particle.forceAccumulatorY+=a.springForceY,a.springForceX=0,a.springForceY=0):(s=a.tile.particle.px-n.particle.px,l=a.tile.particle.py-n.particle.py,c=a.tile.particle.vx-n.particle.vx,u=a.tile.particle.vy-n.particle.vy,d=s*c+l*u,g=Math.sqrt(s*s+l*l),h=(m.neighborSpringCoeff*(g-a.restLength)+m.neighborDampingCoeff*d/g)/g,p=s*h,f=l*h,n.particle.forceAccumulatorX+=p,n.particle.forceAccumulatorY+=f,a.neighborsRelationshipObj.springForceX=-p,a.neighborsRelationshipObj.springForceY=-f));s=n.centerX-n.particle.px,l=n.centerY-n.particle.py,g=Math.sqrt(s*s+l*l),g>0&&(c=-n.particle.vx,u=-n.particle.vy,d=s*c+l*u,h=n.isBorderTile?(m.borderAnchorSpringCoeff*g+m.borderAnchorDampingCoeff*d/g)/g:(m.innerAnchorSpringCoeff*g+m.innerAnchorDampingCoeff*d/g)/g,p=s*h,f=l*h,n.particle.forceAccumulatorX+=p,n.particle.forceAccumulatorY+=f),n.particle.fx=n.particle.forceAccumulatorX/n.particle.m*t,n.particle.fy=n.particle.forceAccumulatorY/n.particle.m*t,n.particle.px+=n.particle.vx*t,n.particle.py+=n.particle.vy*t,n.particle.vx+=n.particle.fx,n.particle.vy+=n.particle.fy;{var v=n.particle;v.px,v.py,v.vx,v.vy,v.fx,v.fy,v.forceAccumulatorX,v.forceAccumulatorY}0===n.index,isNaN(n.particle.px)&&console.log("tile.particle.px="+n.particle.px),isNaN(n.particle.py)&&console.log("tile.particle.py="+n.particle.py),isNaN(n.particle.vx)&&console.log("tile.particle.vx="+n.particle.vx),isNaN(n.particle.vy)&&console.log("tile.particle.vy="+n.particle.vy),isNaN(n.particle.fx)&&console.log("tile.particle.fx="+n.particle.fx),isNaN(n.particle.fy)&&console.log("tile.particle.fy="+n.particle.fy),n.particle.fx=n.particle.fx<m.forceSuppressionLowerThreshold&&n.particle.fx>m.forceSuppressionThresholdNegative?0:n.particle.fx,n.particle.fy=n.particle.fy<m.forceSuppressionLowerThreshold&&n.particle.fy>m.forceSuppressionThresholdNegative?0:n.particle.fy,n.particle.vx=n.particle.vx<m.velocitySuppressionLowerThreshold&&n.particle.vx>m.velocitySuppressionThresholdNegative?0:n.particle.vx,n.particle.vy=n.particle.vy<m.velocitySuppressionLowerThreshold&&n.particle.vy>m.velocitySuppressionThresholdNegative?0:n.particle.vy,n.particle.forceAccumulatorX=0,n.particle.forceAccumulatorY=0,i.call(n,n.particle.px,n.particle.py)}}function g(){var e,t,i,n;for(e=this,t=0,i="";12>t;)i+=e.vertices[t++]+","+e.vertices[t++]+" ";e.element.setAttribute("points",i),n="hsl("+e.currentHue+","+e.currentSaturation+"%,"+e.currentLightness+"%)",e.element.setAttribute("fill",n)}function h(e,t){var i;i=this,i.particle.forceAccumulatorX+=e,i.particle.forceAccumulatorY+=t}function p(e,t){var i;i=this,i.particle.isFixed=!0,i.particle.px=e,i.particle.py=t}function f(i,r,o,a,f,m,v,b,C,w,L,R,y,A,S,x,T){var N=this;N.svg=i,N.element=null,N.centerX=r,N.centerY=o,N.originalCenterX=r,N.originalCenterY=o,N.outerRadius=a,N.isVertical=f,N.originalHue=m,N.originalSaturation=v,N.originalLightness=b,N.currentHue=m,N.currentSaturation=v,N.currentLightness=b,N.postData=C,N.holdsContent=!!C,N.tilePost=null,N.index=w,N.rowIndex=L,N.columnIndex=R,N.isMarginTile=y,N.isBorderTile=A,N.isCornerTile=S,N.isInLargerRow=x,N.isHighlighted=!1,N.neighbors=null,N.vertices=null,N.vertexDeltas=null,N.particle=null,N.setContent=s,N.setNeighborTiles=l,N.setColor=c,N.setIsHighlighted=u,N.update=d,N.draw=g,N.applyExternalForce=h,N.fixPosition=p,e.call(N),t.call(N,T),N.holdsContent&&n.call(N)}var m;m={},m.dragCoeff=.01,m.neighborSpringCoeff=1e-5,m.neighborDampingCoeff=.001,m.innerAnchorSpringCoeff=4e-5,m.innerAnchorDampingCoeff=.001,m.borderAnchorSpringCoeff=4e-5,m.borderAnchorDampingCoeff=.001,m.forceSuppressionLowerThreshold=5e-4,m.velocitySuppressionLowerThreshold=5e-4,m.computeDependentValues=function(){m.forceSuppressionThresholdNegative=-m.forceSuppressionLowerThreshold,m.velocitySuppressionThresholdNegative=-m.velocitySuppressionLowerThreshold},m.computeDependentValues(),f.config=m,window.hg||(window.hg={}),window.hg.Tile=f,o(),console.log("Tile module loaded")}(),function(){function e(){}function t(e){var t=this;console.log("ClosePostJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(){var t=this;e.call(t)}function r(){}function o(){var e=this;t.call(e,!0)}function a(e,t){var a=this;a.grid=e,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=t,console.log("ClosePostJob created")}window.hg||(window.hg={}),window.hg.ClosePostJob=a,console.log("ClosePostJob module loaded")}(),function(){function e(){var e=this;e.isComplete=!0,e.onComplete()}function t(e,t){var i=s.opacity*t;e.currentHue=e.currentHue+s.deltaHue*i,e.currentSaturation=e.currentSaturation+s.deltaSaturation*i,e.currentLightness=e.currentLightness+s.deltaLightness*i}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(i){var n,r;n=this,i>n.startTime+s.duration?e.call(n,!1):(r=1-(i-n.startTime)/s.duration,t(n.tile,r))}function r(){}function o(){var t=this;e.call(t,!0)}function a(e,t){var a=this;a.tile=e,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=t}var s={};s.duration=500,s.deltaHue=0,s.deltaSaturation=0,s.deltaLightness=50,s.opacity=.5,s.isRecurring=!1,s.avgDelay=30,s.delayDeviationRange=20,a.config=s,window.hg||(window.hg={}),window.hg.HighlightHoverJob=a,console.log("HighlightHoverJob module loaded")}(),function(){function e(){var e,t,i,n,r,o;for(e=this,o=-hg.Grid.config.tileShortLengthWithGap,t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t].originalCenterX-e.startPoint.x,r=e.grid.tiles[t].originalCenterY-e.startPoint.y,e.tileDistances[t]=Math.sqrt(n*n+r*r)+o}function t(e){var t=this;console.log("HighlightRadiateJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(e,t,i){var n=l.opacity*i;e.currentHue=e.currentHue+l.deltaHue*t*n,e.currentSaturation=e.currentSaturation+l.deltaSaturation*t*n,e.currentLightness=e.currentLightness+l.deltaLightness*t*n}function n(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function r(e){var n,r,o,a,s,c,u,d,g;if(n=this,e>n.startTime+l.duration)t.call(n,!1);else{for(d=1-(e-n.startTime)/l.duration,r=l.shimmerSpeed*(e-n.startTime),o=r-l.shimmerWaveWidth,g=!1,a=0,s=n.grid.tiles.length;s>a;a+=1)c=n.tileDistances[a],c>o&&r>c&&(u=(c-o)/l.shimmerWaveWidth,i(n.grid.tiles[a],u,d),g=!0);g||t.call(n,!1)}}function o(){}function a(){var e=this;t.call(e,!0)}function s(t,i,s){var l=this;l.grid=i,l.startPoint=t,l.tileDistances=[],l.startTime=0,l.isComplete=!1,l.onComplete=s||function(){},l.start=n,l.update=r,l.draw=o,l.cancel=a,e.call(l),console.log("HighlightRadiateJob created")}var l={};l.shimmerSpeed=3,l.shimmerWaveWidth=500,l.duration=500,l.deltaHue=0,l.deltaSaturation=0,l.deltaLightness=50,l.opacity=.5,l.isRecurring=!1,l.avgDelay=4e3,l.delayDeviationRange=3800,s.config=l,window.hg||(window.hg={}),window.hg.HighlightRadiateJob=s,console.log("HighlightRadiateJob module loaded")}(),function(){function e(){var e,t,i;e=this,t=document.createElementNS(hg.util.svgNamespace,"filter"),e.grid.svgDefs.appendChild(t),i=document.createElementNS(hg.util.svgNamespace,"feGaussianBlur"),t.appendChild(i),t.setAttribute("id",L.filterId),t.setAttribute("x","-10%"),t.setAttribute("y","-10%"),t.setAttribute("width","120%"),t.setAttribute("height","120%"),i.setAttribute("in","SourceGraphic"),i.setAttribute("result","blurOut"),e.filter=t,e.feGaussianBlur=i}function t(){var e;e=this,e.startHue=360*Math.random(),e.endHue=360*Math.random()}function i(){var e;e=this,e.polyline=document.createElementNS(hg.util.svgNamespace,"polyline"),e.grid.svg.insertBefore(e.polyline,e.grid.svg.firstChild),e.polyline.setAttribute("fill-opacity","0"),L.isBlurOn&&e.polyline.setAttribute("filter","url(#"+L.filterId+")")}function n(){var e,t,i;e=this,t=e.ellapsedTime/e.duration,i=1-t,e.currentHue=i*e.startHue+t*e.endHue,e.currentSaturation=i*e.startSaturation+t*e.endSaturation,e.currentLightness=i*e.startLightness+t*e.endLightness,e.currentOpacity=i*e.startOpacity+t*e.endOpacity}function r(){var e;e=this,console.log("LineJob completed"),e.polyline&&(e.grid.svg.removeChild(e.polyline),e.polyline=null),e.tiles=[],e.corners=[],e.direction=Number.NaN,e.currentCornerIndex=Number.NaN,e.hasReachedEdge=!0,e.isComplete=!0,e.onComplete(e)}function o(){var e;e=this,e.hasAlmostReachedEdge=e.direction===(e.corners[e.currentCornerIndex]+3)%6?!1:!e.lowerNeighbors[e.currentCornerIndex]||!e.upperNeighbors[e.currentCornerIndex]}function a(){var e,t,i,n;e=this,n=e.corners[e.currentCornerIndex],e.grid.isVertical?(t=(n+5)%6,i=n):(t=n,i=(n+1)%6),e.lowerNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighbors[t],e.upperNeighbors[e.currentCornerIndex]=e.tiles[e.currentCornerIndex].neighbors[i],e.lowerNeighborCorners[e.currentCornerIndex]=(n+2)%6,e.upperNeighborCorners[e.currentCornerIndex]=(n+4)%6}function s(){var e,t,i,n,r,s,c,u,d,g,h;if(e=this,h=e.corners[e.currentCornerIndex],0===e.currentCornerIndex)c=e.forcedInitialRelativeDirection,e.latestDirection=l(c,h);else{switch(t=(h-e.direction+6)%6){case 0:i=e.sameDirectionProb,n=L.distantSidewaysDirectionProb,r=L.distantSidewaysDirectionProb;break;case 1:i=L.closeSidewaysDirectionProb,n=L.closeSidewaysDirectionProb,r=L.oppositeDirectionProb;break;case 2:i=L.distantSidewaysDirectionProb,n=e.sameDirectionProb,r=L.distantSidewaysDirectionProb;break;case 3:i=L.oppositeDirectionProb,n=L.closeSidewaysDirectionProb,r=L.closeSidewaysDirectionProb;break;case 4:i=L.distantSidewaysDirectionProb,n=L.distantSidewaysDirectionProb,r=e.sameDirectionProb;break;case 5:i=L.closeSidewaysDirectionProb,n=L.oppositeDirectionProb,r=L.closeSidewaysDirectionProb;break;default:throw new Error("Invalid state: cornerConfig="+t)}do s=Math.random(),c=i>s?L.NEIGHBOR:i+n>s?L.LOWER_SELF:L.UPPER_SELF,u=l(c,h);while(u===(e.latestDirection+3)%6);e.latestDirection=u}switch(c){case L.NEIGHBOR:e.grid.isVertical?(d=(h+1)%6,g=e.tiles[e.currentCornerIndex].neighbors[(h+5)%6].tile):(d=(h+1)%6,g=e.tiles[e.currentCornerIndex].neighbors[h].tile);break;case L.LOWER_SELF:d=(h+5)%6,g=e.tiles[e.currentCornerIndex];break;case L.UPPER_SELF:d=(h+1)%6,g=e.tiles[e.currentCornerIndex];break;default:throw new Error("Invalid state: relativeDirection="+c)}e.currentCornerIndex=e.corners.length,e.corners[e.currentCornerIndex]=d,e.tiles[e.currentCornerIndex]=g,a.call(e),o.call(e)}function l(e,t){switch(e){case L.NEIGHBOR:return t;case L.LOWER_SELF:return(t+4)%6;case L.UPPER_SELF:return(t+2)%6;default:throw new Error("Invalid state: relativeDirection="+e)}}function c(){var e,t,i,n,o,a,l;for(e=this,t=e.ellapsedTime/e.lineSidePeriod*hg.Grid.config.tileOuterRadius,o=parseInt(e.ellapsedTime/e.lineSidePeriod)+1;o>=e.corners.length&&!e.hasAlmostReachedEdge;)s.call(e);i=t%hg.Grid.config.tileOuterRadius,n=(e.lineLength-i+hg.Grid.config.tileOuterRadius)%hg.Grid.config.tileOuterRadius,e.frontSegmentEndRatio=i/hg.Grid.config.tileOuterRadius,e.backSegmentStartRatio=1-n/hg.Grid.config.tileOuterRadius,e.isShort=e.lineLength<hg.Grid.config.tileOuterRadius,e.isStarting=t<e.lineLength,e.hasAlmostReachedEdge&&o>=e.corners.length&&(e.hasReachedEdge=!0),e.segmentsIncludedCount=parseInt((e.lineLength-i-n-L.epsilon)/hg.Grid.config.tileOuterRadius)+2,e.isShort?e.segmentsIncludedCount=e.isStarting||e.hasReachedEdge?1:i-e.lineLength>=0?1:2:(e.isStarting&&(e.segmentsIncludedCount=o),e.hasReachedEdge&&(l=o-e.corners.length+1,a=t-(e.corners.length-1)*hg.Grid.config.tileOuterRadius,a>e.lineLength&&r.call(e),e.segmentsIncludedCount-=l))}function u(){var e,t,i;for(e=this,e.gapPoints=[],t=0,i=e.corners.length;i>t;t+=1)e.gapPoints[t]=d(e.tiles[t],e.corners[t],e.lowerNeighbors[t],e.upperNeighbors[t],e.lowerNeighborCorners[t],e.upperNeighborCorners[t])}function d(e,t,i,n,r,o){var a,s,l;return i?n?(a=3,s=e.particle.px+i.tile.particle.px+n.tile.particle.px,l=e.particle.py+i.tile.particle.py+n.tile.particle.py):(a=2,s=e.vertices[2*t]+i.tile.vertices[2*r],l=e.vertices[2*t+1]+i.tile.vertices[2*r+1]):n?(a=2,s=e.vertices[2*t]+n.tile.vertices[2*o],l=e.vertices[2*t+1]+n.tile.vertices[2*o+1]):(a=1,s=e.vertices[2*t],l=e.vertices[2*t+1]),{x:s/a,y:l/a}}function g(){var e,t,i,n;for(e=this,e.polylinePoints=[],t=e.currentCornerIndex,e.extraStartPoint&&e.isStarting?(e.polylinePoints[0]=e.extraStartPoint,i=e.segmentsIncludedCount+1,n=1):(i=e.segmentsIncludedCount,n=0),e.polylinePoints[i]=e.hasReachedEdge?{x:e.gapPoints[t].x,y:e.gapPoints[t].y}:{x:e.gapPoints[t].x*e.frontSegmentEndRatio+e.gapPoints[t-1].x*(1-e.frontSegmentEndRatio),y:e.gapPoints[t].y*e.frontSegmentEndRatio+e.gapPoints[t-1].y*(1-e.frontSegmentEndRatio)},i-=1,t-=1;i>n;i-=1,t-=1)e.polylinePoints[i]=e.gapPoints[t];e.polylinePoints[i]=e.isStarting?{x:e.gapPoints[t].x,y:e.gapPoints[t].y}:{x:e.gapPoints[t+1].x*e.backSegmentStartRatio+e.gapPoints[t].x*(1-e.backSegmentStartRatio),y:e.gapPoints[t+1].y*e.backSegmentStartRatio+e.gapPoints[t].y*(1-e.backSegmentStartRatio)}}function h(){var e,t,i,n;for(e=this,n="",t=0,i=e.polylinePoints.length;i>t;t+=1)n+=e.polylinePoints[t].x+","+e.polylinePoints[t].y+" ";e.polyline.setAttribute("points",n),e.polyline.setAttribute("stroke","hsl("+e.currentHue+","+e.currentSaturation+"%,"+e.currentLightness+"%)"),e.polyline.setAttribute("stroke-opacity",e.currentOpacity),e.polyline.setAttribute("stroke-width",e.lineWidth)}function p(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function f(e){var t=this;t.ellapsedTime=e-t.startTime,t.ellapsedTime>=t.duration?r.call(t):(n.call(t),c.call(t),t.feGaussianBlur.setAttribute("stdDeviation",t.blurStdDeviation),t.isComplete||(u.call(t),g.call(t)))}function m(){var e=this;h.call(e)}function v(){var e;e=this,r.call(e)}function b(n,r,o,s,l,c,u){var d=this;if(d.grid=n,d.tiles=[r],d.corners=[o],d.lowerNeighbors=[],d.upperNeighbors=[],d.lowerNeighborCorners=[],d.upperNeighborCorners=[],d.direction=s,d.forcedInitialRelativeDirection=l,d.extraStartPoint=u,d.currentCornerIndex=0,d.frontSegmentEndRatio=Number.NaN,d.backSegmentStartRatio=Number.NaN,d.latestDirection=s,d.polyline=null,d.gapPoints=[],d.polylinePoints=null,d.hasReachedEdge=!1,d.startTime=0,d.ellapsedTime=0,d.isComplete=!1,d.startHue=Number.NaN,d.endHue=Number.NaN,d.currentHue=Number.NaN,d.duration=L.duration,d.lineWidth=L.lineWidth,d.lineLength=L.lineLength,d.lineSidePeriod=L.lineSidePeriod,d.startSaturation=L.startSaturation,d.startLightness=L.startLightness,d.startOpacity=L.startOpacity,d.endSaturation=L.endSaturation,d.endLightness=L.endLightness,d.endOpacity=L.endOpacity,d.sameDirectionProb=L.sameDirectionProb,d.blurStdDeviation=L.blurStdDeviation,d.isBlurOn=L.isBlurOn,d.currentSaturation=L.startSaturation,d.currentLightness=L.startLightness,d.currentOpacity=L.startOpacity,d.onComplete=c||function(){},d.start=p,d.update=f,d.draw=m,d.cancel=v,L.haveDefinedLineBlur||e.call(d),!w(d))throw new Error("LineJob created with invalid initial corner configuration: tileIndex="+r.index+", corner="+o+", direction="+s);a.call(d),t.call(d),i.call(d),console.log("LineJob created: tileIndex="+r.index+", corner="+o+", direction="+s)}function C(e,t){var i,n,r,o;do i=e.borderTiles[parseInt(Math.random()*e.borderTiles.length)];while(i.isCornerTile);return e.isVertical?i.neighbors[4]?i.neighbors[1]?i.neighbors[0]?(Math.random()<.5?(n=2,o=L.LOWER_SELF):(n=4,o=L.UPPER_SELF),r=0):(Math.random()<.5?(n=1,o=L.UPPER_SELF):(n=5,o=L.LOWER_SELF),r=3):(i.isInLargerRow?Math.random()<.5?(n=0,o=L.LOWER_SELF):(n=3,o=L.UPPER_SELF):Math.random()<.5?(n=1,o=L.LOWER_SELF):(n=2,o=L.UPPER_SELF),r=i.originalCenterY<e.centerY?4:5):(i.isInLargerRow?Math.random()<.5?(n=0,o=L.UPPER_SELF):(n=3,o=L.LOWER_SELF):Math.random()<.5?(n=4,o=L.LOWER_SELF):(n=5,o=L.UPPER_SELF),r=i.originalCenterY<e.centerY?2:1):i.neighbors[0]?i.neighbors[3]?i.neighbors[4]?(Math.random()<.5?(n=0,o=L.LOWER_SELF):(n=2,o=L.UPPER_SELF),r=4):(Math.random()<.5?(n=3,o=L.LOWER_SELF):(n=5,o=L.UPPER_SELF),r=1):(i.rowIndex===e.rowCount-1?Math.random()<.5?(n=1,o=L.LOWER_SELF):(n=4,o=L.UPPER_SELF):Math.random()<.5?(n=2,o=L.LOWER_SELF):(n=3,o=L.UPPER_SELF),r=i.originalCenterX<e.centerX?0:5):(0===i.rowIndex?Math.random()<.5?(n=1,o=L.UPPER_SELF):(n=4,o=L.LOWER_SELF):Math.random()<.5?(n=0,o=L.UPPER_SELF):(n=5,o=L.LOWER_SELF),r=i.originalCenterX<e.centerX?2:3),new b(e,i,n,r,o,t,null)}function w(e){var t,i,n,r,o;if(t=e.tiles[0],i=e.corners[0],n=e.direction,r=e.forcedInitialRelativeDirection,t.isCornerTile)return!1;if(t.isBorderTile)if(e.grid.isVertical)if(t.neighbors[4])if(t.neighbors[1])if(t.neighbors[0])switch(o=0===n,i){case 0:return!0;case 1:return!0;case 2:return r===L.LOWER_SELF&&o;case 3:return!1;case 4:return r===L.UPPER_SELF&&o;case 5:return!0}else switch(o=3===n,i){case 0:return!1;case 1:return r===L.UPPER_SELF&&o;case 2:return!0;case 3:return!0;case 4:return!0;case 5:return r===L.LOWER_SELF&&o}else if(o=4===n||5===n,t.isInLargerRow)switch(i){case 0:return r===L.LOWER_SELF&&o;case 1:return!1;case 2:return!1;case 3:return r===L.UPPER_SELF&&o;case 4:return!0;case 5:return!0}else switch(i){case 0:return!0;case 1:return r===L.LOWER_SELF&&o;case 2:return r===L.UPPER_SELF&&o;case 3:return!0;case 4:return!0;case 5:return!0}else if(o=1===n||2===n,t.isInLargerRow)switch(i){case 0:return r===L.UPPER_SELF&&o;case 1:return!0;case 2:return!0;case 3:return r===L.LOWER_SELF&&o;case 4:return!1;case 5:return!1}else switch(i){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return!0;case 4:return r===L.LOWER_SELF&&o;case 5:return r===L.UPPER_SELF&&o}else if(t.neighbors[0])if(t.neighbors[3])if(t.neighbors[4])switch(o=4===n,i){case 0:return r===L.LOWER_SELF&&o;case 1:return!1;case 2:return r===L.UPPER_SELF&&o;case 3:return!0;case 4:return!0;case 5:return!0}else switch(o=1===n,i){case 0:return!0;case 1:return!0;case 2:return!0;case 3:return r===L.LOWER_SELF&&o;case 4:return!1;case 5:return r===L.UPPER_SELF&&o}else if(o=0===n||5===n,t.rowIndex===e.grid.rowCount-1)switch(i){case 0:return!0;case 1:return r===L.LOWER_SELF&&o;case 2:return!1;case 3:return!1;case 4:return r===L.UPPER_SELF&&o;case 5:return!0}else switch(i){case 0:return!0;case 1:return!0;case 2:return r===L.LOWER_SELF&&o;case 3:return r===L.UPPER_SELF&&o;case 4:return!0;case 5:return!0}else if(o=2===n||3===n,0===t.rowIndex)switch(i){case 0:return!1;case 1:return r===L.UPPER_SELF&&o;case 2:return!0;case 3:return!0;case 4:return r===L.LOWER_SELF&&o;case 5:return!1}else switch(i){case 0:return r===L.UPPER_SELF&&o;case 1:return!0;case 2:return!0;case 3:return!0;case 4:return!0;case 5:return r===L.LOWER_SELF&&o}return!0}var L={};L.duration=2e3,L.lineWidth=28,L.lineLength=6e4,L.lineSidePeriod=5,L.startSaturation=100,L.startLightness=100,L.startOpacity=.6,L.endSaturation=100,L.endLightness=60,L.endOpacity=0,L.sameDirectionProb=.8,L.blurStdDeviation=2,L.isBlurOn=!1,L.isRecurring=!0,L.avgDelay=2200,L.delayDeviationRange=2100,L.NEIGHBOR=0,L.LOWER_SELF=1,L.UPPER_SELF=2,L.oppositeDirectionProb=0,L.epsilon=1e-5,L.haveDefinedLineBlur=!1,L.filterId="random-line-filter",L.computeDependentValues=function(){L.distantSidewaysDirectionProb=(1-L.sameDirectionProb)/2,L.closeSidewaysDirectionProb=(1-L.oppositeDirectionProb)/2},L.computeDependentValues(),b.config=L,b.createRandomLineJob=C,window.hg||(window.hg={}),window.hg.LineJob=b,console.log("LineJob module loaded")}(),function(){function e(){var e,t,i;e=this,t=document.createElementNS(hg.util.svgNamespace,"filter"),e.grid.svgDefs.appendChild(t),i=document.createElementNS(hg.util.svgNamespace,"feGaussianBlur"),t.appendChild(i),t.setAttribute("id",l.filterId),t.setAttribute("x","-10%"),t.setAttribute("y","-10%"),t.setAttribute("width","120%"),t.setAttribute("height","120%"),i.setAttribute("in","SourceGraphic"),i.setAttribute("result","blurOut"),e.feGaussianBlur=i}function t(){var e,t,i;for(e=this,e.lineJobs=[],t=0;6>t;t+=1){try{i=new hg.LineJob(e.grid,e.tile,t,t,hg.LineJob.config.NEIGHBOR,e.onComplete,e.extraStartPoint)}catch(n){console.debug(n.message);continue}e.lineJobs.push(i),i.duration=l.duration,i.lineWidth=l.lineWidth,i.lineLength=l.lineLength,i.lineSidePeriod=l.lineSidePeriod,i.startSaturation=l.startSaturation,i.startLightness=l.startLightness,i.startOpacity=l.startOpacity,i.endSaturation=l.endSaturation,i.endLightness=l.endLightness,i.endOpacity=l.endOpacity,i.sameDirectionProb=l.sameDirectionProb,i.filterId=l.filterId,i.blurStdDeviation=l.blurStdDeviation,i.isBlurOn=l.isBlurOn,l.isBlurOn?i.polyline.setAttribute("filter","url(#"+l.filterId+")"):i.polyline.setAttribute("filter","none")}}function i(){var e,t;for(e=this,t=0;t<e.lineJobs.length;t+=1){if(!e.lineJobs[t].isComplete)return;e.lineJobs.splice(t--,1)}console.log("LinesRadiateJob completed"),e.isComplete=!0}function n(){var e,t,i;for(e=this,e.startTime=Date.now(),e.isComplete=!1,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].start()}function r(e,t){var n,r,o;for(n=this,n.extraStartPoint.x=n.tile.particle.px,n.extraStartPoint.y=n.tile.particle.py,r=0,o=n.lineJobs.length;o>r;r+=1)n.lineJobs[r].update(e,t),n.lineJobs[r].isComplete&&(n.lineJobs.splice(r,1),r--,o--);n.feGaussianBlur.setAttribute("stdDeviation",l.blurStdDeviation),i.call(n)}function o(){var e,t,i;for(e=this,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].draw()}function a(){var e,t,i;for(e=this,t=0,i=e.lineJobs.length;i>t;t+=1)e.lineJobs[t].cancel();e.lineJobs=[],e.isComplete=!0}function s(i,s,c){var u=this;u.grid=i,u.tile=s,u.extraStartPoint={x:s.particle.px,y:s.particle.py},u.startTime=0,u.isComplete=!1,u.lineJobs=null,u.onComplete=c||function(){},u.start=n,u.update=r,u.draw=o,u.cancel=a,l.haveDefinedLineBlur||e.call(u),t.call(u),console.log("LinesRadiateJob created: tileIndex="+s.index)}var l={};l.duration=700,l.lineWidth=24,l.lineLength=1300,l.lineSidePeriod=30,l.startSaturation=100,l.startLightness=100,l.startOpacity=.8,l.endSaturation=100,l.endLightness=70,l.endOpacity=0,l.sameDirectionProb=.85,l.blurStdDeviation=2,l.isBlurOn=!1,l.isRecurring=!1,l.avgDelay=2e3,l.delayDeviationRange=1800,l.haveDefinedLineBlur=!1,l.filterId="random-line-filter",s.config=l,window.hg||(window.hg={}),window.hg.LinesRadiateJob=s,console.log("LinesRadiateJob module loaded")}(),function(){function e(){}function t(e){var t=this;console.log("OpenPostJob "+(e?"cancelled":"completed")),t.isComplete=!0,t.onComplete()}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(){var t=this;e.call(t)}function r(){}function o(){var e=this;t.call(e,!0)}function a(e,t){var a=this;a.grid=e,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.onComplete=t,console.log("OpenPostJob created")}window.hg||(window.hg={}),window.hg.OpenPostJob=a,console.log("OpenPostJob module loaded")}(),function(){function e(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function t(){var e,t,i;for(e=this,t=0,i=e.grid.tiles.length;i>t;t+=1)e.grid.tiles[t].currentHue=e.grid.tiles[t].originalHue,e.grid.tiles[t].currentSaturation=e.grid.tiles[t].originalSaturation,e.grid.tiles[t].currentLightness=e.grid.tiles[t].originalLightness}function i(){}function n(){var e=this;e.isComplete=!0}function r(r){var o=this;o.grid=r,o.startTime=0,o.isComplete=!1,o.start=e,o.update=t,o.draw=i,o.cancel=n,o.init=function(){},o.init(),console.log("ColorResetJob created")}var o={};r.config=o,window.hg||(window.hg={}),window.hg.ColorResetJob=r,console.log("ColorResetJob module loaded")}(),function(){function e(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function t(){var e;e=this}function i(){}function n(){var e=this;e.isComplete=!0}function r(r){var a=this;a.grid=r,a.startTime=0,a.isComplete=!1,a.start=e,a.update=t,a.draw=i,a.cancel=n,a.init=function(){o.computeDependentValues()
},a.init(),console.log("ColorShiftJob created")}var o={};o.computeDependentValues=function(){},o.computeDependentValues(),r.config=o,window.hg||(window.hg={}),window.hg.ColorShiftJob=r,console.log("ColorShiftJob module loaded")}(),function(){function e(){var e,t,i,n,r,o,a,l;for(e=this,l=s.wavelength/2,e.waveProgressOffsets=[],t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t],o=n.originalCenterX-s.originX,a=n.originalCenterY-s.originY,r=Math.sqrt(o*o+a*a)+s.wavelength,e.waveProgressOffsets[t]=-(r%s.wavelength-l)/l}function t(e,t,i){var n=Math.sin((((e+1+i)%2+2)%2-1)*Math.PI);t.currentHue=t.currentHue+s.deltaHue*n*s.opacity,t.currentSaturation=t.currentSaturation+s.deltaSaturation*n*s.opacity,t.currentLightness=t.currentLightness+s.deltaLightness*n*s.opacity}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;for(i=this,n=(e+s.halfPeriod)/s.period%2-1,r=0,o=i.grid.tiles.length;o>r;r+=1)t(n,i.grid.tiles[r],i.waveProgressOffsets[r])}function r(){}function o(){var e=this;e.isComplete=!0}function a(t){var a=this;a.grid=t,a.waveProgressOffsets=null,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.init=function(){s.computeDependentValues(),e.call(a)},a.init(),console.log("ColorWaveJob created")}var s={};s.period=1e3,s.wavelength=600,s.originX=-100,s.originY=1400,s.deltaHue=0,s.deltaSaturation=0,s.deltaLightness=5,s.opacity=.5,s.computeDependentValues=function(){s.halfPeriod=s.period/2},s.computeDependentValues(),a.config=s,window.hg||(window.hg={}),window.hg.ColorWaveJob=a,console.log("ColorWaveJob module loaded")}(),function(){function e(){var e,t,i,n,r,o,a,l;for(e=this,l=s.wavelength/2,e.waveProgressOffsets=[],t=0,i=e.grid.tiles.length;i>t;t+=1)n=e.grid.tiles[t],o=n.originalCenterX-s.originX,a=n.originalCenterY-s.originY,r=Math.sqrt(o*o+a*a)+s.wavelength,e.waveProgressOffsets[t]=-(r%s.wavelength-l)/l}function t(e,t,i){var n=Math.sin((((e+1+i)%2+2)%2-1)*Math.PI);t.centerX=t.originalCenterX+s.tileDeltaX*n,t.centerY=t.originalCenterY+s.tileDeltaY*n}function i(){var e=this;e.startTime=Date.now(),e.isComplete=!1}function n(e){var i,n,r,o;for(i=this,n=(e+s.halfPeriod)/s.period%2-1,r=0,o=i.grid.tiles.length;o>r;r+=1)t(n,i.grid.tiles[r],i.waveProgressOffsets[r])}function r(){}function o(){var e=this;e.isComplete=!0}function a(t){var a=this;a.grid=t,a.waveProgressOffsets=null,a.startTime=0,a.isComplete=!1,a.start=i,a.update=n,a.draw=r,a.cancel=o,a.init=function(){s.computeDependentValues(),e.call(a)},a.init(),console.log("DisplacementWaveJob created")}var s={};s.period=3200,s.wavelength=1800,s.originX=0,s.originY=0,s.tileDeltaX=-15,s.tileDeltaY=-s.tileDeltaX*Math.sqrt(3),s.computeDependentValues=function(){s.halfPeriod=s.period/2,s.displacementAmplitude=Math.sqrt(s.tileDeltaX*s.tileDeltaX+s.tileDeltaY*s.tileDeltaY)},s.computeDependentValues(),a.config=s,window.hg||(window.hg={}),window.hg.DisplacementWaveJob=a,console.log("DisplacementWaveJob module loaded")}();